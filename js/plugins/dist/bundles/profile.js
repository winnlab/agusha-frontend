/*module/profile/profileModel*/
define("module/profile/profileModel",["can/"],function(e){"use strict";e&&e.__esModule||(e={"default":e});var r=e["default"],o=r.Model.extend("Profile",{id:"_id",resource:"/profile/crud",parseModels:function(e){return e}},{});return{get default(){return o},__esModule:!0}});
/*lib/childPopUp/views/index.mustache!js/plugins/CanJS/view/mustache/system*/
define("lib/childPopUp/views/index.mustache!js/plugins/CanJS/view/mustache/system",["can/view/mustache/mustache"],function(t){return t.view.preloadStringRenderer("lib/childPopUp/views/index.mustache",t.Mustache(function(s,e){var n=[];return n.push('<div class="popUpWrap'),n.push(t.view.txt(!0,"div","class",this,t.Mustache.txt({scope:s,options:e},"#",{get:"if"},{get:"visible"},[{fn:function(){var t=[];return t.push(" visible"),t.join("")}}]))),n.push(" "),n.push(t.view.txt(!0,"div","class",this,t.Mustache.txt({scope:s,options:e},null,{get:"classes"}))),n.push('"',t.view.pending({scope:s,options:e}),">"),n.push('\n    <div class="popUpBody">\n        <div class="contentWrap">\n            <div class="close"></div>\n            <div class="title">'),n.push(t.view.txt(0,"div",0,this,t.Mustache.txt({scope:s,options:e},null,{get:"title"}))),n.push('</div>\n            <div class="text">\n            	<div class="childUserPic">\n            		<div class="photoArea">\n                        <img class="photoCircle" '),n.push(t.view.txt(2,"img","src",this,function(){var n=[];return n.push('src="'),n.push(t.view.toStr(t.Mustache.txt({scope:s,options:e,special:!0},null,{get:"child.image.large"})())),n.push('"'),n.join("")})),n.push(" ",t.view.pending({scope:s,options:e}),"/>"),n.push('\n                    </div>\n                    <div class="buttons">\n                        <div class="button upload" '),n.push(t.view.txt(1,"div",1,this,t.Mustache.txt({scope:s,options:e},null,{get:"uploader"},"child"))),n.push("",t.view.pending({scope:s,options:e}),">"),n.push('Загрузить</div>\n                        <div class="button remove">Удалить</div>\n                    </div>   \n            	</div>\n            	<form class="childMetaInfo">\n            		<input type="text" name="name" can-value="child.name" placeholder="Имя детеныша">\n            		<div class="buttons">\n            			<input type="radio" class="childGender" value="1" name="gender" id="child_male" '),n.push(t.view.txt(0,"input",1,this,t.Mustache.txt({scope:s,options:e},"#",{get:"is"},{get:"child.gender"},1,[{fn:function(){var t=[];return t.push("checked"),t.join("")}}]))),n.push("",t.view.pending({scope:s,options:e}),">"),n.push('\n            			<label for="child_male">\n    						мальчик\n            			</label>\n            			<input type="radio" class="childGender" value="2" name="gender" id="child_female" '),n.push(t.view.txt(0,"input",1,this,t.Mustache.txt({scope:s,options:e},"#",{get:"is"},{get:"child.gender"},2,[{fn:function(){var t=[];return t.push("checked"),t.join("")}}]))),n.push("",t.view.pending({scope:s,options:e}),">"),n.push('\n            			<label for="child_female">\n            				девочка\n            			</label>\n            		</div>\n            		<div class="childBirthDate">\n                        <div class="customSelect customDay inactive" data-target="customDay">\n                            <p class="content"><span class="value">День</span> <span class="triangleDown">▾</span></p>\n                            <div class="customSelectList">'),n.push("\n"),n.push(t.view.txt(0,"div",0,this,t.Mustache.txt({scope:s,options:e},"#",{get:"each"},{get:"dates.days"},[{fn:function(s,e){var n=[];return n.push('                                    <p class="customSelectListItem" data-value="'),n.push(t.view.txt(!0,"p","data-value",this,t.Mustache.txt({scope:s,options:e},null,{get:"."}))),n.push('"',t.view.pending({scope:s,options:e}),">"),n.push(t.view.txt(1,"p",0,this,t.Mustache.txt({scope:s,options:e},null,{get:"."}))),n.push("</p>"),n.push("\n"),n.join("")}}]))),n.push('                            </div>\n                        </div>\n                        <div class="customSelect customMonth inactive" data-target="customMonth">\n                            <p class="content"><span class="value">Мес.</span> <span class="triangleDown">▾</span></p>\n                            <div class="customSelectList">'),n.push("\n"),n.push(t.view.txt(0,"div",0,this,t.Mustache.txt({scope:s,options:e},"#",{get:"each"},{get:"dates.months"},[{fn:function(s,e){var n=[];return n.push('                                    <p class="customSelectListItem" data-value="'),n.push(t.view.txt(!0,"p","data-value",this,t.Mustache.txt({scope:s,options:e},null,{get:"@index"}))),n.push('"',t.view.pending({scope:s,options:e}),">"),n.push(t.view.txt(1,"p",0,this,t.Mustache.txt({scope:s,options:e},null,{get:"."}))),n.push("</p>"),n.push("\n"),n.join("")}}]))),n.push('                            </div>\n                        </div>\n                        <div class="customSelect customYear inactive" data-target="customYear">\n                            <p class="content"><span class="value">Год.</span> <span class="triangleDown">▾</span></p>\n                            <div class="customSelectList">'),n.push("\n"),n.push(t.view.txt(0,"div",0,this,t.Mustache.txt({scope:s,options:e},"#",{get:"each"},{get:"dates.years"},[{fn:function(s,e){var n=[];return n.push('                                    <p class="customSelectListItem" data-value="'),n.push(t.view.txt(!0,"p","data-value",this,t.Mustache.txt({scope:s,options:e},null,{get:"."}))),n.push('"',t.view.pending({scope:s,options:e}),">"),n.push(t.view.txt(1,"p",0,this,t.Mustache.txt({scope:s,options:e},null,{get:"."}))),n.push("</p>"),n.push("\n"),n.join("")}}]))),n.push('                            </div>\n                        </div>\n                        <div class="clearfix"></div>\n                        <div '),n.push(t.view.txt(2,"div","style",this,function(){var t=[];return t.push('style="'),t.push('display: none"'),t.join("")})),n.push('>\n                            <select class="birth_day customDay" can-value="child.birth.day">\n                                <option disabled="disabled" selected',t.view.pending({scope:s,options:e}),">"),n.push("День</option>"),n.push("\n"),n.push(t.view.txt(0,"select",0,this,t.Mustache.txt({scope:s,options:e},"#",{get:"each"},{get:"dates.days"},[{fn:function(s,e){var n=[];return n.push('                                    <option value="'),n.push(t.view.txt(!0,"option","value",this,t.Mustache.txt({scope:s,options:e},null,{get:"."}))),n.push('"',t.view.pending({scope:s,options:e}),">"),n.push(t.view.txt(1,"option",0,this,t.Mustache.txt({scope:s,options:e},null,{get:"."}))),n.push("</option>"),n.push("\n"),n.join("")}}]))),n.push('                            </select>\n                            <select can-value="child.birth.month" class="birth_month customMonth">\n                                <option disabled="disabled" selected',t.view.pending({scope:s,options:e}),">"),n.push("Мес.</option>"),n.push("\n"),n.push(t.view.txt(0,"select",0,this,t.Mustache.txt({scope:s,options:e},"#",{get:"each"},{get:"dates.months"},[{fn:function(s,e){var n=[];return n.push("                                    <option value="),n.push(t.view.txt(1,"option",1,this,t.Mustache.txt({scope:s,options:e},null,{get:"@index"}))),n.push("",t.view.pending({scope:s,options:e}),">"),n.push(t.view.txt(1,"option",0,this,t.Mustache.txt({scope:s,options:e},null,{get:"."}))),n.push("</option>"),n.push("\n"),n.join("")}}]))),n.push('                            </select>\n                            <select can-value="child.birth.year" class="birth_year customYear">\n                                <option disabled="disabled" selected',t.view.pending({scope:s,options:e}),">"),n.push("Год</option>"),n.push("\n"),n.push(t.view.txt(0,"select",0,this,t.Mustache.txt({scope:s,options:e},"#",{get:"each"},{get:"dates.years"},[{fn:function(s,e){var n=[];return n.push('                                    <option value="'),n.push(t.view.txt(!0,"option","value",this,t.Mustache.txt({scope:s,options:e},null,{get:"."}))),n.push('"',t.view.pending({scope:s,options:e}),">"),n.push(t.view.txt(1,"option",0,this,t.Mustache.txt({scope:s,options:e},null,{get:"."}))),n.push("</option>"),n.push("\n"),n.join("")}}]))),n.push('                            </select>\n                        </div>\n            		</div>\n            	</form>\n            </div>\n            <div class="bottomButton">\n	            <button class="button ok">Сохранить</button>\n            </div>\n        </div>\n    </div>\n</div>\n'),n.join("")}))});
/*lib/childPopUp/childPopUp*/
define("lib/childPopUp/childPopUp",["can/","lib/popUp/","lib/childPopUp/views/index.mustache!","core/appState","lib/user/children","lodash","custom-scrollbar"],function(t,e,l,i,s,a,c){"use strict";function o(){return["Янв","Фев","Март","Апр","Май","Июнь","Июль","Авг","Сен","Окт","Нояб","Дек"]}function d(t,e){for(var l=new Date(e,t,1),i=[];l.getMonth()===t;)i.push(l.getDate()),l.setDate(l.getDate()+1);return i}function n(t){var e=(new Date).getFullYear(),l=[];for(t=t||1980;e>=t;)l.push(t++);return l}t&&t.__esModule||(t={"default":t}),e&&e.__esModule||(e={"default":e}),l&&l.__esModule||(l={"default":l}),i&&i.__esModule||(i={"default":i}),s&&s.__esModule||(s={"default":s}),a&&a.__esModule||(a={"default":a}),c&&c.__esModule||(c={"default":c});var u=t["default"],h=e["default"],r=l["default"],m=(i["default"],s["default"]),f=(a["default"],h.extend({init:function(t,e){this.child=e.child||new m({isSaved:!1,birth:{month:null,day:null,year:null}}),this.module=new u.Map({close:!0,visible:null,text:"",child:this.child,classes:"addChildPopUp",dates:{months:o(),days:d(0,1990),years:n(1990)}}),this.element.html(u.view(r,this.module)),window.child=this.child,$(".customSelectList",this.element).mCustomScrollbar({theme:"dark-thick",axis:"y",height:300,scrollInertia:400,scrollButtons:{enable:!1,scrollAmount:200,scrollType:"stepless"},advanced:{updateOnContentResize:!0}})},".childBirthDate select change":function(t){var e=$(t).attr("class"),l=Number($(t,"option:selected").val()),i=$(".childBrithMonth option:selected").val()||2e3,s=$(".childBrithYear option:selected").val()||0;"childBrithMonth"==e&&this.module.attr("dates.days",d(l,i)),"childBrithYear"==e&&this.module.attr("dates.days",d(s,l))},".addChildPopUp .button.ok click":function(){this.child.attr("isSaved",!0),this.closePopup()},".addChildPopUp .button.remove click":function(){this.child.removeImages()},".ok click":function(){},show:function(t){this.module.attr({visible:!0,title:"<h1>О вашем малыше</h1>",cb:t.cb})},closePopup:function(){this.module.attr({visible:!1}),this.element.remove()},".customSelect .content click":function(t){var e=t.parents(".customSelect").find(".customSelectList");e.hasClass("active")?e.removeClass("active"):e.addClass("active")},".customSelectListItem click":function(t){var e=t.data("value"),l=t.html(),i=t.parents(".customSelect"),s=i.find(".content .value"),a=i.find(".customSelectList"),c=i.data("target"),o=i.parent().find("select."+c);i.hasClass("customDay")?this.child.attr("birth.day",e):i.hasClass("customMonth")?this.child.attr("birth.month",e):i.hasClass("customYear")&&this.child.attr("birth.year",e),a.removeClass("active"),s.html(l),o.find("option:selected").attr("selected",!1),o.find('option[value="'+e+'"]').attr("selected","selected")},"input change":function(t){this.child.attr(t.attr("name"),t.val())}}));return{get default(){return f},__esModule:!0}});
/*js/plugins/jquery.inputmask/dist/jquery.inputmask.bundle*/
System.define("js/plugins/jquery.inputmask/dist/jquery.inputmask.bundle",'!function(e){function t(e){var t=document.createElement("input"),a="on"+e,i=a in t;return i||(t.setAttribute(a,"return;"),i="function"==typeof t[a]),t=null,i}function a(e){var t="text"==e||"tel"==e;if(!t){var a=document.createElement("input");a.setAttribute("type",e),t="text"===a.type,a=null}return t}function i(t,a,r){var n=r.aliases[t];return n?(n.alias&&i(n.alias,void 0,r),e.extend(!0,r,n),e.extend(!0,r,a),!0):!1}function r(t,a){function i(a){function i(e,t,a,i){this.matches=[],this.isGroup=e||!1,this.isOptional=t||!1,this.isQuantifier=a||!1,this.isAlternator=i||!1,this.quantifier={min:1,max:1}}function r(a,i,r){var n=t.definitions[i],o=0==a.matches.length;if(r=void 0!=r?r:a.matches.length,n&&!p){n.placeholder=e.isFunction(n.placeholder)?n.placeholder.call(this,t):n.placeholder;for(var s=n.prevalidator,l=s?s.length:0,u=1;u<n.cardinality;u++){var c=l>=u?s[u-1]:[],d=c.validator,f=c.cardinality;a.matches.splice(r++,0,{fn:d?"string"==typeof d?new RegExp(d):new function(){this.test=d}:new RegExp("."),cardinality:f?f:1,optionality:a.isOptional,newBlockMarker:o,casing:n.casing,def:n.definitionSymbol||i,placeholder:n.placeholder,mask:i})}a.matches.splice(r++,0,{fn:n.validator?"string"==typeof n.validator?new RegExp(n.validator):new function(){this.test=n.validator}:new RegExp("."),cardinality:n.cardinality,optionality:a.isOptional,newBlockMarker:o,casing:n.casing,def:n.definitionSymbol||i,placeholder:n.placeholder,mask:i})}else a.matches.splice(r++,0,{fn:null,cardinality:0,optionality:a.isOptional,newBlockMarker:o,casing:null,def:i,placeholder:void 0,mask:i}),p=!1}for(var n,o,s,l,u,c,d=/(?:[?*+]|\\{[0-9\\+\\*]+(?:,[0-9\\+\\*]*)?\\})\\??|[^.?*+^${[]()|\\\\]+|./g,p=!1,f=new i,m=[],v=[];n=d.exec(a);)switch(o=n[0],o.charAt(0)){case t.optionalmarker.end:case t.groupmarker.end:if(s=m.pop(),m.length>0){if(l=m[m.length-1],l.matches.push(s),l.isAlternator){u=m.pop();for(var h=0;h<u.matches.length;h++)u.matches[h].isGroup=!1;m.length>0?(l=m[m.length-1],l.matches.push(u)):f.matches.push(u)}}else f.matches.push(s);break;case t.optionalmarker.start:m.push(new i(!1,!0));break;case t.groupmarker.start:m.push(new i(!0));break;case t.quantifiermarker.start:var g=new i(!1,!1,!0);o=o.replace(/[{}]/g,"");var y=o.split(","),k=isNaN(y[0])?y[0]:parseInt(y[0]),x=1==y.length?k:isNaN(y[1])?y[1]:parseInt(y[1]);if(("*"==x||"+"==x)&&(k="*"==x?0:1),g.quantifier={min:k,max:x},m.length>0){var b=m[m.length-1].matches;if(n=b.pop(),!n.isGroup){var P=new i(!0);P.matches.push(n),n=P}b.push(n),b.push(g)}else{if(n=f.matches.pop(),!n.isGroup){var P=new i(!0);P.matches.push(n),n=P}f.matches.push(n),f.matches.push(g)}break;case t.escapeChar:p=!0;break;case t.alternatormarker:m.length>0?(l=m[m.length-1],c=l.matches.pop()):c=f.matches.pop(),c.isAlternator?m.push(c):(u=new i(!1,!1,!1,!0),u.matches.push(c),m.push(u));break;default:if(m.length>0){if(l=m[m.length-1],l.matches.length>0&&(c=l.matches[l.matches.length-1],c.isGroup&&(c.isGroup=!1,r(c,t.groupmarker.start,0),r(c,t.groupmarker.end))),r(l,o),l.isAlternator){u=m.pop();for(var h=0;h<u.matches.length;h++)u.matches[h].isGroup=!1;m.length>0?(l=m[m.length-1],l.matches.push(u)):f.matches.push(u)}}else f.matches.length>0&&(c=f.matches[f.matches.length-1],c.isGroup&&(c.isGroup=!1,r(c,t.groupmarker.start,0),r(c,t.groupmarker.end))),r(f,o)}return f.matches.length>0&&(c=f.matches[f.matches.length-1],c.isGroup&&(c.isGroup=!1,r(c,t.groupmarker.start,0),r(c,t.groupmarker.end)),v.push(f)),v}function r(a,r){if(t.numericInput&&t.multi!==!0){a=a.split("").reverse();for(var n=0;n<a.length;n++)a[n]==t.optionalmarker.start?a[n]=t.optionalmarker.end:a[n]==t.optionalmarker.end?a[n]=t.optionalmarker.start:a[n]==t.groupmarker.start?a[n]=t.groupmarker.end:a[n]==t.groupmarker.end&&(a[n]=t.groupmarker.start);a=a.join("")}if(void 0==a||""==a)return void 0;if(1==a.length&&0==t.greedy&&0!=t.repeat&&(t.placeholder=""),t.repeat>0||"*"==t.repeat||"+"==t.repeat){var o="*"==t.repeat?0:"+"==t.repeat?1:t.repeat;a=t.groupmarker.start+a+t.groupmarker.end+t.quantifiermarker.start+o+","+t.repeat+t.quantifiermarker.end}return void 0==e.inputmask.masksCache[a]&&(e.inputmask.masksCache[a]={mask:a,maskToken:i(a),validPositions:{},_buffer:void 0,buffer:void 0,tests:{},metadata:r}),e.extend(!0,{},e.inputmask.masksCache[a])}var n=void 0;if(e.isFunction(t.mask)&&(t.mask=t.mask.call(this,t)),e.isArray(t.mask))if(a)n=[],e.each(t.mask,function(t,a){n.push(void 0==a.mask||e.isFunction(a.mask)?r(a.toString(),a):r(a.mask.toString(),a))});else{t.keepStatic=void 0==t.keepStatic?!0:t.keepStatic;var o="(";e.each(t.mask,function(t,a){o.length>1&&(o+=")|("),o+=void 0==a.mask||e.isFunction(a.mask)?a.toString():a.mask.toString()}),o+=")",n=r(o,t.mask)}else t.mask&&(n=void 0==t.mask.mask||e.isFunction(t.mask.mask)?r(t.mask.toString(),t.mask):r(t.mask.mask.toString(),t.mask));return n}function n(i,r,n){function o(e,t,a){t=t||0;var i,r,n,o=[],s=0;do{if(e===!0&&f().validPositions[s]){var l=f().validPositions[s];r=l.match,i=l.locator.slice(),o.push(a===!0?l.input:G(s,r))}else{if(t>s){var u=b(s,i,s-1);n=u[0]}else n=y(s,i,s-1);r=n.match,i=n.locator.slice(),o.push(G(s,r))}s++}while((void 0==rt||rt>s-1)&&null!=r.fn||null==r.fn&&""!=r.def||t>=s);return o.pop(),o}function f(){return r}function m(e){var t=f();t.buffer=void 0,t.tests={},e!==!0&&(t._buffer=void 0,t.validPositions={},t.p=0)}function v(e){var t=f(),a=-1,i=t.validPositions;void 0==e&&(e=-1);var r=a,n=a;for(var o in i){var s=parseInt(o);(-1==e||null!=i[s].match.fn)&&(e>=s&&(r=s),s>=e&&(n=s))}return a=e-r>1||e>n?r:n}function h(t,a,i){if(n.insertMode&&void 0!=f().validPositions[t]&&void 0==i){var r,o=e.extend(!0,{},f().validPositions),s=v();for(r=t;s>=r;r++)delete f().validPositions[r];f().validPositions[t]=a;var l,u=!0;for(r=t;s>=r;r++){var c=o[r];if(void 0!=c){var d=f().validPositions;l=!n.keepStatic&&d[r]&&(void 0!=d[r+1]&&b(r+1,d[r].locator.slice(),r).length>1||void 0!=d[r].alternation)?r+1:M(r),u=x(l,c.match.def)?u&&E(l,c.input,!0,!0)!==!1:null==c.match.fn}if(!u)break}if(!u)return f().validPositions=e.extend(!0,{},o),!1}else f().validPositions[t]=a;return!0}function g(e,t){var a,i=e;for(void 0!=f().validPositions[e]&&f().validPositions[e].input==n.radixPoint&&(t++,i++),a=i;t>a;a++)void 0==f().validPositions[a]||f().validPositions[a].input==n.radixPoint&&a!=v()||delete f().validPositions[a];for(a=t;a<=v();){var r=f().validPositions[a],o=f().validPositions[i];void 0!=r&&void 0==o?(x(i,r.match.def)&&E(i,r.input,!0)!==!1&&(delete f().validPositions[a],a++),i++):a++}var s=v();s>=e&&void 0!=f().validPositions[s]&&f().validPositions[s].input==n.radixPoint&&delete f().validPositions[s],m(!0)}function y(e,t,a){for(var i,r=b(e,t,a),o=v(),s=f().validPositions[o]||b(0)[0],l=void 0!=s.alternation?s.locator[s.alternation].split(","):[],u=0;u<r.length&&(i=r[u],!(n.greedy||i.match&&(i.match.optionality===!1||i.match.newBlockMarker===!1)&&i.match.optionalQuantifier!==!0&&(void 0==s.alternation||void 0!=i.locator[s.alternation]&&A(i.locator[s.alternation].toString().split(","),l))));u++);return i}function k(e){return f().validPositions[e]?f().validPositions[e].match:b(e)[0].match}function x(e,t){for(var a=!1,i=b(e),r=0;r<i.length;r++)if(i[r].match&&i[r].match.def==t){a=!0;break}return a}function b(t,a,i){function r(a,i,o,l){function d(o,l,m){if(s>1e4)return alert("jquery.inputmask: There is probably an error in your mask definition or in the code. Create an issue on github with an example of the mask you are using. "+f().mask),!0;if(s==t&&void 0==o.matches)return u.push({match:o,locator:l.reverse()}),!0;if(void 0!=o.matches){if(o.isGroup&&m!==!0){if(o=d(a.matches[p+1],l))return!0}else if(o.isOptional){var v=o;if(o=r(o,i,l,m)){var h=u[u.length-1].match,g=0==e.inArray(h,v.matches);g&&(c=!0),s=t}}else if(o.isAlternator){var y,k=o,x=[],b=u.slice(),P=l.length,_=i.length>0?i.shift():-1;if(-1==_||"string"==typeof _){var S,w=s,A=i.slice();"string"==typeof _&&(S=_.split(","));for(var E=0;E<k.matches.length;E++){u=[],o=d(k.matches[E],[E].concat(l),m)||o,y=u.slice(),s=w,u=[];for(var R=0;R<A.length;R++)i[R]=A[R];for(var C=0;C<y.length;C++)for(var M=y[C],O=0;O<x.length;O++){var j=x[O];if(M.match.mask==j.match.mask&&("string"!=typeof _||-1!=e.inArray(M.locator[P].toString(),S))){y.splice(C,1),j.locator[P]=j.locator[P]+","+M.locator[P],j.alternation=P;break}}x=x.concat(y)}"string"==typeof _&&(x=e.map(x,function(t,a){if(isFinite(a)){var i,r=t.locator[P].toString().split(",");t.locator[P]=void 0,t.alternation=void 0;for(var n=0;n<r.length;n++)i=-1!=e.inArray(r[n],S),i&&(void 0!=t.locator[P]?(t.locator[P]+=",",t.alternation=P,t.locator[P]+=r[n]):t.locator[P]=parseInt(r[n]));if(void 0!=t.locator[P])return t}})),u=b.concat(x),c=!0}else o=d(k.matches[_],[_].concat(l),m);if(o)return!0}else if(o.isQuantifier&&m!==!0){var F=o;n.greedy=n.greedy&&isFinite(F.quantifier.max);for(var G=i.length>0&&m!==!0?i.shift():0;G<(isNaN(F.quantifier.max)?G+1:F.quantifier.max)&&t>=s;G++){var D=a.matches[e.inArray(F,a.matches)-1];if(o=d(D,[G].concat(l),!0)){var h=u[u.length-1].match;h.optionalQuantifier=G>F.quantifier.min-1;var g=0==e.inArray(h,D.matches);if(g){if(G>F.quantifier.min-1){c=!0,s=t;break}return!0}return!0}}}else if(o=r(o,i,l,m))return!0}else s++}for(var p=i.length>0?i.shift():0;p<a.matches.length;p++)if(a.matches[p].isQuantifier!==!0){var m=d(a.matches[p],[p].concat(o),l);if(m&&s==t)return m;if(s>t)break}}var o=f().maskToken,s=a?i:0,l=a||[0],u=[],c=!1;if(void 0==a){for(var d,p=t-1;void 0==(d=f().validPositions[p])&&p>-1;)p--;if(void 0!=d&&p>-1)s=p,l=d.locator.slice();else{for(p=t-1;void 0==(d=f().tests[p])&&p>-1;)p--;void 0!=d&&p>-1&&(s=p,l=d[0].locator.slice())}}for(var m=l.shift();m<o.length;m++){var v=r(o[m],l,[m]);if(v&&s==t||s>t)break}return(0==u.length||c)&&u.push({match:{fn:null,cardinality:0,optionality:!0,casing:null,def:""},locator:[]}),f().tests[t]=e.extend(!0,[],u),f().tests[t]}function P(){return void 0==f()._buffer&&(f()._buffer=o(!1,1)),f()._buffer}function _(){return void 0==f().buffer&&(f().buffer=o(!0,v(),!0)),f().buffer}function S(e,t,a){if(a=a||_().slice(),e===!0)m(),e=0,t=a.length;else for(var i=e;t>i;i++)delete f().validPositions[i],delete f().tests[i];for(var i=e;t>i;i++)a[i]!=n.skipOptionalPartCharacter&&E(i,a[i],!0,!0)}function w(e,t){switch(t.casing){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase()}return e}function A(t,a){for(var i=n.greedy?a:a.slice(0,1),r=!1,o=0;o<t.length;o++)if(-1!=e.inArray(t[o],i)){r=!0;break}return r}function E(t,a,i,r){function o(t,a,i,r){var o=!1;return e.each(b(t),function(s,l){for(var u=l.match,c=a?1:0,d="",p=(_(),u.cardinality);p>c;p--)d+=j(t-(p-1));if(a&&(d+=a),o=null!=u.fn?u.fn.test(d,f(),t,i,n):a!=u.def&&a!=n.skipOptionalPartCharacter||""==u.def?!1:{c:u.def,pos:t},o!==!1){var y=void 0!=o.c?o.c:a;y=y==n.skipOptionalPartCharacter&&null===u.fn?u.def:y;var k=t;if(void 0!=o.remove&&g(o.remove,o.remove+1),o.refreshFromBuffer){var x=o.refreshFromBuffer;if(i=!0,S(x===!0?x:x.start,x.end),void 0==o.pos&&void 0==o.c)return o.pos=v(),!1;if(k=void 0!=o.pos?o.pos:t,k!=t)return o=e.extend(o,E(k,y,!0)),!1}else if(o!==!0&&void 0!=o.pos&&o.pos!=t&&(k=o.pos,S(t,k),k!=t))return o=e.extend(o,E(k,y,!0)),!1;return 1!=o&&void 0==o.pos&&void 0==o.c?!1:(s>0&&m(!0),h(k,e.extend({},l,{input:w(y,u)}),r)||(o=!1),!1)}}),o}function s(t,a,i,r){var o,s,l=e.extend(!0,{},f().validPositions);for(o=v();o>=0;o--)if(f().validPositions[o]&&void 0!=f().validPositions[o].alternation){s=f().validPositions[o].alternation;break}if(void 0!=s)for(var u in f().validPositions)if(parseInt(u)>parseInt(o)&&void 0===f().validPositions[u].alternation){for(var c=f().validPositions[u],d=c.locator[s],p=f().validPositions[o].locator[s].split(","),h=0;h<p.length;h++)if(d<p[h]){for(var g,y,k=u-1;k>=0;k--)if(g=f().validPositions[k],void 0!=g){y=g.locator[s],g.locator[s]=p[h];break}if(d!=g.locator[s]){for(var x=_().slice(),b=u;b<v()+1;b++)delete f().validPositions[b],delete f().tests[b];m(!0),n.keepStatic=!n.keepStatic;for(var b=u;b<x.length;b++)x[b]!=n.skipOptionalPartCharacter&&E(v()+1,x[b],!1,!0);g.locator[s]=y;var P=E(t,a,i,r);if(n.keepStatic=!n.keepStatic,P)return P;m(),f().validPositions=e.extend(!0,{},l)}}break}return!1}function l(t,a){for(var i=f().validPositions[a],r=i.locator,n=r.length,o=t;a>o;o++)if(!R(o)){var s=b(o),l=s[0],u=-1;e.each(s,function(e,t){for(var a=0;n>a;a++)t.locator[a]&&A(t.locator[a].toString().split(","),r[a].toString().split(","))&&a>u&&(u=a,l=t)}),h(o,e.extend({},l,{input:l.match.def}),!0)}}i=i===!0;for(var u=_(),c=t-1;c>-1&&(!f().validPositions[c]||null!=f().validPositions[c].match.fn);c--)void 0==f().validPositions[c]&&(!R(c)||u[c]!=G(c))&&b(c).length>1&&o(c,u[c],!0);var d=t,p=!1;if(r&&d>=C()&&m(!0),d<C()&&(p=o(d,a,i,r),!i&&p===!1)){var y=f().validPositions[d];if(!y||null!=y.match.fn||y.match.def!=a&&a!=n.skipOptionalPartCharacter){if((n.insertMode||void 0==f().validPositions[M(d)])&&!R(d))for(var k=d+1,x=M(d);x>=k;k++)if(p=o(k,a,i,r),p!==!1){l(d,k),d=k;break}}else p={caret:M(d)}}return p===!1&&n.keepStatic&&L(u)&&(p=s(t,a,i,r)),p===!0&&(p={pos:d}),p}function R(e){var t=k(e);return null!=t.fn?t.fn:!1}function C(){var e;if(rt=it.prop("maxLength"),-1==rt&&(rt=void 0),0==n.greedy){var t,a=v(),i=f().validPositions[a],r=void 0!=i?i.locator.slice():void 0;for(t=a+1;void 0==i||null!=i.match.fn||null==i.match.fn&&""!=i.match.def;t++)i=y(t,r,t-1),r=i.locator.slice();e=t}else e=_().length;return void 0==rt||rt>e?e:rt}function M(e){var t=C();if(e>=t)return t;for(var a=e;++a<t&&!R(a)&&(n.nojumps!==!0||n.nojumpsThreshold>a););return a}function O(e){var t=e;if(0>=t)return 0;for(;--t>0&&!R(t););return t}function j(e){return void 0==f().validPositions[e]?G(e):f().validPositions[e].input}function F(e,t,a){e._valueSet(t.join("")),void 0!=a&&B(e,a)}function G(e,t){return t=t||k(e),void 0!=t.placeholder?t.placeholder:null==t.fn?t.def:n.placeholder.charAt(e%n.placeholder.length)}function D(t,a,i,r){var o=void 0!=r?r.slice():t._valueGet().split("");m(),a&&t._valueSet("");var s=P().slice(0,M(-1)).join(""),l=o.join("").match(new RegExp(T(s),"g"));if(l&&l.length>1&&o.splice(0,s.length),e.each(o,function(a,r){var n=v(),o=f().validPositions[n],s=y(n+1,o?o.locator.slice():void 0,n);if(-1==e.inArray(r,P().slice(n+1,f().p))||i){var l=i?a:null==s.match.fn&&n+1<f().p?n+1:f().p;W.call(t,void 0,!0,r.charCodeAt(0),!1,i,l),i=i||a>0&&a>f().p}else W.call(t,void 0,!0,r.charCodeAt(0),!1,!0,n+1)}),a){var u=n.onKeyPress.call(this,void 0,_(),0,n);$(t,u),F(t,_(),e(t).is(":focus")?M(v(0)):void 0)}}function T(t){return e.inputmask.escapeRegex.call(this,t)}function I(t){if(t.data("_inputmask")&&!t.hasClass("hasDatepicker")){var a=[],i=f().validPositions;for(var r in i)i[r].match&&null!=i[r].match.fn&&a.push(i[r].input);var o=(nt?a.reverse():a).join(""),s=(nt?_().slice().reverse():_()).join("");return e.isFunction(n.onUnMask)&&(o=n.onUnMask.call(t,s,o,n)||o),o}return t[0]._valueGet()}function K(e){if(nt&&"number"==typeof e&&(!n.greedy||""!=n.placeholder)){var t=_().length;e=t-e}return e}function B(t,a,i){var r,o=t.jquery&&t.length>0?t[0]:t;if("number"!=typeof a){var s=e(o).data("_inputmask");return!e(o).is(":visible")&&s&&void 0!=s.caret?(a=s.caret.begin,i=s.caret.end):o.setSelectionRange?(a=o.selectionStart,i=o.selectionEnd):document.selection&&document.selection.createRange&&(r=document.selection.createRange(),a=0-r.duplicate().moveStart("character",-1e5),i=a+r.text.length),a=K(a),i=K(i),{begin:a,end:i}}a=K(a),i=K(i),i="number"==typeof i?i:a;var s=e(o).data("_inputmask")||{};if(s.caret={begin:a,end:i},e(o).data("_inputmask",s),e(o).is(":visible")){var l=e(o).css("font-size").replace("px","")*i;o.scrollLeft=l>o.scrollWidth?l:0,0==n.insertMode&&a==i&&i++,o.setSelectionRange?(o.selectionStart=a,o.selectionEnd=i):o.createTextRange&&(r=o.createTextRange(),r.collapse(!0),r.moveEnd("character",i),r.moveStart("character",a),r.select())}}function N(t){var a,i,r=_(),n=r.length,o=v(),s={},l=f().validPositions[o],u=void 0!=l?l.locator.slice():void 0;for(a=o+1;a<r.length;a++)i=y(a,u,a-1),u=i.locator.slice(),s[a]=e.extend(!0,{},i);var c=l&&void 0!=l.alternation?l.locator[l.alternation].split(","):[];for(a=n-1;a>o&&(i=s[a].match,(i.optionality||i.optionalQuantifier||l&&void 0!=l.alternation&&void 0!=s[a].locator[l.alternation]&&-1!=e.inArray(s[a].locator[l.alternation].toString(),c))&&r[a]==G(a,i));a--)n--;return t?{l:n,def:s[n]?s[n].match:void 0}:n}function H(e){for(var t=N(),a=e.length-1;a>t&&!R(a);a--);e.splice(t,a+1-t)}function L(t){if(e.isFunction(n.isComplete))return n.isComplete.call(it,t,n);if("*"==n.repeat)return void 0;var a=!1,i=N(!0),r=O(i.l),o=v();if(o==r&&(void 0==i.def||i.def.newBlockMarker||i.def.optionalQuantifier)){a=!0;for(var s=0;r>=s;s++){var l=R(s);if(l&&(void 0==t[s]||t[s]==G(s))||!l&&t[s]!=G(s)){a=!1;break}}}return a}function U(e,t){return nt?e-t>1||e-t==1&&n.insertMode:t-e>1||t-e==1&&n.insertMode}function q(t){var a=e._data(t).events;e.each(a,function(t,a){e.each(a,function(e,t){if("inputmask"==t.namespace&&"setvalue"!=t.type){var a=t.handler;t.handler=function(e){return this.readOnly||this.disabled?void e.preventDefault:a.apply(this,arguments)}}})})}function z(t){function a(t){if(void 0==e.valHooks[t]||1!=e.valHooks[t].inputmaskpatch){var a=e.valHooks[t]&&e.valHooks[t].get?e.valHooks[t].get:function(e){return e.value},i=e.valHooks[t]&&e.valHooks[t].set?e.valHooks[t].set:function(e,t){return e.value=t,e};e.valHooks[t]={get:function(t){var i=e(t);if(i.data("_inputmask")){if(i.data("_inputmask").opts.autoUnmask)return i.inputmask("unmaskedvalue");var r=a(t),n=i.data("_inputmask"),o=n.maskset,s=o._buffer;return s=s?s.join(""):"",r!=s?r:""}return a(t)},set:function(t,a){var r,n=e(t),o=n.data("_inputmask");return o?(r=i(t,e.isFunction(o.opts.onBeforeMask)?o.opts.onBeforeMask.call(mt,a,o.opts)||a:a),n.triggerHandler("setvalue.inputmask")):r=i(t,a),r},inputmaskpatch:!0}}}function i(){var t=e(this),a=e(this).data("_inputmask");return a?a.opts.autoUnmask?t.inputmask("unmaskedvalue"):s.call(this)!=P().join("")?s.call(this):"":s.call(this)}function r(t){var a=e(this).data("_inputmask");a?(l.call(this,e.isFunction(a.opts.onBeforeMask)?a.opts.onBeforeMask.call(mt,t,a.opts)||t:t),e(this).triggerHandler("setvalue.inputmask")):l.call(this,t)}function o(t){e(t).bind("mouseenter.inputmask",function(){var t=e(this),a=this,i=a._valueGet();""!=i&&i!=_().join("")&&(l.call(this,e.isFunction(n.onBeforeMask)?n.onBeforeMask.call(mt,i,n)||i:i),t.trigger("setvalue"))});var a=e._data(t).events,i=a.mouseover;if(i){for(var r=i[i.length-1],o=i.length-1;o>0;o--)i[o]=i[o-1];i[0]=r}}var s,l;t._valueGet||(Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(t,"value"),document.__lookupGetter__&&t.__lookupGetter__("value")?(s=t.__lookupGetter__("value"),l=t.__lookupSetter__("value"),t.__defineGetter__("value",i),t.__defineSetter__("value",r)):(s=function(){return t.value},l=function(e){t.value=e},a(t.type),o(t)),t._valueGet=function(){return nt?s.call(this).split("").reverse().join(""):s.call(this)},t._valueSet=function(e){l.call(this,nt?e.split("").reverse().join(""):e)})}function Q(t,a,i){function r(){if(n.keepStatic){m(!0);var e,a=[];for(e=v();e>=0;e--)if(f().validPositions[e]){if(void 0!=f().validPositions[e].alternation)break;a.push(f().validPositions[e].input),delete f().validPositions[e]}if(e>0)for(;a.length>0;)f().p=M(v()),W.call(t,void 0,!0,a.pop().charCodeAt(0),!1,!1,f().p)}}if((n.numericInput||nt)&&(a==e.inputmask.keyCode.BACKSPACE?a=e.inputmask.keyCode.DELETE:a==e.inputmask.keyCode.DELETE&&(a=e.inputmask.keyCode.BACKSPACE),nt)){var o=i.end;i.end=i.begin,i.begin=o}a==e.inputmask.keyCode.BACKSPACE&&i.end-i.begin<=1?i.begin=O(i.begin):a==e.inputmask.keyCode.DELETE&&i.begin==i.end&&i.end++,g(i.begin,i.end),r();var s=v(i.begin);s<i.begin?(-1==s&&m(),f().p=M(s)):f().p=i.begin}function $(e,t,a){if(t&&t.refreshFromBuffer){var i=t.refreshFromBuffer;S(i===!0?i:i.start,i.end,t.buffer),m(!0),void 0!=a&&(F(e,_()),B(e,t.caret||a.begin,t.caret||a.end))}}function Y(a){ot=!1;var i=this,r=e(i),o=a.keyCode,l=B(i);o==e.inputmask.keyCode.BACKSPACE||o==e.inputmask.keyCode.DELETE||s&&127==o||a.ctrlKey&&88==o&&!t("cut")?(a.preventDefault(),88==o&&(at=_().join("")),Q(i,o,l),F(i,_(),f().p),i._valueGet()==P().join("")&&r.trigger("cleared"),n.showTooltip&&r.prop("title",f().mask)):o==e.inputmask.keyCode.END||o==e.inputmask.keyCode.PAGE_DOWN?setTimeout(function(){var e=M(v());n.insertMode||e!=C()||a.shiftKey||e--,B(i,a.shiftKey?l.begin:e,e)},0):o==e.inputmask.keyCode.HOME&&!a.shiftKey||o==e.inputmask.keyCode.PAGE_UP?B(i,0,a.shiftKey?l.begin:0):o==e.inputmask.keyCode.ESCAPE||90==o&&a.ctrlKey?(D(i,!0,!1,at.split("")),r.click()):o!=e.inputmask.keyCode.INSERT||a.shiftKey||a.ctrlKey?0!=n.insertMode||a.shiftKey||(o==e.inputmask.keyCode.RIGHT?setTimeout(function(){var e=B(i);B(i,e.begin)},0):o==e.inputmask.keyCode.LEFT&&setTimeout(function(){var e=B(i);B(i,nt?e.begin+1:e.begin-1)},0)):(n.insertMode=!n.insertMode,B(i,n.insertMode||l.begin!=C()?l.begin:l.begin-1));var u=B(i),c=n.onKeyDown.call(this,a,_(),u.begin,n);$(i,c,u),lt=-1!=e.inArray(o,n.ignorables)}function W(t,a,i,r,o,s){if(void 0==i&&ot)return!1;ot=!0;var l=this,u=e(l);t=t||window.event;var i=a?i:t.which||t.charCode||t.keyCode;if(!(a===!0||t.ctrlKey&&t.altKey)&&(t.ctrlKey||t.metaKey||lt))return!0;if(i){a!==!0&&46==i&&0==t.shiftKey&&","==n.radixPoint&&(i=44);var c,d=a?{begin:s,end:s}:B(l),p=String.fromCharCode(i),v=U(d.begin,d.end);v&&(f().undoPositions=e.extend(!0,{},f().validPositions),Q(l,e.inputmask.keyCode.DELETE,d),n.insertMode||(n.insertMode=!n.insertMode,h(d.begin,o),n.insertMode=!n.insertMode),v=!n.multi),f().writeOutBuffer=!0;var g=nt&&!v?d.end:d.begin,y=E(g,p,o);if(y!==!1){if(y!==!0&&(g=void 0!=y.pos?y.pos:g,p=void 0!=y.c?y.c:p),m(!0),void 0!=y.caret)c=y.caret;else{var k=f().validPositions;c=!n.keepStatic&&(void 0!=k[g+1]&&b(g+1,k[g].locator.slice(),g).length>1||void 0!=k[g].alternation)?g+1:M(g)}f().p=c}if(r!==!1){var x=this;if(setTimeout(function(){n.onKeyValidation.call(x,y,n)},0),f().writeOutBuffer&&y!==!1){var P=_();F(l,P,a?void 0:n.numericInput?O(c):c),a!==!0&&setTimeout(function(){L(P)===!0&&u.trigger("complete"),st=!0,u.trigger("input")},0)}else v&&(f().buffer=void 0,f().validPositions=f().undoPositions)}else v&&(f().buffer=void 0,f().validPositions=f().undoPositions);if(n.showTooltip&&u.prop("title",f().mask),t&&t.preventDefault(),a){var S=n.onKeyPress.call(this,t,_(),c,n);S&&S.refreshFromBuffer&&($(l,S),S.caret&&(f().p=S.caret))}else{var w=B(l);$(l,n.onKeyPress.call(this,t,_(),w.begin,n),w)}}}function V(t){var a=(e(this),this),i=(t.keyCode,_()),r=B(a),o=n.onKeyUp.call(this,t,i,r.begin,n);$(a,o,r)}function Z(t){if(st===!0&&"input"==t.type)return st=!1,!0;var a=this,i=e(a),r=a._valueGet(),o=B(a);if("propertychange"==t.type&&a._valueGet().length<=C())return!0;"paste"==t.type&&(window.clipboardData&&window.clipboardData.getData?r=r.substr(0,o.begin)+window.clipboardData.getData("Text")+r.substr(o.end,r.length):t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.getData&&(r=r.substr(0,o.begin)+t.originalEvent.clipboardData.getData("text/plain")+r.substr(o.end,r.length)));var s=e.isFunction(n.onBeforePaste)?n.onBeforePaste.call(a,r,n)||r:r;return D(a,!0,!1,nt?s.split("").reverse():s.split("")),i.click(),L(_())===!0&&i.trigger("complete"),!1}function J(t){if(st===!0&&"input"==t.type)return st=!1,!0;var a=this,i=B(a),r=a._valueGet();r=r.replace(new RegExp("("+T(P().join(""))+")*"),""),i.begin>r.length&&(B(a,r.length),i=B(a)),_().length-r.length!=1||r.charAt(i.begin)==_()[i.begin]||r.charAt(i.begin+1)==_()[i.begin]||R(i.begin)||(t.keyCode=e.inputmask.keyCode.BACKSPACE,Y.call(a,t)),t.preventDefault()}function X(t){if(st===!0&&"input"==t.type)return st=!1,!0;var a=this;D(a,!1,!1);var i=f().p;F(a,_(),n.numericInput?O(i):i),L(_())===!0&&e(a).trigger("complete"),t.preventDefault()}function et(t){st=!0;var a=this;return setTimeout(function(){B(a,B(a).begin-1);var i=e.Event("keypress");i.which=t.originalEvent.data.charCodeAt(0),ot=!1,lt=!1,W.call(a,i,void 0,void 0,!1);var r=f().p;F(a,_(),n.numericInput?O(r):r)},0),!1}function tt(t){if(it=e(t),it.is(":input")&&a(it.attr("type"))){if(it.data("_inputmask",{maskset:r,opts:n,isRTL:!1}),n.showTooltip&&it.prop("title",f().mask),("rtl"==t.dir||n.rightAlign)&&it.css("text-align","right"),"rtl"==t.dir||n.numericInput){t.dir="ltr",it.removeAttr("dir");var i=it.data("_inputmask");i.isRTL=!0,it.data("_inputmask",i),nt=!0}it.unbind(".inputmask"),it.closest("form").bind("submit",function(){at!=_().join("")&&it.change(),it[0]._valueGet&&it[0]._valueGet()==P().join("")&&it[0]._valueSet(""),n.removeMaskOnSubmit&&it.inputmask("remove")}).bind("reset",function(){setTimeout(function(){it.trigger("setvalue")},0)}),it.bind("mouseenter.inputmask",function(){var t=e(this),a=this;!t.is(":focus")&&n.showMaskOnHover&&a._valueGet()!=_().join("")&&F(a,_())}).bind("blur.inputmask",function(){var t=e(this),a=this;if(t.data("_inputmask")){var i=a._valueGet(),r=_().slice();if(ut=!0,at!=r.join("")&&(t.change(),at=r.join("")),""!=i){if(n.clearMaskOnLostFocus&&(i==P().join("")?r=[]:H(r)),L(r)===!1&&(t.trigger("incomplete"),n.clearIncomplete&&(m(),r=n.clearMaskOnLostFocus?[]:P().slice())),e.isFunction(n.postProcessOnBlur)){var o=n.postProcessOnBlur.call(a,r,n);o&&($(a,o),r=_())}F(a,r)}}}).bind("focus.inputmask",function(){var t=(e(this),this),a=t._valueGet();n.showMaskOnFocus&&(!n.showMaskOnHover||n.showMaskOnHover&&""==a)&&t._valueGet()!=_().join("")&&F(t,_(),M(v())),at=_().join("")}).bind("mouseleave.inputmask",function(){var t=e(this),a=this;if(n.clearMaskOnLostFocus){var i=_().slice(),r=a._valueGet();t.is(":focus")||r==t.attr("placeholder")||""==r||(r==P().join("")?i=[]:H(i),F(a,i))}}).bind("click.inputmask",function(){var t=e(this),a=this;if(t.is(":focus")){var i=B(a);if(i.begin==i.end)if(n.radixFocus&&""!=n.radixPoint&&-1!=e.inArray(n.radixPoint,_())&&(ut||_().join("")==P().join("")))B(a,e.inArray(n.radixPoint,_())),ut=!1;else{var r=nt?K(i.begin):i.begin,o=M(v(r));o>r?B(a,R(r)?r:M(r)):B(a,o)}}}).bind("dblclick.inputmask",function(){var e=this;setTimeout(function(){B(e,0,M(v()))},0)}).bind(p+".inputmask dragdrop.inputmask drop.inputmask",Z).bind("setvalue.inputmask",function(){var e=this;D(e,!0,!1),at=_().join(""),(n.clearMaskOnLostFocus||n.clearIncomplete)&&e._valueGet()==P().join("")&&e._valueSet("")}).bind("cut.inputmask",function(t){st=!0;var a=this,i=e(a),r=B(a);Q(a,e.inputmask.keyCode.DELETE,r);var o=n.onKeyPress.call(this,t,_(),f().p,n);$(a,o,{begin:f().p,end:f().p}),a._valueGet()==P().join("")&&i.trigger("cleared"),n.showTooltip&&i.prop("title",f().mask)}).bind("complete.inputmask",n.oncomplete).bind("incomplete.inputmask",n.onincomplete).bind("cleared.inputmask",n.oncleared),it.bind("keydown.inputmask",Y).bind("keypress.inputmask",W).bind("keyup.inputmask",V).bind("compositionupdate.inputmask",et),"paste"===p&&it.bind("input.inputmask",X),(l||c||u||d)&&(it.unbind("input.inputmask"),it.bind("input.inputmask",J)),z(t);var o=e.isFunction(n.onBeforeMask)?n.onBeforeMask.call(t,t._valueGet(),n)||t._valueGet():t._valueGet();D(t,!0,!1,o.split(""));var s=_().slice();at=s.join("");var h;try{h=document.activeElement}catch(g){}L(s)===!1&&n.clearIncomplete&&m(),n.clearMaskOnLostFocus&&(s.join("")==P().join("")?s=[]:H(s)),F(t,s),h===t&&B(t,M(v())),q(t)}}var at,it,rt,nt=!1,ot=!1,st=!1,lt=!1,ut=!0;if(void 0!=i)switch(i.action){case"isComplete":return it=e(i.el),r=it.data("_inputmask").maskset,n=it.data("_inputmask").opts,L(i.buffer);case"unmaskedvalue":return it=i.$input,r=it.data("_inputmask").maskset,n=it.data("_inputmask").opts,nt=i.$input.data("_inputmask").isRTL,I(i.$input);case"mask":at=_().join(""),tt(i.el);break;case"format":it=e({}),it.data("_inputmask",{maskset:r,opts:n,isRTL:n.numericInput}),n.numericInput&&(nt=!0);var ct=(e.isFunction(n.onBeforeMask)?n.onBeforeMask.call(it,i.value,n)||i.value:i.value).split("");return D(it,!1,!1,nt?ct.reverse():ct),n.onKeyPress.call(this,void 0,_(),0,n),i.metadata?{value:nt?_().slice().reverse().join(""):_().join(""),metadata:it.inputmask("getmetadata")}:nt?_().slice().reverse().join(""):_().join("");case"isValid":it=e({}),it.data("_inputmask",{maskset:r,opts:n,isRTL:n.numericInput}),n.numericInput&&(nt=!0);var ct=i.value.split("");D(it,!1,!0,nt?ct.reverse():ct);for(var dt=_(),pt=N(),ft=dt.length-1;ft>pt&&!R(ft);ft--);return dt.splice(pt,ft+1-pt),L(dt)&&i.value==dt.join("");case"getemptymask":return it=e(i.el),r=it.data("_inputmask").maskset,n=it.data("_inputmask").opts,P();case"remove":var mt=i.el;it=e(mt),r=it.data("_inputmask").maskset,n=it.data("_inputmask").opts,mt._valueSet(I(it)),it.unbind(".inputmask"),it.removeData("_inputmask");var vt;Object.getOwnPropertyDescriptor&&(vt=Object.getOwnPropertyDescriptor(mt,"value")),vt&&vt.get?mt._valueGet&&Object.defineProperty(mt,"value",{get:mt._valueGet,set:mt._valueSet}):document.__lookupGetter__&&mt.__lookupGetter__("value")&&mt._valueGet&&(mt.__defineGetter__("value",mt._valueGet),mt.__defineSetter__("value",mt._valueSet));try{delete mt._valueGet,delete mt._valueSet}catch(ht){mt._valueGet=void 0,mt._valueSet=void 0}break;case"getmetadata":if(it=e(i.el),r=it.data("_inputmask").maskset,n=it.data("_inputmask").opts,e.isArray(r.metadata)){for(var gt,yt=v(),kt=yt;kt>=0;kt--)if(f().validPositions[kt]&&void 0!=f().validPositions[kt].alternation){gt=f().validPositions[kt].alternation;break}return void 0!=gt?r.metadata[f().validPositions[yt].locator[gt]]:r.metadata[0]}return r.metadata}}if(void 0===e.fn.inputmask){var o=navigator.userAgent,s=null!==o.match(new RegExp("iphone","i")),l=null!==o.match(new RegExp("android.*safari.*","i")),u=null!==o.match(new RegExp("android.*chrome.*","i")),c=null!==o.match(new RegExp("android.*firefox.*","i")),d=/Kindle/i.test(o)||/Silk/i.test(o)||/KFTT/i.test(o)||/KFOT/i.test(o)||/KFJWA/i.test(o)||/KFJWI/i.test(o)||/KFSOWI/i.test(o)||/KFTHWA/i.test(o)||/KFTHWI/i.test(o)||/KFAPWA/i.test(o)||/KFAPWI/i.test(o),p=t("paste")?"paste":t("input")?"input":"propertychange";e.inputmask={defaults:{placeholder:"_",optionalmarker:{start:"[",end:"]"},quantifiermarker:{start:"{",end:"}"},groupmarker:{start:"(",end:")"},alternatormarker:"|",escapeChar:"\\\\",mask:null,oncomplete:e.noop,onincomplete:e.noop,oncleared:e.noop,repeat:0,greedy:!0,autoUnmask:!1,removeMaskOnSubmit:!1,clearMaskOnLostFocus:!0,insertMode:!0,clearIncomplete:!1,aliases:{},alias:null,onKeyUp:e.noop,onKeyPress:e.noop,onKeyDown:e.noop,onBeforeMask:void 0,onBeforePaste:void 0,onUnMask:void 0,showMaskOnFocus:!0,showMaskOnHover:!0,onKeyValidation:e.noop,skipOptionalPartCharacter:" ",showTooltip:!1,numericInput:!1,rightAlign:!1,radixPoint:"",radixFocus:!1,nojumps:!1,nojumpsThreshold:0,keepStatic:void 0,definitions:{9:{validator:"[0-9]",cardinality:1,definitionSymbol:"*"},a:{validator:"[A-Za-zА-яЁёÀ-ÿµ]",cardinality:1,definitionSymbol:"*"},"*":{validator:"[0-9A-Za-zА-яЁёÀ-ÿµ]",cardinality:1}},ignorables:[8,9,13,19,27,33,34,35,36,37,38,39,40,45,46,93,112,113,114,115,116,117,118,119,120,121,122,123],isComplete:void 0,postProcessOnBlur:void 0},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91},masksCache:{},escapeRegex:function(e){var t=["/",".","*","+","?","|","(",")","[","]","{","}","\\\\"];return e.replace(new RegExp("(\\\\"+t.join("|\\\\")+")","gim"),"\\\\$1")},format:function(t,a,o){var s=e.extend(!0,{},e.inputmask.defaults,a);return i(s.alias,a,s),n({action:"format",value:t,metadata:o},r(s),s)},isValid:function(t,a){var o=e.extend(!0,{},e.inputmask.defaults,a);return i(o.alias,a,o),n({action:"isValid",value:t},r(o),o)}},e.fn.inputmask=function(t,a,o,s,l){function u(t,a,r){var n=e(t);n.data("inputmask-alias")&&i(n.data("inputmask-alias"),{},a);for(var o in a){var s=n.data("inputmask-"+o.toLowerCase());void 0!=s&&("mask"==o&&0==s.indexOf("[")?(a[o]=s.replace(/[\\s[\\]]/g,"").split("\',\'"),a[o][0]=a[o][0].replace("\'",""),a[o][a[o].length-1]=a[o][a[o].length-1].replace("\'","")):a[o]="boolean"==typeof s?s:s.toString(),r&&(r[o]=a[o]))\n}return a}o=o||n,s=s||"_inputmask";var c,d=e.extend(!0,{},e.inputmask.defaults,a);if("string"==typeof t)switch(t){case"mask":return i(d.alias,a,d),c=r(d,o!==n),void 0==c?this:this.each(function(){o({action:"mask",el:this},e.extend(!0,{},c),u(this,d))});case"unmaskedvalue":var p=e(this);return p.data(s)?o({action:"unmaskedvalue",$input:p}):p.val();case"remove":return this.each(function(){var t=e(this);t.data(s)&&o({action:"remove",el:this})});case"getemptymask":return this.data(s)?o({action:"getemptymask",el:this}):"";case"hasMaskedValue":return this.data(s)?!this.data(s).opts.autoUnmask:!1;case"isComplete":return this.data(s)?o({action:"isComplete",buffer:this[0]._valueGet().split(""),el:this}):!0;case"getmetadata":return this.data(s)?o({action:"getmetadata",el:this}):void 0;case"_detectScope":return i(d.alias,a,d),void 0==l||i(l,a,d)||-1!=e.inArray(l,["mask","unmaskedvalue","remove","getemptymask","hasMaskedValue","isComplete","getmetadata","_detectScope"])||(d.mask=l),e.isFunction(d.mask)&&(d.mask=d.mask.call(this,d)),e.isArray(d.mask);default:return i(d.alias,a,d),i(t,a,d)||(d.mask=t),c=r(d,o!==n),void 0==c?this:this.each(function(){o({action:"mask",el:this},e.extend(!0,{},c),u(this,d))})}else{if("object"==typeof t)return d=e.extend(!0,{},e.inputmask.defaults,t),i(d.alias,t,d),c=r(d,o!==n),void 0==c?this:this.each(function(){o({action:"mask",el:this},e.extend(!0,{},c),u(this,d))});if(void 0==t)return this.each(function(){var t=e(this).attr("data-inputmask");if(t&&""!=t)try{t=t.replace(new RegExp("\'","g"),\'"\');var r=e.parseJSON("{"+t+"}");e.extend(!0,r,a),d=e.extend(!0,{},e.inputmask.defaults,r),d=u(this,d),i(d.alias,r,d),d.alias=void 0,e(this).inputmask("mask",d,o)}catch(n){}if(e(this).attr("data-inputmask-mask")||e(this).attr("data-inputmask-alias")){d=e.extend(!0,{},e.inputmask.defaults,{});var s={};d=u(this,d,s),i(d.alias,s,d),d.alias=void 0,e(this).inputmask("mask",d,o)}})}}}return e.fn.inputmask}(jQuery),function(e){return e.extend(e.inputmask.defaults.definitions,{h:{validator:"[01][0-9]|2[0-3]",cardinality:2,prevalidator:[{validator:"[0-2]",cardinality:1}]},s:{validator:"[0-5][0-9]",cardinality:2,prevalidator:[{validator:"[0-5]",cardinality:1}]},d:{validator:"0[1-9]|[12][0-9]|3[01]",cardinality:2,prevalidator:[{validator:"[0-3]",cardinality:1}]},m:{validator:"0[1-9]|1[012]",cardinality:2,prevalidator:[{validator:"[01]",cardinality:1}]},y:{validator:"(19|20)\\\\d{2}",cardinality:4,prevalidator:[{validator:"[12]",cardinality:1},{validator:"(19|20)",cardinality:2},{validator:"(19|20)\\\\d",cardinality:3}]}}),e.extend(e.inputmask.defaults.aliases,{"dd/mm/yyyy":{mask:"1/2/y",placeholder:"dd/mm/yyyy",regex:{val1pre:new RegExp("[0-3]"),val1:new RegExp("0[1-9]|[12][0-9]|3[01]"),val2pre:function(t){var a=e.inputmask.escapeRegex.call(this,t);return new RegExp("((0[1-9]|[12][0-9]|3[01])"+a+"[01])")},val2:function(t){var a=e.inputmask.escapeRegex.call(this,t);return new RegExp("((0[1-9]|[12][0-9])"+a+"(0[1-9]|1[012]))|(30"+a+"(0[13-9]|1[012]))|(31"+a+"(0[13578]|1[02]))")}},leapday:"29/02/",separator:"/",yearrange:{minyear:1900,maxyear:2099},isInYearRange:function(e,t,a){if(isNaN(e))return!1;var i=parseInt(e.concat(t.toString().slice(e.length))),r=parseInt(e.concat(a.toString().slice(e.length)));return(isNaN(i)?!1:i>=t&&a>=i)||(isNaN(r)?!1:r>=t&&a>=r)},determinebaseyear:function(e,t,a){var i=(new Date).getFullYear();if(e>i)return e;if(i>t){for(var r=t.toString().slice(0,2),n=t.toString().slice(2,4);r+a>t;)r--;var o=r+n;return e>o?e:o}return i},onKeyUp:function(t){var a=e(this);if(t.ctrlKey&&t.keyCode==e.inputmask.keyCode.RIGHT){var i=new Date;a.val(i.getDate().toString()+(i.getMonth()+1).toString()+i.getFullYear().toString())}},getFrontValue:function(e,t,a){for(var i=0,r=0,n=0;n<e.length&&"2"!=e[n];n++){var o=a.definitions[e[n]];o?(i+=r,r=o.cardinality):r++}return t.join("").substr(i,r)},definitions:{1:{validator:function(e,t,a,i,r){var n=r.regex.val1.test(e);return i||n||e.charAt(1)!=r.separator&&-1=="-./".indexOf(e.charAt(1))||!(n=r.regex.val1.test("0"+e.charAt(0)))?n:(t.buffer[a-1]="0",{refreshFromBuffer:{start:a-1,end:a},pos:a,c:e.charAt(0)})},cardinality:2,prevalidator:[{validator:function(e,t,a,i,r){isNaN(t.buffer[a+1])||(e+=t.buffer[a+1]);var n=1==e.length?r.regex.val1pre.test(e):r.regex.val1.test(e);return i||n||!(n=r.regex.val1.test("0"+e))?n:(t.buffer[a]="0",a++,{pos:a})},cardinality:1}]},2:{validator:function(e,t,a,i,r){var n=r.getFrontValue(t.mask,t.buffer,r);-1!=n.indexOf(r.placeholder[0])&&(n="01"+r.separator);var o=r.regex.val2(r.separator).test(n+e);if(!i&&!o&&(e.charAt(1)==r.separator||-1!="-./".indexOf(e.charAt(1)))&&(o=r.regex.val2(r.separator).test(n+"0"+e.charAt(0))))return t.buffer[a-1]="0",{refreshFromBuffer:{start:a-1,end:a},pos:a,c:e.charAt(0)};if(r.mask.indexOf("2")==r.mask.length-1&&o){var s=t.buffer.join("").substr(4,4)+e;if(s!=r.leapday)return!0;var l=parseInt(t.buffer.join("").substr(0,4),10);return l%4===0?l%100===0?l%400===0?!0:!1:!0:!1}return o},cardinality:2,prevalidator:[{validator:function(e,t,a,i,r){isNaN(t.buffer[a+1])||(e+=t.buffer[a+1]);var n=r.getFrontValue(t.mask,t.buffer,r);-1!=n.indexOf(r.placeholder[0])&&(n="01"+r.separator);var o=1==e.length?r.regex.val2pre(r.separator).test(n+e):r.regex.val2(r.separator).test(n+e);return i||o||!(o=r.regex.val2(r.separator).test(n+"0"+e))?o:(t.buffer[a]="0",a++,{pos:a})},cardinality:1}]},y:{validator:function(e,t,a,i,r){if(r.isInYearRange(e,r.yearrange.minyear,r.yearrange.maxyear)){var n=t.buffer.join("").substr(0,6);if(n!=r.leapday)return!0;var o=parseInt(e,10);return o%4===0?o%100===0?o%400===0?!0:!1:!0:!1}return!1},cardinality:4,prevalidator:[{validator:function(e,t,a,i,r){var n=r.isInYearRange(e,r.yearrange.minyear,r.yearrange.maxyear);if(!i&&!n){var o=r.determinebaseyear(r.yearrange.minyear,r.yearrange.maxyear,e+"0").toString().slice(0,1);if(n=r.isInYearRange(o+e,r.yearrange.minyear,r.yearrange.maxyear))return t.buffer[a++]=o.charAt(0),{pos:a};if(o=r.determinebaseyear(r.yearrange.minyear,r.yearrange.maxyear,e+"0").toString().slice(0,2),n=r.isInYearRange(o+e,r.yearrange.minyear,r.yearrange.maxyear))return t.buffer[a++]=o.charAt(0),t.buffer[a++]=o.charAt(1),{pos:a}}return n},cardinality:1},{validator:function(e,t,a,i,r){var n=r.isInYearRange(e,r.yearrange.minyear,r.yearrange.maxyear);if(!i&&!n){var o=r.determinebaseyear(r.yearrange.minyear,r.yearrange.maxyear,e).toString().slice(0,2);if(n=r.isInYearRange(e[0]+o[1]+e[1],r.yearrange.minyear,r.yearrange.maxyear))return t.buffer[a++]=o.charAt(1),{pos:a};if(o=r.determinebaseyear(r.yearrange.minyear,r.yearrange.maxyear,e).toString().slice(0,2),r.isInYearRange(o+e,r.yearrange.minyear,r.yearrange.maxyear)){var s=t.buffer.join("").substr(0,6);if(s!=r.leapday)n=!0;else{var l=parseInt(e,10);n=l%4===0?l%100===0?l%400===0?!0:!1:!0:!1}}else n=!1;if(n)return t.buffer[a-1]=o.charAt(0),t.buffer[a++]=o.charAt(1),t.buffer[a++]=e.charAt(0),{refreshFromBuffer:{start:a-3,end:a},pos:a}}return n},cardinality:2},{validator:function(e,t,a,i,r){return r.isInYearRange(e,r.yearrange.minyear,r.yearrange.maxyear)},cardinality:3}]}},insertMode:!1,autoUnmask:!1},"mm/dd/yyyy":{placeholder:"mm/dd/yyyy",alias:"dd/mm/yyyy",regex:{val2pre:function(t){var a=e.inputmask.escapeRegex.call(this,t);return new RegExp("((0[13-9]|1[012])"+a+"[0-3])|(02"+a+"[0-2])")},val2:function(t){var a=e.inputmask.escapeRegex.call(this,t);return new RegExp("((0[1-9]|1[012])"+a+"(0[1-9]|[12][0-9]))|((0[13-9]|1[012])"+a+"30)|((0[13578]|1[02])"+a+"31)")},val1pre:new RegExp("[01]"),val1:new RegExp("0[1-9]|1[012]")},leapday:"02/29/",onKeyUp:function(t){var a=e(this);if(t.ctrlKey&&t.keyCode==e.inputmask.keyCode.RIGHT){var i=new Date;a.val((i.getMonth()+1).toString()+i.getDate().toString()+i.getFullYear().toString())}}},"yyyy/mm/dd":{mask:"y/1/2",placeholder:"yyyy/mm/dd",alias:"mm/dd/yyyy",leapday:"/02/29",onKeyUp:function(t){var a=e(this);if(t.ctrlKey&&t.keyCode==e.inputmask.keyCode.RIGHT){var i=new Date;a.val(i.getFullYear().toString()+(i.getMonth()+1).toString()+i.getDate().toString())}}},"dd.mm.yyyy":{mask:"1.2.y",placeholder:"dd.mm.yyyy",leapday:"29.02.",separator:".",alias:"dd/mm/yyyy"},"dd-mm-yyyy":{mask:"1-2-y",placeholder:"dd-mm-yyyy",leapday:"29-02-",separator:"-",alias:"dd/mm/yyyy"},"mm.dd.yyyy":{mask:"1.2.y",placeholder:"mm.dd.yyyy",leapday:"02.29.",separator:".",alias:"mm/dd/yyyy"},"mm-dd-yyyy":{mask:"1-2-y",placeholder:"mm-dd-yyyy",leapday:"02-29-",separator:"-",alias:"mm/dd/yyyy"},"yyyy.mm.dd":{mask:"y.1.2",placeholder:"yyyy.mm.dd",leapday:".02.29",separator:".",alias:"yyyy/mm/dd"},"yyyy-mm-dd":{mask:"y-1-2",placeholder:"yyyy-mm-dd",leapday:"-02-29",separator:"-",alias:"yyyy/mm/dd"},datetime:{mask:"1/2/y h:s",placeholder:"dd/mm/yyyy hh:mm",alias:"dd/mm/yyyy",regex:{hrspre:new RegExp("[012]"),hrs24:new RegExp("2[0-4]|1[3-9]"),hrs:new RegExp("[01][0-9]|2[0-4]"),ampm:new RegExp("^[a|p|A|P][m|M]"),mspre:new RegExp("[0-5]"),ms:new RegExp("[0-5][0-9]")},timeseparator:":",hourFormat:"24",definitions:{h:{validator:function(e,t,a,i,r){if("24"==r.hourFormat&&24==parseInt(e,10))return t.buffer[a-1]="0",t.buffer[a]="0",{refreshFromBuffer:{start:a-1,end:a},c:"0"};var n=r.regex.hrs.test(e);if(!i&&!n&&(e.charAt(1)==r.timeseparator||-1!="-.:".indexOf(e.charAt(1)))&&(n=r.regex.hrs.test("0"+e.charAt(0))))return t.buffer[a-1]="0",t.buffer[a]=e.charAt(0),a++,{refreshFromBuffer:{start:a-2,end:a},pos:a,c:r.timeseparator};if(n&&"24"!==r.hourFormat&&r.regex.hrs24.test(e)){var o=parseInt(e,10);return 24==o?(t.buffer[a+5]="a",t.buffer[a+6]="m"):(t.buffer[a+5]="p",t.buffer[a+6]="m"),o-=12,10>o?(t.buffer[a]=o.toString(),t.buffer[a-1]="0"):(t.buffer[a]=o.toString().charAt(1),t.buffer[a-1]=o.toString().charAt(0)),{refreshFromBuffer:{start:a-1,end:a+6},c:t.buffer[a]}}return n},cardinality:2,prevalidator:[{validator:function(e,t,a,i,r){var n=r.regex.hrspre.test(e);return i||n||!(n=r.regex.hrs.test("0"+e))?n:(t.buffer[a]="0",a++,{pos:a})},cardinality:1}]},s:{validator:"[0-5][0-9]",cardinality:2,prevalidator:[{validator:function(e,t,a,i,r){var n=r.regex.mspre.test(e);return i||n||!(n=r.regex.ms.test("0"+e))?n:(t.buffer[a]="0",a++,{pos:a})},cardinality:1}]},t:{validator:function(e,t,a,i,r){return r.regex.ampm.test(e+"m")},casing:"lower",cardinality:1}},insertMode:!1,autoUnmask:!1},datetime12:{mask:"1/2/y h:s t\\\\m",placeholder:"dd/mm/yyyy hh:mm xm",alias:"datetime",hourFormat:"12"},"hh:mm t":{mask:"h:s t\\\\m",placeholder:"hh:mm xm",alias:"datetime",hourFormat:"12"},"h:s t":{mask:"h:s t\\\\m",placeholder:"hh:mm xm",alias:"datetime",hourFormat:"12"},"hh:mm:ss":{mask:"h:s:s",placeholder:"hh:mm:ss",alias:"datetime",autoUnmask:!1},"hh:mm":{mask:"h:s",placeholder:"hh:mm",alias:"datetime",autoUnmask:!1},date:{alias:"dd/mm/yyyy"},"mm/yyyy":{mask:"1/y",placeholder:"mm/yyyy",leapday:"donotuse",separator:"/",alias:"mm/dd/yyyy"}}),e.fn.inputmask}(jQuery),function(e){return e.extend(e.inputmask.defaults.definitions,{A:{validator:"[A-Za-zА-яЁёÀ-ÿµ]",cardinality:1,casing:"upper"},"#":{validator:"[0-9A-Za-zА-яЁёÀ-ÿµ]",cardinality:1,casing:"upper"}}),e.extend(e.inputmask.defaults.aliases,{url:{mask:"ir",placeholder:"",separator:"",defaultPrefix:"http://",regex:{urlpre1:new RegExp("[fh]"),urlpre2:new RegExp("(ft|ht)"),urlpre3:new RegExp("(ftp|htt)"),urlpre4:new RegExp("(ftp:|http|ftps)"),urlpre5:new RegExp("(ftp:/|ftps:|http:|https)"),urlpre6:new RegExp("(ftp://|ftps:/|http:/|https:)"),urlpre7:new RegExp("(ftp://|ftps://|http://|https:/)"),urlpre8:new RegExp("(ftp://|ftps://|http://|https://)")},definitions:{i:{validator:function(){return!0},cardinality:8,prevalidator:function(){for(var e=[],t=8,a=0;t>a;a++)e[a]=function(){var e=a;return{validator:function(t,a,i,r,n){if(n.regex["urlpre"+(e+1)]){var o,s=t;e+1-t.length>0&&(s=a.buffer.join("").substring(0,e+1-t.length)+""+s);var l=n.regex["urlpre"+(e+1)].test(s);if(!r&&!l){for(i-=e,o=0;o<n.defaultPrefix.length;o++)a.buffer[i]=n.defaultPrefix[o],i++;for(o=0;o<s.length-1;o++)a.buffer[i]=s[o],i++;return{pos:i}}return l}return!1},cardinality:e}}();return e}()},r:{validator:".",cardinality:50}},insertMode:!1,autoUnmask:!1},ip:{mask:"i[i[i]].i[i[i]].i[i[i]].i[i[i]]",definitions:{i:{validator:function(e,t,a){return a-1>-1&&"."!=t.buffer[a-1]?(e=t.buffer[a-1]+e,e=a-2>-1&&"."!=t.buffer[a-2]?t.buffer[a-2]+e:"0"+e):e="00"+e,new RegExp("25[0-5]|2[0-4][0-9]|[01][0-9][0-9]").test(e)},cardinality:1}}},email:{mask:"*{1,64}[.*{1,64}][.*{1,64}][.*{1,64}]@*{1,64}[.*{2,64}][.*{2,6}][.*{1,2}]",greedy:!1,onBeforePaste:function(e){return e=e.toLowerCase(),e.replace("mailto:","")},definitions:{"*":{validator:"[0-9A-Za-z!#$%&\'*+/=?^_`{|}~-]",cardinality:1,casing:"lower"}}}}),e.fn.inputmask}(jQuery),function(e){return e.extend(e.inputmask.defaults.aliases,{numeric:{mask:function(e){function t(t){for(var a="",i=0;i<t.length;i++)a+=e.definitions[t[i]]?"\\\\"+t[i]:t[i];return a}if(0!==e.repeat&&isNaN(e.integerDigits)&&(e.integerDigits=e.repeat),e.repeat=0,e.groupSeparator==e.radixPoint&&(e.groupSeparator="."==e.radixPoint?",":","==e.radixPoint?".":"")," "===e.groupSeparator&&(e.skipOptionalPartCharacter=void 0),e.autoGroup=e.autoGroup&&""!=e.groupSeparator,e.autoGroup&&("string"==typeof e.groupSize&&isFinite(e.groupSize)&&(e.groupSize=parseInt(e.groupSize)),isFinite(e.integerDigits))){var a=Math.floor(e.integerDigits/e.groupSize),i=e.integerDigits%e.groupSize;e.integerDigits=parseInt(e.integerDigits)+(0==i?a-1:a)}e.definitions[";"]=e.definitions["~"];var r=t(e.prefix);return r+="[+]",r+="~{1,"+e.integerDigits+"}",void 0!=e.digits&&(isNaN(e.digits)||parseInt(e.digits)>0)&&(r+=e.digitsOptional?"["+(e.decimalProtect?":":e.radixPoint)+";{"+e.digits+"}]":(e.decimalProtect?":":e.radixPoint)+";{"+e.digits+"}"),r+=t(e.suffix)},placeholder:"",greedy:!1,digits:"*",digitsOptional:!0,groupSeparator:"",radixPoint:".",radixFocus:!0,groupSize:3,autoGroup:!1,allowPlus:!0,allowMinus:!0,integerDigits:"+",prefix:"",suffix:"",rightAlign:!0,decimalProtect:!0,postFormat:function(t,a,i,r){var n=!1,o=t[a];if(""==r.groupSeparator||-1!=e.inArray(r.radixPoint,t)&&a>=e.inArray(r.radixPoint,t)||new RegExp("[-+]").test(o))return{pos:a};var s=t.slice();o==r.groupSeparator&&(s.splice(a--,1),o=s[a]),i?s[a]="?":s.splice(a,0,"?");var l=s.join("");if(l.length>0&&r.autoGroup||i&&-1!=l.indexOf(r.groupSeparator)){var u=e.inputmask.escapeRegex.call(this,r.groupSeparator);n=0==l.indexOf(r.groupSeparator),l=l.replace(new RegExp(u,"g"),"");var c=l.split(r.radixPoint);if(l=""==r.radixPoint?l:c[0],l!=r.prefix+"?0"&&l.length>=r.groupSize+r.prefix.length){n=!0;for(var d=new RegExp("([-+]?[\\\\d?]+)([\\\\d?]{"+r.groupSize+"})");d.test(l);)l=l.replace(d,"$1"+r.groupSeparator+"$2"),l=l.replace(r.groupSeparator+r.groupSeparator,r.groupSeparator)}""!=r.radixPoint&&c.length>1&&(l+=r.radixPoint+c[1])}t.length=l.length;for(var p=0,f=l.length;f>p;p++)t[p]=l.charAt(p);var m=e.inArray("?",t);return i?t[m]=o:t.splice(m,1),{pos:m,refreshFromBuffer:n}},onKeyDown:function(t,a,i,r){if(r.autoGroup&&(t.keyCode==e.inputmask.keyCode.DELETE||t.keyCode==e.inputmask.keyCode.BACKSPACE)){var n=r.postFormat(a,i-1,!0,r);return n.caret=n.pos+1,n}},onKeyPress:function(e,t,a,i){if(i.autoGroup){var r=i.postFormat(t,a-1,!0,i);return r.caret=r.pos+1,r}},postProcessOnBlur:function(t,a){var i=""!=a.radixPoint?t.join("").split(a.radixPoint):[t.join("")],r=i[0].match(a.regex.integerPart(a)),n=2==i.length?i[1].match(a.regex.integerNPart(a)):void 0;r&&"-0"==r[r.index]&&(void 0==n||n[n.index].match(/^0+$/))&&t.splice(0,1);var o=e.inArray(a.radixPoint,t);if(-1!=o&&isFinite(a.digits)&&!a.digitsOptional){for(var s=1;s<=a.digits;s++)(void 0==t[o+s]||t[o+s]==a.placeholder.charAt(0))&&(t[o+s]="0");return{refreshFromBuffer:!0,buffer:t}}},regex:{integerPart:function(){return new RegExp("[-+]?\\\\d+")},integerNPart:function(){return new RegExp("\\\\d+")}},signHandler:function(e,t,a,i,r){if(!i&&(r.allowMinus&&"-"===e||r.allowPlus&&"+"===e)){var n=t.buffer.join("").match(r.regex.integerPart(r));if(n&&n[n.index].length>0&&("0"!==n[n.index]||t.buffer&&t._buffer&&t.buffer.join("")!=t._buffer.join("")))return t.buffer[n.index]==("-"===e?"+":"-")?{pos:n.index,c:e,remove:n.index,caret:a}:t.buffer[n.index]==("-"===e?"-":"+")?{remove:n.index,caret:a-1}:{pos:n.index,c:e,caret:a+1}}return!1},radixHandler:function(t,a,i,r,n){if(!r&&t===n.radixPoint&&n.digits>0){var o=e.inArray(n.radixPoint,a.buffer),s=a.buffer.join("").match(n.regex.integerPart(n));if(-1!=o&&a.validPositions[o])return a.validPositions[o-1]?{caret:o+1}:{pos:s.index,c:s[0],caret:o+1};if(!s||"0"==s[0]&&s.index+1!=i)return a.buffer[s?s.index:i]="0",{pos:(s?s.index:i)+1}}return!1},leadingZeroHandler:function(t,a,i,r,n){var o=a.buffer.join("").match(n.regex.integerNPart(n)),s=e.inArray(n.radixPoint,a.buffer);if(o&&!r&&(-1==s||o.index<s))if("0"==o[0]&&i>=n.prefix.length){if(-1==s||s>=i&&void 0==a.validPositions[s])return a.buffer.splice(o.index,1),i=i>o.index?i-1:o.index,{pos:i,remove:o.index};if(i>o.index&&s>=i)return a.buffer.splice(o.index,1),i=i>o.index?i-1:o.index,{pos:i,remove:o.index};if(void 0==a.validPositions[s])return a.buffer[i]=t,{refreshFromBuffer:!0}}else if("0"==t&&i<=o.index)return!1;return!0},definitions:{"~":{validator:function(t,a,i,r,n){var o=n.signHandler(t,a,i,r,n);if(!o&&(o=n.radixHandler(t,a,i,r,n),!o&&(o=r?new RegExp("[0-9"+e.inputmask.escapeRegex.call(this,n.groupSeparator)+"]").test(t):new RegExp("[0-9]").test(t),o===!0&&(o=n.leadingZeroHandler(t,a,i,r,n),o===!0)))){var s=e.inArray(n.radixPoint,a.buffer);o=n.digitsOptional===!1&&i>s&&!r?{pos:i,remove:i}:{pos:i}}return o},cardinality:1,prevalidator:null},"+":{validator:function(e,t,a,i,r){var n=r.signHandler(e,t,a,i,r);return n||(n=r.allowMinus&&"-"==e||r.allowPlus&&"+"==e),n},cardinality:1,prevalidator:null,placeholder:""},":":{validator:function(t,a,i,r,n){var o=n.signHandler(t,a,i,r,n);if(!o){var s="["+e.inputmask.escapeRegex.call(this,n.radixPoint)+"]";o=new RegExp(s).test(t),o&&a.validPositions[i]&&a.validPositions[i].match.placeholder==n.radixPoint&&(o={caret:i+1})}return o},cardinality:1,prevalidator:null,placeholder:function(e){return e.radixPoint}}},insertMode:!0,autoUnmask:!1,onUnMask:function(t,a,i){var r=t.replace(i.prefix,"");return r=r.replace(i.suffix,""),r=r.replace(new RegExp(e.inputmask.escapeRegex.call(this,i.groupSeparator),"g"),"")},isComplete:function(t,a){var i=t.join(""),r=t.slice();if(a.postFormat(r,0,!0,a),r.join("")!=i)return!1;var n=i.replace(a.prefix,"");return n=n.replace(a.suffix,""),n=n.replace(new RegExp(e.inputmask.escapeRegex.call(this,a.groupSeparator),"g"),""),n=n.replace(e.inputmask.escapeRegex.call(this,a.radixPoint),"."),isFinite(n)},onBeforeMask:function(t,a){if(""!=a.radixPoint&&isFinite(t))t=t.toString().replace(".",a.radixPoint);else{var i=t.match(/,/g),r=t.match(/\\./g);r&&i?r.length>i.length?(t=t.replace(/\\./g,""),t=t.replace(",",a.radixPoint)):i.length>r.length?(t=t.replace(/,/g,""),t=t.replace(".",a.radixPoint)):t=t.indexOf(".")<t.indexOf(",")?t.replace(/\\./g,""):t=t.replace(/,/g,""):t=t.replace(new RegExp(e.inputmask.escapeRegex.call(this,a.groupSeparator),"g"),"")}return 0==a.digits&&(-1!=t.indexOf(".")?t=t.substring(0,t.indexOf(".")):-1!=t.indexOf(",")&&(t=t.substring(0,t.indexOf(",")))),t}},currency:{prefix:"$ ",groupSeparator:",",alias:"numeric",placeholder:"0",autoGroup:!0,digits:2,digitsOptional:!1,clearMaskOnLostFocus:!1},decimal:{alias:"numeric"},integer:{alias:"numeric",digits:"0",radixPoint:""}}),e.fn.inputmask}(jQuery),function(e){return e.extend(e.inputmask.defaults.aliases,{phone:{url:"phone-codes/phone-codes.js",maskInit:"+pp(pp)pppppppp",countrycode:"",mask:function(t){t.definitions={p:{validator:function(){return!1},cardinality:1},"#":{validator:"[0-9]",cardinality:1}};var a=[];return e.ajax({url:t.url,async:!1,dataType:"json",success:function(e){a=e},error:function(e,a,i){alert(i+" - "+t.url)}}),a=a.sort(function(e,t){return(e.mask||e)<(t.mask||t)?-1:1}),""!=t.countrycode&&(t.maskInit="+"+t.countrycode+t.maskInit.substring(3)),a.splice(0,0,t.maskInit),a},nojumps:!0,nojumpsThreshold:1,onBeforeMask:function(e,t){var a=e.replace(/^0/g,"");return(a.indexOf(t.countrycode)>1||-1==a.indexOf(t.countrycode))&&(a=t.countrycode+a),a}},phonebe:{alias:"phone",url:"phone-codes/phone-be.js",countrycode:"32",nojumpsThreshold:4}}),e.fn.inputmask}(jQuery),function(e){return e.extend(e.inputmask.defaults.aliases,{Regex:{mask:"r",greedy:!1,repeat:"*",regex:null,regexTokens:null,tokenizer:/\\[\\^?]?(?:[^\\\\\\]]+|\\\\[\\S\\s]?)*]?|\\\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9][0-9]*|x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4}|c[A-Za-z]|[\\S\\s]?)|\\((?:\\?[:=!]?)?|(?:[?*+]|\\{[0-9]+(?:,[0-9]*)?\\})\\??|[^.?*+^${[()|\\\\]+|./g,quantifierFilter:/[0-9]+[^,]/,isComplete:function(e,t){return new RegExp(t.regex).test(e.join(""))},definitions:{r:{validator:function(t,a,i,r,n){function o(e,t){this.matches=[],this.isGroup=e||!1,this.isQuantifier=t||!1,this.quantifier={min:1,max:1},this.repeaterPart=void 0}function s(){var e,t,a=new o,i=[];for(n.regexTokens=[];e=n.tokenizer.exec(n.regex);)switch(t=e[0],t.charAt(0)){case"(":i.push(new o(!0));break;case")":var r=i.pop();i.length>0?i[i.length-1].matches.push(r):a.matches.push(r);break;case"{":case"+":case"*":var s=new o(!1,!0);t=t.replace(/[{}]/g,"");var l=t.split(","),u=isNaN(l[0])?l[0]:parseInt(l[0]),c=1==l.length?u:isNaN(l[1])?l[1]:parseInt(l[1]);if(s.quantifier={min:u,max:c},i.length>0){var d=i[i.length-1].matches;if(e=d.pop(),!e.isGroup){var r=new o(!0);r.matches.push(e),e=r}d.push(e),d.push(s)}else{if(e=a.matches.pop(),!e.isGroup){var r=new o(!0);r.matches.push(e),e=r}a.matches.push(e),a.matches.push(s)}break;default:i.length>0?i[i.length-1].matches.push(t):a.matches.push(t)}a.matches.length>0&&n.regexTokens.push(a)}function l(t,a){var i=!1;a&&(c+="(",p++);for(var r=0;r<t.matches.length;r++){var n=t.matches[r];if(1==n.isGroup)i=l(n,!0);else if(1==n.isQuantifier){var o=e.inArray(n,t.matches),s=t.matches[o-1],u=c;if(isNaN(n.quantifier.max)){for(;n.repeaterPart&&n.repeaterPart!=c&&n.repeaterPart.length>c.length&&!(i=l(s,!0)););i=i||l(s,!0),i&&(n.repeaterPart=c),c=u+n.quantifier.max}else{for(var d=0,m=n.quantifier.max-1;m>d&&!(i=l(s,!0));d++);c=u+"{"+n.quantifier.min+","+n.quantifier.max+"}"}}else if(void 0!=n.matches)for(var v=0;v<n.length&&!(i=l(n[v],a));v++);else{var h;if("["==n.charAt(0)){h=c,h+=n;for(var g=0;p>g;g++)h+=")";var y=new RegExp("^("+h+")$");i=y.test(f)}else for(var k=0,x=n.length;x>k;k++)if("\\\\"!=n.charAt(k)){h=c,h+=n.substr(0,k+1),h=h.replace(/\\|$/,"");for(var g=0;p>g;g++)h+=")";var y=new RegExp("^("+h+")$");if(i=y.test(f))break}c+=n}if(i)break}return a&&(c+=")",p--),i}null==n.regexTokens&&s();var u=a.buffer.slice(),c="",d=!1,p=0;u.splice(i,0,t);for(var f=u.join(""),m=0;m<n.regexTokens.length;m++){var o=n.regexTokens[m];if(d=l(o,o.isGroup))break}return d},cardinality:1}}}}),e.fn.inputmask}(jQuery);',{address:"js/plugins/jquery.inputmask/dist/jquery.inputmask.bundle",metadata:{deps:[],format:"global"}});

/*module/profile/select2Options*/
define("module/profile/select2Options",[],function(){"use strict";var t={width:"280px",minimumInputLength:3,matcher:function(){},val:function(){return"value"},initSelection:function(t,e){e({id:$(t).val(),text:$(t).val()})},ajax:{url:"/profile/cities",type:"post",dataType:"json",quietMillis:300,data:function(t){return{term:t.trim()}},results:function(t){return{results:t}}},createSearchChoice:function(t,e){return 0===$(e).filter(function(){return 0===this.text.localeCompare(t)}).length?{id:t,text:t.trim()}:void 0},placeholder:"Город проживания",formatSearching:"Поиск...",formatNoMatches:"За вашим запросом ничего не найдено",formatInputTooShort:function(t,e){var n=e-t.length;return"Пожалуйста, введите еще "+n+" символ"+(1==n?"":"а")+" города"}};return{get default(){return t},__esModule:!0}});
/*module/profile/select3Options*/
define("module/profile/select3Options",[],function(){"use strict";var t={width:"280px",minimumInputLength:3,data:[{id:"Россия",text:"Россия"},{id:"США",text:"США"},{id:"Украина",text:"Украина"}],createSearchChoice:function(t,e){return t=t.trim(),0===$(e).filter(function(){return 0===this.text.localeCompare(t)}).length?{id:t,text:t}:void 0},matcher:function(t,e){return t=t.trim(),e=e.trim(),e.toUpperCase().indexOf(t.toUpperCase())>=0},placeholder:"Город проживания",formatSearching:"Поиск...",formatNoMatches:"За вашим запросом ничего не найдено",formatInputTooShort:function(t,e){var r=e-t.length;return"Пожалуйста, введите еще "+r+" символ"+(1==r?"":"а")+" города"}};return{get default(){return t},__esModule:!0}});
/*module/profile/views/index.mustache!js/plugins/CanJS/view/mustache/system*/
define("module/profile/views/index.mustache!js/plugins/CanJS/view/mustache/system",["can/view/mustache/mustache"],function(s){return s.view.preloadStringRenderer("module/profile/views/index.mustache",s.Mustache(function(t,e){var n=[];return n.push('<div class="content adorable_table">\n	<div class="adorable_cell">\n		<div class="header">\n			<div class="breadcrumbs">\n				<a href="/">\n					Главная\n				</a>\n				<span>\n					&nbsp; / &nbsp;\n					<a href="/profile" class="bradName">\n						'),n.push(s.view.txt(1,"a",0,this,s.Mustache.txt({scope:t,options:e},null,{get:"user.profile.first_name"}))),n.push('\n					</a>\n				</span>\n				<span>\n					&nbsp; / &nbsp;\n					<a href="/profile">\n						Настройки\n					</a>\n				</span>\n			</div>\n			<h1 class="titlePage">\n				Настройки профиля\n			</h1>\n		</div>\n		<div class="user_profile">\n			<div class="profileFilling">\n				<div class="title">\n					Профиль заполнен на '),n.push(s.view.txt(1,"div",0,this,s.Mustache.txt({scope:t,options:e},null,{get:"user.profile.filling"}))),n.push('%\n				</div>\n				<div class="bar">\n					<div class="progress progress-'),n.push(s.view.txt(!0,"div","class",this,s.Mustache.txt({scope:t,options:e},null,{get:"user.profile.filling"}))),n.push('" '),n.push(s.view.txt(2,"div","style",this,function(){var n=[];return n.push('style="'),n.push("width: "),n.push(s.view.toStr(s.Mustache.txt({scope:t,options:e,special:!0},null,{get:"user.profile.filling"})())),n.push('%"'),n.join("")})),n.push("",s.view.pending({scope:t,options:e}),">"),n.push('\n					</div>\n				</div>\n			</div>\n			<div class="userMeta">\n				<div class="userPic">\n					<div class="pic">\n						<img '),n.push(s.view.txt(2,"img","src",this,function(){var n=[];return n.push('src="'),n.push(s.view.toStr(s.Mustache.txt({scope:t,options:e,special:!0},null,{get:"getProfileImage"},"large",{get:"user.image"})())),n.push('"'),n.join("")})),n.push(' alt=""',s.view.pending({scope:t,options:e}),">"),n.push('\n					</div>\n					<div class="buttons horizontal">\n						<div class="upload button" '),n.push(s.view.txt(1,"div",1,this,s.Mustache.txt({scope:t,options:e},null,{get:"uploader"},"profile"))),n.push("",s.view.pending({scope:t,options:e}),">"),n.push(' Загрузить</div>\n						<div class="remove button">Удалить</div>\n					</div>\n				</div>\n				<div class="moneybox">\n					<div class="userLevel">\n						<div class="textLevel">\n							<div class="text">\n								<div class="level">'),n.push(s.view.txt(1,"div",0,this,s.Mustache.txt({scope:t,options:e},null,{get:"userLevelNum"},{get:"user.points"}))),n.push('й Уровень</div>\n								<div class="mamaLevel">Мама '),n.push(s.view.txt(1,"div",0,this,s.Mustache.txt({scope:t,options:e},null,{get:"userLevelText"},{get:"user.points"}))),n.push('</div>\n							</div>\n							\n							<div class="stars">'),n.push("\n"),n.push(s.view.txt(0,"div",0,this,s.Mustache.txt({scope:t,options:e},"#",{get:"each"},{get:"levels"},[{fn:function(t,e){var n=[];return n.push('									<div class="star '),n.push(s.view.txt(!0,"div","class",this,s.Mustache.txt({scope:t,options:e},null,{get:"name"}))),n.push(" "),n.push(s.view.txt(!0,"div","class",this,s.Mustache.txt({scope:t,options:e},null,{get:"isFilledStart"},{get:"."},{get:"user.points"}))),n.push('"',s.view.pending({scope:t,options:e}),">"),n.push("</div>"),n.push("\n"),n.join("")}}]))),n.push('							</div>\n						</div>\n						<div class="pointsLeft">\n							'),n.push(s.view.txt(1,"div",0,this,s.Mustache.txt({scope:t,options:e},null,{get:"leftNext"},{get:"user.points"}))),n.push('\n						</div>\n						<div class="bar">'),n.push("\n"),n.push(s.view.txt(0,"div",0,this,s.Mustache.txt({scope:t,options:e},"#",{get:"each"},{get:"levelKeys"},[{fn:function(t,e){var n=[];return n.push('								<div class="icon '),n.push(s.view.txt(!0,"div","class",this,s.Mustache.txt({scope:t,options:e},null,{get:"isFilled"},{get:"."},{get:"user.points"}))),n.push('"',s.view.pending({scope:t,options:e}),">"),n.push('\n									<div class="adorable_table">\n										<div class="adorable_cell">\n											<div class="partial" '),n.push(s.view.txt(2,"div","style",this,function(){var n=[];return n.push("style='"),n.push("width: "),n.push(s.view.toStr(s.Mustache.txt({scope:t,options:e,special:!0},null,{get:"diff"},{get:"@index"},{get:"user.points"})())),n.push("%;'"),n.join("")})),n.push("",s.view.pending({scope:t,options:e}),">"),n.push("</div>\n										</div>\n									</div>\n								</div>"),n.push("\n"),n.join("")}}]))),n.push('						</div>\n						<div class="levelIcon '),n.push(s.view.txt(!0,"div","class",this,s.Mustache.txt({scope:t,options:e},null,{get:"levelPrefix"},{get:"user.points"}))),n.push('" '),n.push(s.view.txt(2,"div","style",this,function(){var n=[];return n.push('style="'),n.push("background: url(/img/user/moneybox/"),n.push(s.view.toStr(s.Mustache.txt({scope:t,options:e,special:!0},null,{get:"levelPrefix"},{get:"user.points"})())),n.push('_achieve.png)"'),n.join("")})),n.push("",s.view.pending({scope:t,options:e}),">"),n.push('\n							\n						</div>\n					</div>\n				</div>\n			</div>\n			<div class="profileHead">\n				<div class="headWrap">\n					<h3 class="inner_title">Информация о Ваших детках</h3>\n					<div class="question_bubble tooltip agushaTooltip" title="Сколько у вас деток, как их зовут, сколько им лет? Расскажите нам больше о своих малышах, а мы подберем для вас по-настоящему полезную и интересную информацию!">?</div>\n				</div>\n			</div>\n			<div class="childBlock">'),n.push("\n"),n.push(s.view.txt(0,"div",0,this,s.Mustache.txt({scope:t,options:e},"#",{get:"each"},{get:"user.children"},[{fn:function(t,e){var n=[];return n.push('					<div class="childItem">\n						<div class="childPic" data-id="'),n.push(s.view.txt(!0,"div","data-id",this,s.Mustache.txt({scope:t,options:e},null,{get:"_id"}))),n.push('" "'),n.push(s.view.txt(!0,"div","null",this,function(){return s.proxy(function(t){s.data(s.$(t),"children",this.attr("."))},t)})),n.push('"',s.view.pending({scope:t,options:e}),">"),n.push("\n							<img "),n.push(s.view.txt(2,"img","src",this,function(){var n=[];return n.push('src="'),n.push(s.view.toStr(s.Mustache.txt({scope:t,options:e,special:!0},null,{get:"showChildImage"},{get:"image.large"},{get:"gender"})())),n.push('"'),n.join("")})),n.push(' alt=""',s.view.pending({scope:t,options:e}),">"),n.push('\n						</div>\n						<div class="childInfo">\n							<div class="childName">\n								'),n.push(s.view.txt(1,"div",0,this,s.Mustache.txt({scope:t,options:e},null,{get:"name"}))),n.push("\n							</div>\n						</div>\n					</div>"),n.push("\n"),n.join("")}}]))),n.push('				<div class="addChild">\n					<div class="button rounded"></div>\n					<div class="text">\n						<div>Добавить</div>\n						<div>Детеныша</div>\n					</div>\n				</div>\n			</div>\n			<div class="profileHead">\n				<div class="headWrap">\n					<h3 class="inner_title">Личные данные</h3>\n					<div class="question_bubble tooltip agushaTooltip" title="Давайте знакомиться! Расскажите нам о себе подробнее и станьте частью нашего сообщества для современных мам и пап «Агуша».">?</div>\n				</div>\n			</div>\n			<div class="profileInfo">\n				<div class="userInputs">\n					<div class="column left">\n						<div class="inner">\n							<div class="input_row">\n								<input type="text" placeholder="Имя" name="profile.first_name" value="'),n.push(s.view.txt(!0,"input","value",this,s.Mustache.txt({scope:t,options:e},null,{get:"user.profile.first_name"}))),n.push('" ',s.view.pending({scope:t,options:e}),">"),n.push('\n							</div>\n						</div>\n					</div>\n					<div class="column right">\n						<div class="inner">\n							<div class="input_row">\n								<input type="text" placeholder="Фамилия" name="profile.last_name" value="'),n.push(s.view.txt(!0,"input","value",this,s.Mustache.txt({scope:t,options:e},null,{get:"user.profile.last_name"}))),n.push('" ',s.view.pending({scope:t,options:e}),">"),n.push('\n							</div>\n						</div>\n					</div>\n					<div class="column left">\n						<div class="inner">\n							<div class="input_row">\n								<input type="text" placeholder="Отчество" name="profile.middle_name" value="'),n.push(s.view.txt(!0,"input","value",this,s.Mustache.txt({scope:t,options:e},null,{get:"user.profile.middle_name"}))),n.push('" ',s.view.pending({scope:t,options:e}),">"),n.push('\n							</div>\n						</div>\n						<div class="inner">\n							<div class="input_row user_birth_date birth_date">\n								<div class="customSelect customDay inactive" data-target="customDay">\n									<p class="content"><span class="value">'),n.push(s.view.txt(0,"span",0,this,s.Mustache.txt({scope:t,options:e},"#",{get:"if"},{get:"user.birth_date.day"},[{fn:function(t,e){var n=[];return n.push(s.view.txt(1,"span",0,this,s.Mustache.txt({scope:t,options:e},null,{get:"user.birth_date.day"}))),n.join("")}},{inverse:function(){var s=[];return s.push("День"),s.join("")}}]))),n.push('</span> <span class="triangleDown">▾</span></p>\n									<div class="customSelectList">'),n.push("\n"),n.push(s.view.txt(0,"div",0,this,s.Mustache.txt({scope:t,options:e},"#",{get:"each"},{get:"dates.days"},[{fn:function(t,e){var n=[];return n.push('											<p class="customSelectListItem" data-value="'),n.push(s.view.txt(!0,"p","data-value",this,s.Mustache.txt({scope:t,options:e},null,{get:"."}))),n.push('"',s.view.pending({scope:t,options:e}),">"),n.push(s.view.txt(1,"p",0,this,s.Mustache.txt({scope:t,options:e},null,{get:"."}))),n.push("</p>"),n.push("\n"),n.join("")}}]))),n.push('									</div>\n								</div>\n                                <div class="customSelect customMonth inactive" data-target="customMonth">\n                                    <p class="content"><span class="value">'),n.push(s.view.txt(0,"span",0,this,s.Mustache.txt({scope:t,options:e},"#",{get:"if"},{get:"user.birth_date.month"},[{fn:function(t,e){var n=[];return n.push(s.view.txt(1,"span",0,this,s.Mustache.txt({scope:t,options:e},null,{get:"getUserMonth"},{get:"user.birth_date.month"}))),n.join("")}},{inverse:function(){var s=[];return s.push("Мес."),s.join("")}}]))),n.push('</span> <span class="triangleDown">▾</span></p>\n                                    <div class="customSelectList">'),n.push("\n"),n.push(s.view.txt(0,"div",0,this,s.Mustache.txt({scope:t,options:e},"#",{get:"each"},{get:"dates.months"},[{fn:function(t,e){var n=[];return n.push('                                            <p class="customSelectListItem" data-value="'),n.push(s.view.txt(!0,"p","data-value",this,s.Mustache.txt({scope:t,options:e},null,{get:"@index"}))),n.push('"',s.view.pending({scope:t,options:e}),">"),n.push(s.view.txt(1,"p",0,this,s.Mustache.txt({scope:t,options:e},null,{get:"."}))),n.push("</p>"),n.push("\n"),n.join("")}}]))),n.push('                                    </div>\n                                </div>\n                                <div class="customSelect customYear inactive" data-target="customYear">\n                                    <p class="content"><span class="value">'),n.push(s.view.txt(0,"span",0,this,s.Mustache.txt({scope:t,options:e},"#",{get:"if"},{get:"user.birth_date.year"},[{fn:function(t,e){var n=[];return n.push(s.view.txt(1,"span",0,this,s.Mustache.txt({scope:t,options:e},null,{get:"user.birth_date.year"}))),n.join("")}},{inverse:function(){var s=[];return s.push("Год."),s.join("")}}]))),n.push('</span> <span class="triangleDown">▾</span></p>\n                                    <div class="customSelectList">'),n.push("\n"),n.push(s.view.txt(0,"div",0,this,s.Mustache.txt({scope:t,options:e},"#",{get:"each"},{get:"dates.years"},[{fn:function(t,e){var n=[];return n.push('                                            <p class="customSelectListItem" data-value="'),n.push(s.view.txt(!0,"p","data-value",this,s.Mustache.txt({scope:t,options:e},null,{get:"."}))),n.push('"',s.view.pending({scope:t,options:e}),">"),n.push(s.view.txt(1,"p",0,this,s.Mustache.txt({scope:t,options:e},null,{get:"."}))),n.push("</p>"),n.push("\n"),n.join("")}}]))),n.push('                                    </div>\n                                </div>\n								<div class="clearfix"></div>\n								<div '),n.push(s.view.txt(2,"div","style",this,function(){var s=[];return s.push('style="'),s.push('display: none"'),s.join("")})),n.push('>\n                                    <select name="birth_date[day]" class="birth_day customDay">\n                                        <option disabled="disabled" selected',s.view.pending({scope:t,options:e}),">"),n.push("День</option>"),n.push("\n"),n.push(s.view.txt(0,"select",0,this,s.Mustache.txt({scope:t,options:e},"#",{get:"each"},{get:"dates.days"},[{fn:function(t,e){var n=[];return n.push('                                            <option value="'),n.push(s.view.txt(!0,"option","value",this,s.Mustache.txt({scope:t,options:e},null,{get:"."}))),n.push('"',s.view.pending({scope:t,options:e}),">"),n.push(s.view.txt(1,"option",0,this,s.Mustache.txt({scope:t,options:e},null,{get:"."}))),n.push("</option>"),n.push("\n"),n.join("")}}]))),n.push('                                    </select>\n                                    <select name="birth_date[month]" class="birth_month customMonth">\n                                        <option disabled="disabled" selected',s.view.pending({scope:t,options:e}),">"),n.push("Мес.</option>"),n.push("\n"),n.push(s.view.txt(0,"select",0,this,s.Mustache.txt({scope:t,options:e},"#",{get:"each"},{get:"dates.months"},[{fn:function(t,e){var n=[];return n.push("                                            <option value="),n.push(s.view.txt(1,"option",1,this,s.Mustache.txt({scope:t,options:e},null,{get:"@index"}))),n.push("",s.view.pending({scope:t,options:e}),">"),n.push(s.view.txt(1,"option",0,this,s.Mustache.txt({scope:t,options:e},null,{get:"."}))),n.push("</option>"),n.push("\n"),n.join("")}}]))),n.push('                                    </select>\n                                    <select  name="birth_date[year]" class="birth_year customYear">\n                                        <option disabled="disabled" selected',s.view.pending({scope:t,options:e}),">"),n.push("Год</option>"),n.push("\n"),n.push(s.view.txt(0,"select",0,this,s.Mustache.txt({scope:t,options:e},"#",{get:"each"},{get:"dates.years"},[{fn:function(t,e){var n=[];return n.push('                                            <option value="'),n.push(s.view.txt(!0,"option","value",this,s.Mustache.txt({scope:t,options:e},null,{get:"."}))),n.push('"',s.view.pending({scope:t,options:e}),">"),n.push(s.view.txt(1,"option",0,this,s.Mustache.txt({scope:t,options:e},null,{get:"."}))),n.push("</option>"),n.push("\n"),n.join("")}}]))),n.push('                                    </select>\n								</div>\n							</div>\n						</div>\n					</div>\n					<div class="column right">\n						<div class="inner">\n							<div class="input_row">\n								<input class="editableInput" value="1" id="female" name="profile.gender" '),n.push(s.view.txt(0,"input",1,this,s.Mustache.txt({scope:t,options:e},"#",{get:"is"},{get:"user.profile.gender"},1,[{fn:function(){var s=[];return s.push("checked"),s.join("")}}]))),n.push(' type="radio" ',s.view.pending({scope:t,options:e}),">"),n.push('\n								<label for="female">\n									Женщина\n								</label>\n								<input class="editableInput" value="2" id="male" name="profile.gender" '),n.push(s.view.txt(0,"input",1,this,s.Mustache.txt({scope:t,options:e},"#",{get:"is"},{get:"user.profile.gender"},1,[{fn:function(){var s=[];return s.push("checked"),s.join("")}}]))),n.push('  type="radio" ',s.view.pending({scope:t,options:e}),">"),n.push('\n								<label for="male">\n									Мужчина\n								</label>\n							</div>\n						</div>\n					</div>\n				</div>\n				<div class="socialInfo">\n					<div class="socialText">Синхронизировать с профилем в соцсети</div>\n					<div class="social_buttons buttons horizontal">\n						<div class="button fb '),n.push(s.view.txt(!0,"div","class",this,s.Mustache.txt({scope:t,options:e},"#",{get:"if"},{get:"user.social.fb.id"},[{fn:function(){var s=[];return s.push("active"),s.join("")}}]))),n.push('"',s.view.pending({scope:t,options:e}),">"),n.push('</div>\n						<div class="button vk '),n.push(s.view.txt(!0,"div","class",this,s.Mustache.txt({scope:t,options:e},"#",{get:"if"},{get:"user.social.vk.id"},[{fn:function(){var s=[];return s.push("active"),s.join("")}}]))),n.push('"',s.view.pending({scope:t,options:e}),">"),n.push('</div>\n						<div class="button ok '),n.push(s.view.txt(!0,"div","class",this,s.Mustache.txt({scope:t,options:e},"#",{get:"if"},{get:"user.social.ok.id"},[{fn:function(){var s=[];return s.push("active"),s.join("")}}]))),n.push('"',s.view.pending({scope:t,options:e}),">"),n.push('</div>\n					</div>\n				</div>\n			</div>\n			<div class="profileHead">\n				<div class="headWrap">\n					<h3 class="inner_title">\n						Контактные данные\n					</h3>\n					<div class="question_bubble tooltip agushaTooltip" title="Пожалуйста, укажите свои контактные данные максимально точно. Когда вы выиграете в каком-то из наших розыгрышей, мы сможем без проблем связаться с вами по телефону и отправить подарок на указанный адрес.">?</div>\n				</div>\n			</div>\n			<div class="profileInfo passwordInfo">\n				<div class="userInputs" '),n.push(s.view.txt(2,"div","style",this,function(){var s=[];return s.push('style="'),s.push('margin-top: 0px;"'),s.join("")})),n.push('>\n					<div class="column left">\n						<div class="inner">\n							<div class="input_row">\n								<input class="editableInput" placeholder="Город" value="'),n.push(s.view.txt(!0,"input","value",this,s.Mustache.txt({scope:t,options:e},null,{get:"user.contacts.city"}))),n.push('" id="city" can-value="user.contacts.city" type="text" ',s.view.pending({scope:t,options:e}),">"),n.push('\n							</div>\n							<div class="input_row">\n                                <div class="customSelect customInput customCountry inactive" data-target="customCountry" id="country">\n                                    <p class="content"><span class="value">'),n.push(s.view.txt(0,"span",0,this,s.Mustache.txt({scope:t,options:e},"#",{get:"if"},{get:"user.contacts.country"},[{fn:function(t,e){var n=[];return n.push(s.view.txt(1,"span",0,this,s.Mustache.txt({scope:t,options:e},null,{get:"user.contacts.country"}))),n.join("")}},{inverse:function(){var s=[];return s.push("Страна"),s.join("")}}]))),n.push('</span> <span class="triangleDown">▾</span></p>\n                                    <div class="customSelectList">'),n.push("\n"),n.push(s.view.txt(0,"div",0,this,s.Mustache.txt({scope:t,options:e},"#",{get:"each"},{get:"countries"},[{fn:function(t,e){var n=[];return n.push('                                            <p class="customSelectListItem" data-value="'),n.push(s.view.txt(!0,"p","data-value",this,s.Mustache.txt({scope:t,options:e},null,{get:"."}))),n.push('"',s.view.pending({scope:t,options:e}),">"),n.push(s.view.txt(1,"p",0,this,s.Mustache.txt({scope:t,options:e},null,{get:"."}))),n.push("</p>"),n.push("\n"),n.join("")}}]))),n.push("                                    </div>\n                                </div>\n								<div "),n.push(s.view.txt(2,"div","style",this,function(){var s=[];return s.push('style="'),s.push('display: none"'),s.join("")})),n.push('>\n                                    <input can-value="user.contacts.country" class="editableInput customCountry" placeholder="Страна" value="'),n.push(s.view.txt(!0,"input","value",this,s.Mustache.txt({scope:t,options:e},null,{get:"user.contacts.country"}))),n.push('"  type="text"',s.view.pending({scope:t,options:e}),">"),n.push('\n								</div>\n							</div>\n							<div class="input_row">\n								<input class="editableInput" placeholder="Улица" value="'),n.push(s.view.txt(!0,"input","value",this,s.Mustache.txt({scope:t,options:e},null,{get:"user.contacts.street"}))),n.push('" can-value="user.contacts.street" type="text" ',s.view.pending({scope:t,options:e}),">"),n.push('\n							</div>\n							<div class="input_row address">\n								<input class="editableInput" placeholder="Дом" value="'),n.push(s.view.txt(!0,"input","value",this,s.Mustache.txt({scope:t,options:e},null,{get:"user.contacts.houseNum"}))),n.push('" can-value="user.contacts.houseNum" type="text" ',s.view.pending({scope:t,options:e}),">"),n.push('\n								<input class="editableInput" placeholder="Квартира" value="'),n.push(s.view.txt(!0,"input","value",this,s.Mustache.txt({scope:t,options:e},null,{get:"user.contacts.apartament"}))),n.push('" can-value="user.contacts.apartament" type="text" ',s.view.pending({scope:t,options:e}),">"),n.push('\n							</div>\n							\n						</div>\n					</div>\n					<div class="column right">\n						<div class="inner">\n							<div class="input_row">\n								<input class="editableInput" placeholder="Почтовый индекс" value="'),n.push(s.view.txt(!0,"input","value",this,s.Mustache.txt({scope:t,options:e},null,{get:"user.contacts.postIndex"}))),n.push('" can-value="user.contacts.postIndex" type="text" ',s.view.pending({scope:t,options:e}),">"),n.push('\n							</div>\n							<div class="input_row">\n								<input class="editableInput phoneInput" placeholder="Телефон" value="'),n.push(s.view.txt(!0,"input","value",this,s.Mustache.txt({scope:t,options:e},null,{get:"user.contacts.phone"}))),n.push('" can-value="user.contacts.phone" type="text" ',s.view.pending({scope:t,options:e}),">"),n.push('\n							</div>\n							<div class="input_row">\n								<input class="editableInput" '),n.push(s.view.txt(1,"input",1,this,s.Mustache.txt({scope:t,options:e},null,{get:"tooltip"},{get:"user.errors"},"email","right"))),n.push(' placeholder="E-mail" value="'),n.push(s.view.txt(!0,"input","value",this,s.Mustache.txt({scope:t,options:e},null,{get:"user.email"}))),n.push('" can-value="user.email" type="text"',s.view.pending({scope:t,options:e}),">"),n.push('\n							</div>\n							<div class="input_row">\n								<input class="editableInput spareEmail" '),n.push(s.view.txt(1,"input",1,this,s.Mustache.txt({scope:t,options:e},null,{get:"tooltip"},{get:"user.errors"},"spareEmail","right"))),n.push(' placeholder="Запасной E-mail" can-value="user.spareEmail" type="text" ',s.view.pending({scope:t,options:e}),">"),n.push('\n							</div>\n						</div>\n					</div>\n				</div>\n                <button type="button" class="buttonSave saveProfileData">\n                    Сохранить\n                </button>\n				<div class="iAgreeBlock">\n					<div class="checkbox">\n						<input type="checkbox" id="user.agree" can-value="user.agree" '),n.push(s.view.txt(1,"input",1,this,s.Mustache.txt({scope:t,options:e},null,{get:"isChekedAgree"},{get:"user.agree"}))),n.push(" ",s.view.pending({scope:t,options:e}),"/>"),n.push('\n						<label for="user.agree"></label>\n					</div>\n					<div class="text">\n						Я покупаю качественное детское питание «Агуша» и рекомендую его \n						<br />\n						другим мамам. Присоединяюсь к «Агуша – одобрено мамами»!\n					</div>\n				</div>\n			</div>'),n.push("\n"),n.push(s.view.txt(0,"/div",0,this,s.Mustache.txt({scope:t,options:e},"#",{get:"if"},{get:"user.standardRegistration"},[{fn:function(){var t=[];return t.push('			<div class="profileHead">\n				<div class="headWrap">\n					<h3 class="inner_title">\n						Изменить пароль\n					</h3>\n					<div class="question_bubble tooltip agushaTooltip" title="Выберите для себя уникальный пароль и будьте уверены в том, что никто, кроме вас, не сможет воспользоваться вашим замечательным профилем.">?</div>\n				</div>\n			</div>\n			<form class="changePassword">\n				<div class="profileInfo passwordInfo passwords">\n					<div class="userInputs" '),t.push(s.view.txt(2,"div","style",this,function(){var s=[];return s.push('style="'),s.push('margin-top: 0px;"'),s.join("")})),t.push('>\n						<div class="column middle">\n							<div class="inner">\n								<div class="input_row">\n									<input name="oldPassword" class="password" can-value="old_password" type="password" data-passid="oldPass" placeholder="Ваш старый пароль" >\n									<span class="switcher" data-passid="oldPass"></span>\n								</div>\n							</div>\n						</div>\n						<div class="newPasswordTooltip">\n							<div class="column left">\n								<div class="inner">\n									<div class="input_row">\n										<input name="newPassword" data-passid="pass" can-value="new_password" placeholder="Новый пароль" type="password" class="password newPasswordValidate newPassword1" >\n										<span class="switcher" data-passid="pass"></span>\n									</div>\n								</div>\n							</div>\n							<div class="column right">\n								<div class="inner">\n									<div class="input_row">\n										<input name="newPasswordCopy" data-passid="newPass" can-value="renew_password" class="password newPasswordValidate newPassword2" placeholder="Новый пароль еще раз" type="password" >\n										<span class="switcher" data-passid="newPass"></span>\n									</div>\n								</div>\n							</div>\n						</div>\n					</div>\n				</div>\n				<button type="submit" class="buttonSave">\n					Изменить пароль\n				</button>\n			</form>'),t.push("\n"),t.join("")}}]))),n.push('			<div class="profileHead">\n				<div class="headWrap">\n					<h3 class="inner_title">\n						Пригласите друзей из соцсеточек\n					</h3>\n					<div class="question_bubble tooltip agushaTooltip" title="Выберите Ваших друзей в соцсети и вышлите им приглашение присоединиться к Вам на сайте.">?</div>\n				</div>\n			</div>\n			<div class="profileInfo passwordInfo profileSocials userInputs">\n				<div class="inner_desc">\n					Понравился сайт? Пригласите друга или подругу, им тоже\n					<br/>\n					может быть интересно!\n				</div>\n				<div class="'),n.push('">\n					<div class="column left">\n						<div class="inner">\n							<button class="block profileInvite vk" type="button">\n								<span>ИЗ ВКОНТАКТЕ</span>\n								<div class="img">В</div>\n							</button>\n						</div>\n					</div>\n					<div class="column right">\n						<div class="inner">\n							<button class="block profileInvite fb" type="button">\n								<span>ИЗ FACEBOOK</span>\n								<div class="img">f</div>\n							</button>\n						</div>\n					</div>\n				</div>\n			</div>\n		</div>\n	</div>\n</div>'),n.join("")}))});
/*module/profile/views/friends.mustache!js/plugins/CanJS/view/mustache/system*/
define("module/profile/views/friends.mustache!js/plugins/CanJS/view/mustache/system",["can/view/mustache/mustache"],function(s){return s.view.preloadStringRenderer("module/profile/views/friends.mustache",s.Mustache(function(t,e){var i=[];return i.push('<div class="pf-wrap modal active">\n    <div class="pf-container modal_bg">\n        <div class="pf-title">\n            ВАШИ ДРУЗЬЯ В '),i.push(s.view.txt(1,"div",0,this,s.Mustache.txt({scope:t,options:e},null,{get:"socialNetwork"}))),i.push('\n        </div>\n        <div class="pf-close close" '),i.push(s.view.txt(1,"div",1,this,s.Mustache.txt({scope:t,options:e},null,{get:"close"}))),i.push("",s.view.pending({scope:t,options:e}),">"),i.push('</div>\n        <div class="pf-items">'),i.push("\n"),i.push(s.view.txt(0,"div",0,this,s.Mustache.txt({scope:t,options:e},"#",{get:"each"},{get:"friends"},[{fn:function(t,e){var i=[];return i.push('                <div class="pf-friend">\n                    <img '),i.push(s.view.txt(2,"img","src",this,function(){var i=[];return i.push('src="'),i.push(s.view.toStr(s.Mustache.txt({scope:t,options:e,special:!0},null,{get:"photo"})())),i.push('"'),i.join("")})),i.push(' class="pf-img" ',s.view.pending({scope:t,options:e}),"/>"),i.push('\n                    <div class="pf-name">\n						'),i.push(s.view.txt(1,"div",0,this,s.Mustache.txt({scope:t,options:e},null,{get:"first_name"}))),i.push(" "),i.push(s.view.txt(1,"div",0,this,s.Mustache.txt({scope:t,options:e},null,{get:"last_name"}))),i.push('\n					</div>\n                    <div>\n                        <button class="pf-send" '),i.push(s.view.txt(1,"button",1,this,s.Mustache.txt({scope:t,options:e},null,{get:"sendMessage"}))),i.push(' data-id="'),i.push(s.view.txt(!0,"button","data-id",this,s.Mustache.txt({scope:t,options:e},null,{get:"uid"}))),i.push('"',s.view.pending({scope:t,options:e}),">"),i.push("\n                            ПРИГЛАСИТЬ\n                        </button>\n                    </div>\n                </div>"),i.push("\n"),i.join("")}}]))),i.push("        </div>\n    </div>\n</div>"),i.join("")}))});
/*vk-openapi*/
System.define("vk-openapi",'!function(t){function e(){var t="";for(i=0;5>i;i++)t+=Math.ceil(15*Math.random()).toString(16);return t}function o(t,e,i,n,r){t[e]?i.apply(n):(r=r||0,1e3>r&&setTimeout(function(){o(t,e,i,n,r+1)},0))}function n(e){setTimeout(function(){var i=document.createElement("script");i.type="text/javascript",i.src=e||t.fastXDM.helperUrl,o(document,"body",function(){document.getElementsByTagName("HEAD")[0].appendChild(i)})},0)}function r(t,e){switch(typeof t){case"string":return e?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/\'/g,"&#039;"):t.replace(/&#039;/g,"\'").replace(/&quot;/g,\'"\').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&");case"object":if("[object Array]"===Object.prototype.toString.apply(t)){newValue=[];for(var o=0;o<t.length;o++)newValue[o]=r(t[o],e)}else for(var i in t)newValue={},Object.hasOwnProperty.call(t,i)&&(newValue[i]=r(t[i],e));default:newValue=t}return newValue}function s(t,e){p.loaded?t.apply(e,[p]):u.push([e,t])}function a(){p.loaded=!0;for(var t=u.length;t--;)u[t][1].apply(u[t][0],[p])}function d(t,e){s(function(o){var i=o.json.parse(t);if(i[0]){i[1]||(i[1]=[]);for(var n=i[1].length;n--;)if(i[1][n]._func){var s=i[1][n]._func;i[1][n]=function(){var t=Array.prototype.slice.call(arguments);t.unshift("_func"+s),e.callMethod.apply(e,t)}}else e.options.safe&&(i[1][n]=r(i[1][n],!0));setTimeout(function(){if(!e.methods[i[0]])throw Error("fastXDM: Method "+i[0]+" is undefined");e.methods[i[0]].apply(e,i[1])},0)}})}function l(t,e){for(var o in e)t[o]&&"object"==typeof t[o]?l(t[o],e[o]):t[o]=e[o]}if(!t.fastXDM){var c={},u=[],p={};t.fastXDM={_id:0,helperUrl:("https:"===location.protocol?"https:":"http:")+"//vk.com/js/api/xdmHelper.js",Server:function(o,i,n){this.methods=o||{},this.id=t.fastXDM._id++,this.options=n||{},this.filter=i,this.key=e(),this.methods["%init%"]=this.methods.__fxdm_i=function(){t.fastXDM.run(this.id),this.methods.onInit&&this.methods.onInit()},this.frameName="fXD"+this.key,this.server=!0,c[this.key]=[d,this]},Client:function(e,o){if(this.methods=e||{},this.id=t.fastXDM._id++,this.options=o||{},t.fastXDM.run(this.id),0!==window.name.indexOf("fXD"))throw Error("Wrong window.name property.");this.key=window.name.substr(3),this.caller=window.parent,c[this.key]=[d,this],this.client=!0,t.fastXDM.on("helper",function(){t.fastXDM.onClientStart(this)},this),s(function(t){t.send(this,t.json.stringify(["%init%"]));var e=this.methods;setTimeout(function(){e.onInit&&e.onInit()},0)},this)},onMessage:function(t){if(!t.data)return!1;var e=t.data;if("string"!=typeof e&&!(e instanceof String))return!1;var o=e.substr(0,5);if(c[o]){var i=c[o][1];!i||i.filter&&!i.filter(t.origin)||c[o][0](t.data.substr(6),i)}},setJSON:function(t){p.json=t},getJSON:function(t){return t?void s(function(e){t(e.json)}):p.json},setEnv:function(t){var e;for(e in t)p[e]=t[e];a()},_q:{},on:function(t,e,o){this._q[t]||(this._q[t]=[]),-1==this._q[t]?e.apply(o):this._q[t].push([e,o])},run:function(t){var e=(this._q[t]||[]).length;if(this._q[t]&&e>0)for(var o=0;e>o;o++)this._q[t][o][0].apply(this._q[t][o][1]);this._q[t]=-1},waitFor:o},t.fastXDM.Server.prototype.start=function(e,o){if(e.contentWindow)this.caller=e.contentWindow,this.frame=e,t.fastXDM.on("helper",function(){t.fastXDM.onServerStart(this)},this);else{var i=this;o=o||0,50>o&&setTimeout(function(){i.start.apply(i,[e,o+1])},100)}},t.fastXDM.Server.prototype.destroy=function(){c.splice(c.indexOf(this.key),1)},t.fastXDM.Server.prototype.append=function(t,e){var o=document.createElement("DIV");o.innerHTML=\'<iframe name="\'+this.frameName+\'" ></iframe>\';var i=o.firstChild,n=this;return setTimeout(function(){i.frameBorder="0",e&&l(i,e),t.insertBefore(i,t.firstChild),n.start(i)},0),i},t.fastXDM.Client.prototype.callMethod=t.fastXDM.Server.prototype.callMethod=function(){for(var e=Array.prototype.slice.call(arguments),i=e.shift(),n=e.length;n--;)if("function"==typeof e[n]){this.funcsCount=(this.funcsCount||0)+1;var a=e[n],d="_func"+this.funcsCount;this.methods[d]=function(){a.apply(this,arguments),delete this.methods[d]},e[n]={_func:this.funcsCount}}else this.options.safe&&(e[n]=r(e[n],!1));o(this,"caller",function(){t.fastXDM.on(this.id,function(){s(function(t){t.send(this,t.json.stringify([i,e]))},this)},this)},this)},t.JSON&&"object"==typeof t.JSON&&t.JSON.parse&&t.JSON.stringify&&\'{"a":[1,2,3]}\'==t.JSON.stringify({a:[1,2,3]}).replace(/ /g,"")?p.json={parse:t.JSON.parse,stringify:t.JSON.stringify}:t.fastXDM._needJSON=!0,t.postMessage?(p.protocol="p",p.send=function(t,e){var o=t.frame?t.frame.contentWindow:t.caller;o.postMessage(t.key+":"+e,"*")},t.addEventListener?t.addEventListener("message",t.fastXDM.onMessage,!1):t.attachEvent("onmessage",t.fastXDM.onMessage),t.fastXDM._needJSON?(t.fastXDM._onlyJSON=!0,n()):a()):n()}}(window),window.VK||(window.VK={}),VK.MD5||(VK.MD5=function(t){var e=function(t,e){var o=(65535&t)+(65535&e),i=(t>>16)+(e>>16)+(o>>16);return i<<16|65535&o},o=function(t,e){return t<<e|t>>>32-e},i=function(t,i,n,r,s,a){return e(o(e(e(i,t),e(r,a)),s),n)},n=function(t,e,o,n,r,s,a){return i(e&o|~e&n,t,e,r,s,a)},r=function(t,e,o,n,r,s,a){return i(e&n|o&~n,t,e,r,s,a)},s=function(t,e,o,n,r,s,a){return i(e^o^n,t,e,r,s,a)},a=function(t,e,o,n,r,s,a){return i(o^(e|~n),t,e,r,s,a)},d=function(t,o){var i,d,l,c,u=1732584193,p=-271733879,h=-1732584194,f=271733878;t[o>>5]|=128<<o%32,t[(o+64>>>9<<4)+14]=o;for(var g=0,m=t.length;m>g;g+=16)i=u,d=p,l=h,c=f,u=n(u,p,h,f,t[g+0],7,-680876936),f=n(f,u,p,h,t[g+1],12,-389564586),h=n(h,f,u,p,t[g+2],17,606105819),p=n(p,h,f,u,t[g+3],22,-1044525330),u=n(u,p,h,f,t[g+4],7,-176418897),f=n(f,u,p,h,t[g+5],12,1200080426),h=n(h,f,u,p,t[g+6],17,-1473231341),p=n(p,h,f,u,t[g+7],22,-45705983),u=n(u,p,h,f,t[g+8],7,1770035416),f=n(f,u,p,h,t[g+9],12,-1958414417),h=n(h,f,u,p,t[g+10],17,-42063),p=n(p,h,f,u,t[g+11],22,-1990404162),u=n(u,p,h,f,t[g+12],7,1804603682),f=n(f,u,p,h,t[g+13],12,-40341101),h=n(h,f,u,p,t[g+14],17,-1502002290),p=n(p,h,f,u,t[g+15],22,1236535329),u=r(u,p,h,f,t[g+1],5,-165796510),f=r(f,u,p,h,t[g+6],9,-1069501632),h=r(h,f,u,p,t[g+11],14,643717713),p=r(p,h,f,u,t[g+0],20,-373897302),u=r(u,p,h,f,t[g+5],5,-701558691),f=r(f,u,p,h,t[g+10],9,38016083),h=r(h,f,u,p,t[g+15],14,-660478335),p=r(p,h,f,u,t[g+4],20,-405537848),u=r(u,p,h,f,t[g+9],5,568446438),f=r(f,u,p,h,t[g+14],9,-1019803690),h=r(h,f,u,p,t[g+3],14,-187363961),p=r(p,h,f,u,t[g+8],20,1163531501),u=r(u,p,h,f,t[g+13],5,-1444681467),f=r(f,u,p,h,t[g+2],9,-51403784),h=r(h,f,u,p,t[g+7],14,1735328473),p=r(p,h,f,u,t[g+12],20,-1926607734),u=s(u,p,h,f,t[g+5],4,-378558),f=s(f,u,p,h,t[g+8],11,-2022574463),h=s(h,f,u,p,t[g+11],16,1839030562),p=s(p,h,f,u,t[g+14],23,-35309556),u=s(u,p,h,f,t[g+1],4,-1530992060),f=s(f,u,p,h,t[g+4],11,1272893353),h=s(h,f,u,p,t[g+7],16,-155497632),p=s(p,h,f,u,t[g+10],23,-1094730640),u=s(u,p,h,f,t[g+13],4,681279174),f=s(f,u,p,h,t[g+0],11,-358537222),h=s(h,f,u,p,t[g+3],16,-722521979),p=s(p,h,f,u,t[g+6],23,76029189),u=s(u,p,h,f,t[g+9],4,-640364487),f=s(f,u,p,h,t[g+12],11,-421815835),h=s(h,f,u,p,t[g+15],16,530742520),p=s(p,h,f,u,t[g+2],23,-995338651),u=a(u,p,h,f,t[g+0],6,-198630844),f=a(f,u,p,h,t[g+7],10,1126891415),h=a(h,f,u,p,t[g+14],15,-1416354905),p=a(p,h,f,u,t[g+5],21,-57434055),u=a(u,p,h,f,t[g+12],6,1700485571),f=a(f,u,p,h,t[g+3],10,-1894986606),h=a(h,f,u,p,t[g+10],15,-1051523),p=a(p,h,f,u,t[g+1],21,-2054922799),u=a(u,p,h,f,t[g+8],6,1873313359),f=a(f,u,p,h,t[g+15],10,-30611744),h=a(h,f,u,p,t[g+6],15,-1560198380),p=a(p,h,f,u,t[g+13],21,1309151649),u=a(u,p,h,f,t[g+4],6,-145523070),f=a(f,u,p,h,t[g+11],10,-1120210379),h=a(h,f,u,p,t[g+2],15,718787259),p=a(p,h,f,u,t[g+9],21,-343485551),u=e(u,i),p=e(p,d),h=e(h,l),f=e(f,c);return[u,p,h,f]},l=function(t){for(var e,o,i="",n=-1,r=t.length;++n<r;)e=t.charCodeAt(n),o=r>n+1?t.charCodeAt(n+1):0,e>=55296&&56319>=e&&o>=56320&&57343>=o&&(e=65536+((1023&e)<<10)+(1023&o),n++),127>=e?i+=String.fromCharCode(e):2047>=e?i+=String.fromCharCode(192|31&e>>>6,128|63&e):65535>=e?i+=String.fromCharCode(224|15&e>>>12,128|63&e>>>6,128|63&e):2097151>=e&&(i+=String.fromCharCode(240|7&e>>>18,128|63&e>>>12,128|63&e>>>6,128|63&e));return i},c=function(t){var e,o,i=Array(t.length>>2);for(e=0,o=i.length;o>e;e++)i[e]=0;for(e=0,o=8*t.length;o>e;e+=8)i[e>>5]|=(255&t.charCodeAt(e/8))<<e%32;return i},u=function(t){for(var e="",o=0,i=32*t.length;i>o;o+=8)e+=String.fromCharCode(255&t[o>>5]>>>o%32);return e},p=function(t){return u(d(c(t),8*t.length))},h=function(t){for(var e,o="0123456789abcdef",i="",n=0,r=t.length;r>n;n++)e=t.charCodeAt(n),i+=o.charAt(15&e>>>4)+o.charAt(15&e);return i};return h(p(l(t)))}),VK.extend=function(t,e,o){for(var i in e)(o||"undefined"==typeof t[i])&&(t[i]=e[i]);return t},"https:"!==VK._protocol&&(VK._protocol="https:"===location.protocol?"https:":"http:"),VK.xdConnectionCallbacks?(setTimeout(function(){for(var t;t=VK.xdConnectionCallbacks.pop();)t()},0),VK.Widgets&&!VK.Widgets._constructor&&(VK.Widgets=!1)):(VK.extend(VK,{version:1,_apiId:null,_session:null,_userStatus:"unknown",_domain:{main:"https://oauth.vk.com/",api:"https://api.vk.com/"},_path:{login:"authorize",proxy:"fxdm_oauth_proxy.html"},_rootId:"vk_api_transport",_nameTransportPath:"",xdReady:!1,access:{FRIENDS:2,PHOTOS:4,AUDIO:8,VIDEO:16,MATCHES:32,QUESTIONS:64,WIKI:128}}),VK.init=function(t){var e,o;if(VK._apiId=null,!t.apiId)throw Error("VK.init() called without an apiId");if(VK._apiId=t.apiId,t.onlyWidgets)return!0;t.nameTransportPath&&""!==t.nameTransportPath&&(VK._nameTransportPath=t.nameTransportPath),o=document.getElementById(VK._rootId),o||(o=document.createElement("div"),o.id=VK._rootId,e=document.getElementsByTagName("body")[0],e.insertBefore(o,e.childNodes[0])),o.style.position="absolute",o.style.top="-10000px";var i=VK.Cookie.load();i&&(VK.Auth._loadState="loaded",VK.Auth.setSession(i,i?"connected":"unknown"))},VK.Cookie||(VK.Cookie={_domain:null,load:function(){var t,e=document.cookie.match("\\\\bvk_app_"+VK._apiId+"=([^;]*)\\\\b");if(e){if(t=this.decode(e[1]),"oauth"!=t.secret)return!1;t.expire=parseInt(t.expire,10),VK.Cookie._domain="."+window.location.hostname}return t},setRaw:function(t,e,o,i){var n;n="vk_app_"+VK._apiId+"="+t;var r=i?(new Date).getTime()+1e3*i:1e3*e;n+=t&&0===e?"":"; expires="+new Date(r).toGMTString(),n+="; path=/",n+=o?"; domain=."+o:"",document.cookie=n,this._domain=o},set:function(t,e){t?this.setRaw(this.encode(t),t.expire,window.location.hostname,(e||{}).time):this.clear()},clear:function(){this.setRaw("",0,this._domain,0)},encode:function(t){var e,o=[];for(e in t)"user"!=e&&o.push(encodeURIComponent(e)+"="+encodeURIComponent(t[e]));return o.sort(),o.join("&")},decode:function(t){var e,o,i={},n=t.split("&");for(e=0;e<n.length;e++)o=n[e].split("=",2),o&&o[0]&&(i[decodeURIComponent(o[0])]=decodeURIComponent(o[1]));return i}}),VK.Api||(VK.Api={_headId:null,_callbacks:{},ie6_7:function(){return VK.Api.ieTested||(VK.Api.isIE6_7=navigator.userAgent.match(/MSIE [6|7]/i),VK.Api.ieTested=!0),VK.Api.isIE6_7},attachScript:function(t){VK.Api._headId||(VK.Api._headId=document.getElementsByTagName("head")[0]);var e=document.createElement("script");e.type="text/javascript",e.setAttribute("encoding","UTF-8"),e.src=t,VK.Api._headId.appendChild(e)},checkMethod:function(t,e,o,i){var n=t.toLowerCase();if("wall.post"==n||"activity.set"==n){var r="activity.set"==n?e.text:e.message;r||(r="");var s=VK._protocol+"//vk.com/al_apps.php?act=wall_post_box&widget=1&method="+n+"&aid="+parseInt(VK._apiId,10)+"&text="+encodeURIComponent(r);"wall.post"==n&&(s+="&owner_id="+parseInt(e.owner_id||0,10)+"&attachments="+(e.attachments||e.attachment||"")+"&publish_date="+(e.publish_date||""));var a="_"+Math.random().toString(16).substr(2);s+="&method_access="+a,VK.UI.popup({url:s,width:460,height:249});var d=setInterval(function(){VK.UI.active.closed&&(clearInterval(d),e.method_access=a,VK.Api.call(t,e,o,i))},500);return!1}return!0},call:function(t,e,o,i){var n,r,s=e||{};if("object"!=typeof s||"function"!=typeof o)return!1;if(e.method_access||e.method_force||VK.Api.checkMethod(t,e,o,i)){if(i||(i=0),"loaded"!=VK.Auth._loadState){var a=function(i){i&&i.session&&(VK.Observer.unsubscribe("auth.loginStatus",a),VK.Api.call(t,e,o))};return VK.Observer.subscribe("auth.loginStatus",a),void VK.Auth.getLoginStatus()}if(VK.Api.queryLength(s)<1500&&!VK.Api.ie6_7()){for(var d=!1,l=parseInt(1e7*Math.random(),10);VK.Api._callbacks[l];)l=parseInt(1e7*Math.random(),10);s.callback="VK.Api._callbacks["+l+"]"}else var d=!0;VK._session&&VK._session.sid&&(s.access_token=VK._session.sid),n=VK.Cookie.encode(s),r=function(n){if(!n.error||3!=n.error.error_code&&4!=n.error.error_code&&5!=n.error.error_code)o(n);else{if(i>3)return!1;var r=function(n){VK.Observer.unsubscribe("auth.sessionChange",r),delete e.access_token,n.session&&VK.Api.call(t,e,o,i+1)};VK.Observer.subscribe("auth.sessionChange",r),VK.Auth.getLoginStatus()}d||delete VK.Api._callbacks[l]},d?VK.xdReady?VK.XDM.remote.callMethod("apiCall",t,n,r):(VK.Observer.subscribe("xdm.init",function(){VK.XDM.remote.callMethod("apiCall",t,n,r)}),VK.XDM.init()):(VK.Api._callbacks[l]=r,VK.Api.attachScript(VK._domain.api+"method/"+t+"?"+n))}},queryLength:function(t){var e,o=100;for(e in t)o+=e.length+encodeURIComponent(t[e]).length+1;return o}},VK.api=function(t,e,o){VK.Api.call(t,e,o)}),VK.Auth||(VK.Auth={popup:null,lsCb:{},setSession:function(t,e,o,i){var n=!VK._session&&t,r=VK._session&&!t,s=VK._session&&t&&VK._session.mid!=t.mid,a=n||r||VK._session&&t&&VK._session.sid!=t.sid,d=e!=VK._userStatus,l={session:t,status:e,settings:o};return VK._session=t,VK._userStatus=e,VK.Cookie.set(t,i),(a||d||s)&&setTimeout(function(){d&&VK.Observer.publish("auth.statusChange",l),(r||s)&&VK.Observer.publish("auth.logout",l),(n||s)&&VK.Observer.publish("auth.login",l),a&&VK.Observer.publish("auth.sessionChange",l)},0),l},login:function(t,e){var o,i;if(!VK._apiId)return!1;o=window.location.protocol+"//"+window.location.hostname,i=VK._domain.main+VK._path.login+"?client_id="+VK._apiId+"&display=popup&redirect_uri=close.html&response_type=token",e&&parseInt(e,10)>0&&(i+="&scope="+e),VK.Observer.unsubscribe("auth.onLogin"),VK.Observer.subscribe("auth.onLogin",t),VK.UI.popup({width:665,height:370,url:i});var n=function(){VK.Auth.getLoginStatus(function(t){VK.Observer.publish("auth.onLogin",t),VK.Observer.unsubscribe("auth.onLogin")},!0)};VK.UI.popupOpened=!0;var r=function(){if(!VK.UI.popupOpened)return!1;try{if(!VK.UI.active.top||VK.UI.active.closed)return VK.UI.popupOpened=!1,n(),!0}catch(t){return VK.UI.popupOpened=!1,n(),!0}setTimeout(r,100)};setTimeout(r,100)},logout:function(t){VK.Auth.revokeGrants(t)},revokeGrants:function(t){var e=function(o){VK.Observer.unsubscribe("auth.statusChange",e),t&&t(o)};VK.Observer.subscribe("auth.statusChange",e),VK._session&&VK._session.sid&&VK.Api.attachScript("https://login.vk.com/?act=openapi&oauth=1&aid="+parseInt(VK._apiId,10)+"&location="+encodeURIComponent(window.location.hostname)+"&do_logout=1&token="+VK._session.sid),VK.Cookie.clear()},getSession:function(){return VK._session},getLoginStatus:function(t,e){if(VK._apiId){if(t){if(!e&&"loaded"==VK.Auth._loadState)return void t({status:VK._userStatus,session:VK._session});VK.Observer.subscribe("auth.loginStatus",t)}if(e||"loading"!=VK.Auth._loadState){VK.Auth._loadState="loading";for(var o=parseInt(1e7*Math.random(),10);VK.Auth.lsCb[o];)o=parseInt(1e7*Math.random(),10);VK.Auth.lsCb[o]=function(t){if(delete VK.Auth.lsCb[o],VK.Auth._loadState="loaded",t&&t.auth){var i={mid:t.user.id,sid:t.access_token,sig:t.sig,secret:t.secret,expire:t.expire};e&&(i.user=t.user);var n="connected"}else{var i=null,n=t.user?"logined":"unknown";VK.Cookie.clear()}VK.Auth.setSession(i,n,!1,t),VK.Observer.publish("auth.loginStatus",{session:i,status:n}),VK.Observer.unsubscribe("auth.loginStatus")},VK.Api.attachScript("https://login.vk.com/?act=openapi&oauth=1&aid="+parseInt(VK._apiId,10)+"&location="+encodeURIComponent(window.location.hostname)+"&rnd="+o)}}}})),VK.UI||(VK.UI={active:null,_buttons:[],popup:function(t){var e="undefined"!=typeof window.screenX?window.screenX:window.screenLeft,o="undefined"!=typeof window.screenY?window.screenY:window.screenTop,i="undefined"!=typeof window.outerWidth?window.outerWidth:document.body.clientWidth,n="undefined"!=typeof window.outerHeight?window.outerHeight:document.body.clientHeight-22,r=t.width,s=t.height,a=parseInt(e+(i-r)/2,10),d=parseInt(o+(n-s)/2.5,10),l="width="+r+",height="+s+",left="+a+",top="+d;this.active=window.open(t.url,"vk_openapi",l)},button:function(t){var e="";"string"==typeof t&&(t=document.getElementById(t)),this._buttons.push(t),index=this._buttons.length-1,e=\'<table cellspacing="0" cellpadding="0" id="openapi_UI_\'+index+\'" onmouseover="VK.UI._change(1, \'+index+\');" onmouseout="VK.UI._change(0, \'+index+\');" onmousedown="VK.UI._change(2, \'+index+\');" onmouseup="VK.UI._change(1, \'+index+\');" style="cursor: pointer; border: 0px; font-family: tahoma, arial, verdana, sans-serif, Lucida Sans; font-size: 10px;"><tr style="vertical-align: middle"><td><div style="border: 1px solid #3b6798;border-radius: 2px 0px 0px 2px;-moz-border-radius: 2px 0px 0px 2px;-webkit-border-radius: 2px 0px 0px 2px;"><div style="border: 1px solid #5c82ab; border-top-color: #7e9cbc; background-color: #6D8DB1; color: #fff; text-shadow: 0px 1px #45688E; height: 15px; padding: 2px 4px 0px 6px;line-height: 13px;">&#1042;&#1086;&#1081;&#1090;&#1080;</div></div></td><td><div style="background: url(\'+VK._protocol+\'//vk.com/images/btns.png) 0px -42px no-repeat; width: 21px; height: 21px"></div></td><td><div style="border: 1px solid #3b6798;border-radius: 0px 2px 2px 0px;-moz-border-radius: 0px 2px 2px 0px;-webkit-border-radius: 0px 2px 2px 0px;"><div style="border: 1px solid #5c82ab; border-top-color: #7e9cbc; background-color: #6D8DB1; color: #fff; text-shadow: 0px 1px #45688E; height: 15px; padding: 2px 6px 0px 4px;line-height: 13px;">&#1050;&#1086;&#1085;&#1090;&#1072;&#1082;&#1090;&#1077;</div></div></td></tr></table>\',t.innerHTML=e,t.style.width=t.childNodes[0].offsetWidth+"px"},_change:function(t,e){for(var o=document.getElementById("openapi_UI_"+e).rows[0],i=[o.cells[0].firstChild.firstChild,o.cells[2].firstChild.firstChild],n=0;2>n;++n){var r=i[n];0===t?(r.style.backgroundColor="#6D8DB1",r.style.borderTopColor="#7E9CBC",r.style.borderLeftColor=r.style.borderRightColor=r.style.borderBottomColor="#5C82AB"):1==t?(r.style.backgroundColor="#7693B6",r.style.borderTopColor="#88A4C4",r.style.borderLeftColor=r.style.borderRightColor=r.style.borderBottomColor="#6088B4"):2==t&&(r.style.backgroundColor="#6688AD",r.style.borderBottomColor="#7495B8",r.style.borderLeftColor=r.style.borderRightColor=r.style.borderTopColor="#51779F")}0===t||2==t?o.cells[2].firstChild.style.backgroundPosition="0px -42px":1==t&&(o.cells[2].firstChild.style.backgroundPosition="0px -63px")}}),VK.XDM||(VK.XDM={remote:null,init:function(){if(this.remote)return!1;var t=VK._domain.api+VK._path.proxy;this.remote=new fastXDM.Server({onInit:function(){VK.xdReady=!0,VK.Observer.publish("xdm.init")}}),this.remote.append(document.getElementById(VK._rootId),{src:t})},xdHandler:function(code){try{eval("VK."+code)}catch(e){}}}),VK.Observer||(VK.Observer={_subscribers:function(){return this._subscribersMap||(this._subscribersMap={}),this._subscribersMap},publish:function(t){var e,o,i=Array.prototype.slice.call(arguments),t=i.shift(),n=this._subscribers()[t];if(n)for(e=0,o=n.length;o>e;e++)null!=n[e]&&n[e].apply(this,i)},subscribe:function(t,e){var o=this._subscribers();return"function"!=typeof e?!1:void(o[t]?o[t].push(e):o[t]=[e])},unsubscribe:function(t,e){var o,i,n=this._subscribers()[t];if(!n)return!1;if("function"==typeof e)for(o=0,i=n.length;i>o;o++)n[o]==e&&(n[o]=null);else delete this._subscribers()[t]}}),VK.Widgets||(VK.Widgets={},VK.Widgets.count=0,VK.Widgets.RPC={},VK.Widgets.loading=function(t,e){t.style.background=e?\'url("\'+VK._protocol+\'//vk.com/images/upload.gif") center center no-repeat transparent\':"none"},VK.Widgets.Comments=function(t,e,o){var i=VK.Util.getPageData();if(!VK._apiId)throw Error("VK not initialized. Please use VK.init");e=e||{};var n,r,s={limit:e.limit||10,height:e.height||0,mini:void 0===e.mini?"auto":e.mini,norealtime:e.norealtime?1:0},a=function(){return r.callMethod("mouseUp"),!1},d=function(t){r.callMethod("mouseMove",{screenY:t.screenY})};if(e.browse)s.browse=1,s.replies=e.replies||0;else{var l=e.pageUrl||i.url;"/"==l.substr(0,1)&&(l=location.protocol+"//"+location.host+l),VK.extend(s,{page:o||0,status_publish:void 0===e.autoPublish?1:e.autoPublish,attach:void 0===e.attach?"*":e.attach?e.attach:"",url:l,title:e.pageTitle||i.title,description:e.pageDescription||i.description,image:e.pageImage||i.image})}return e.onChange&&(VK.Observer.subscribe("widgets.comments.new_comment",e.onChange),VK.Observer.subscribe("widgets.comments.delete_comment",e.onChange)),VK.Widgets._constructor("widget_comments.php",t,e,s,{showBox:function(t){var o=VK.Util.Box((e.base_domain||VK._protocol+"//vk.com")+"/"+t,[],{proxy:function(){r.callMethod.apply(r,arguments)}});o.show()},startDrag:function(){cursorBack=window.document.body.style.cursor,window.document.body.style.cursor="pointer",VK.Util.addEvent("mousemove",d),VK.Util.addEvent("mouseup",a)},stopDrag:function(){window.document.body.style.cursor=cursorBack,VK.Util.removeEvent("mousemove",d),VK.Util.removeEvent("mouseup",a)}},{startHeight:133,minWidth:300,width:"100%"},function(t,e,o){n=e,r=o})},VK.Widgets.CommentsBrowse=function(t,e){return e=e||{},e.browse=1,VK.Widgets.Comments(t,e)},VK.Widgets.Recommended=function(t,e){if(VK.Util.getPageData(),!VK._apiId)throw Error("VK not initialized. Please use VK.init");e=e||{};var o={limit:e.limit||5,max:e.max||0,sort:e.sort||"friend_likes",verb:e.verb||0,period:e.period||"week",target:e.target||"parent"};return VK.Widgets._constructor("widget_recommended.php",t,e,o,{},{startHeight:90+30*o.limit,minWidth:150,width:"100%"})},VK.Widgets.Post=function(t,e,o,i,n){n=n||{};var r,s,a,d={owner_id:e,post_id:o,hash:i||"",width:n.width||500};return VK.Widgets._constructor("widget_post.php",t,n,d,{showBox:function(t){var e=VK.Util.Box((n.base_domain||VK._protocol+"//vk.com")+"/"+t,[],{proxy:function(){s.callMethod.apply(s,arguments)}});e.show()},startDrag:function(){a=window.document.body.style.cursor,window.document.body.style.cursor="pointer"},stopDrag:function(){window.document.body.style.cursor=a}},{startHeight:90,minWidth:250,width:"100%"},function(t,e,o){r=e,s=o})},VK.Widgets.Like=function(t,e,o){function i(t){if((y||t)&&u&&c&&u&&("none"==c.style.display||"yes"==c.getAttribute("vkhidden"))){var o=e.getScrollTop?e.getScrollTop():document.body.scrollTop||document.documentElement.scrollTop||0,i=VK.Util.getXY(a,e.fixed),n=w?0:i[1];o>i[1]-120&&"top"!=e.tooltipPos||"vertical"==f||"bottom"==e.tooltipPos?(c.style.top=n+_+2+"px",u.callMethod("show",!1)):(c.style.top=n-125+"px",u.callMethod("show",!0)),VK.Util.ss(c,{left:(w?0:i[0])-("vertical"==f||"mini"==f?36:2)+"px",display:"block",opacity:1,filter:"none"}),c.setAttribute("vkhidden","no"),y=!0}}function n(t){y&&!t||!u||(u.callMethod("hide"),l.callMethod("hide"),setTimeout(function(){c.style.display="none"},400))}function r(){n(!0),h=VK.Util.Box(d.src+"&act=a_stats_box&widget_width=620"),h.show()}var s=VK.Util.getPageData();if(!VK._apiId)throw Error("VK not initialized. Please use VK.init");e=VK.extend(e||{},{allowTransparency:!0}),("button"==e.type||"vertical"==e.type||"mini"==e.type)&&delete e.width;var a,d,l,c,u,p,h,f="full"==e.type||"button"==e.type||"vertical"==e.type||"mini"==e.type?e.type:"full",g="full"==f?Math.max(200,e.width||350):"button"==f?180:"mini"==f?100:41,m=parseInt(e.height,10)||22,_="vertical"==f?2*m+7:"full"==f?m+1:m,v={page:o||0,url:e.pageUrl||s.url,type:f,verb:1==e.verb?1:0,color:e.color||"",title:e.pageTitle||s.title,description:e.pageDescription||s.description,image:e.pageImage||s.image,text:(e.text||"").substr(0,140),h:m},w=e.ttHere||!1,y=!1;return VK.Widgets._constructor("widget_like.php",t,e,v,{initTooltip:function(t){u=new fastXDM.Server({onInit:t?function(){i(!0)}:function(){},proxy:function(){l.callMethod.apply(l,arguments)},showBox:function(t,o){var i=VK.Util.Box((e.base_domain||VK._protocol+"//vk.com/")+t,[o.width,o.height],{proxy:function(){u.callMethod.apply(u,arguments)}});i.show()},statsBox:r},!1,{safe:!0}),c=u.append(w?a:document.body,{src:d.src+"&act=a_like_tooltip",scrolling:"no",allowTransparency:!0,id:d.id+"_tt",style:{position:"absolute",padding:0,display:"block",opacity:.01,filter:"alpha(opacity=1)",border:"0",width:"238px",height:"124px",zIndex:5e3,overflow:"hidden"}}),c.setAttribute("vkhidden","yes"),a.onmouseover=c.onmouseover=function(){clearTimeout(p),y=!0},a.onmouseout=c.onmouseout=function(){clearTimeout(p),y=!1,p=setTimeout(function(){n()},200)}},statsBox:r,showTooltip:i,hideTooltip:n,showBox:function(t){var o=VK.Util.Box((e.base_domain||VK._protocol+"//vk.com/")+t,[],{proxy:function(){l.callMethod.apply(l,arguments)}});o.show()},proxy:function(){u&&u.callMethod.apply(u,arguments)}},{startHeight:_,minWidth:g},function(t,e,o){l=o,VK.Util.ss(a=t,{height:_+"px",width:g+"px",position:"relative",clear:"both"}),VK.Util.ss(d=e,{height:_+"px",width:g+"px",overflow:"hidden",zIndex:150})})},VK.Widgets.Poll=function(t,e,o){var i=VK.Util.getPageData();if(!o)throw Error("No poll id passed");e=e||{};var n={poll_id:o,url:e.pageUrl||i.url||location.href,title:e.pageTitle||i.title,description:e.pageDescription||i.description};return VK.Widgets._constructor("widget_poll.php",t,e,n,{},{startHeight:133,minWidth:300,width:"100%"})},VK.Widgets.PagePoll=function(t,e,o){var i=VK.Util.getPageData();e=e||{};var n={page:o||0,norealtime:e.norealtime?1:0,poll_id:e.pollId||"",url:e.pageUrl||i.url||location.href,title:e.pageTitle||i.title,description:e.pageDescription||i.description};return VK.Widgets._constructor("al_widget_poll.php",t,e,n,{},{startHeight:133,minWidth:300,width:"100%"})},VK.Widgets.Community=VK.Widgets.Group=function(t,e,o){function i(){return r.callMethod("mouseUp"),!1}function n(t){return r.callMethod("mouseMove",{screenY:t.screenY}),!1}o=parseInt(o,10);var r;if(!o)throw Error("No group_id passed");e.mode=parseInt(e.mode,10).toString();var s={gid:o,mode:e.mode?e.mode:"0"};e.width||(e.width=200),e.wall&&(s.wall=e.wall),s.color1=e.color1||"",s.color2=e.color2||"",s.color3=e.color3||"",e.no_head&&(s.no_head=1),e.height||(e.height=290),e.wide&&(s.wide=1,e.width<300&&(e.width=300));var a;return VK.Widgets._constructor("widget_community.php",t,e,s,{showBox:function(t){var o=VK.Util.Box((e.base_domain||VK._protocol+"//vk.com/")+t,[],{proxy:function(){rpc.callMethod.apply(rpc,arguments)}});o.show()},startDrag:function(){a=window.document.body.style.cursor,window.document.body.style.cursor="pointer",VK.Util.addEvent("mousemove",n),VK.Util.addEvent("mouseup",i)},stopDrag:function(){window.document.body.style.cursor=a,VK.Util.removeEvent("mousemove",n),VK.Util.removeEvent("mouseup",i)},auth:function(){VK.Auth.login(null,1)}},{minWidth:120,width:"200",height:"290",startHeight:200},function(t,e,o){r=o})},VK.Widgets.Auth=function(t,e){if(VK.Util.getPageData(),!VK._apiId)throw Error("VK not initialized. Please use VK.init");return e.width||(e.width=200),type=e.type?1:0,VK.Widgets._constructor("widget_auth.php",t,e,{},{makeAuth:function(t){if(t.session&&(VK.Auth._loadState="loaded",VK.Auth.setSession(t.session,"connected"),VK.Observer.publish("auth.loginStatus",{session:t.session,status:"connected"}),VK.Observer.unsubscribe("auth.loginStatus")),e.onAuth)e.onAuth(t);else{if(e.authUrl)var o=e.authUrl;else var o=window.location.href;o+=-1==o.indexOf("?")?"?":"&";var i=[];for(var n in t)"session"!=n&&i.push(n+"="+decodeURIComponent(t[n]).replace(/&/g,"%26").replace(/\\?/,"%3F"));window.location.href=o+i.join("&")}}},{startHeight:80})},VK.Widgets.Subscribe=function(t,e,o){o=parseInt(o,10);var i;if(!o)throw Error("No owner_id passed");var n={oid:o};return e.mode&&(n.mode=e.mode),e.soft&&(n.soft=e.soft),VK.Widgets._constructor("widget_subscribe.php",t,e,n,{showBox:function(t){var o=VK.Util.Box((e.base_domain||VK._protocol+"//vk.com/")+t,[],{proxy:function(){rpc.callMethod.apply(rpc,arguments)}});o.show()},auth:function(){VK.Auth.login(null,1)}},{minWidth:220,startHeight:22,height:e.height||22},function(t,e,o){i=o})},VK.Widgets.Ads=function(t,e,o){function i(t){VK.Widgets.loading(v,!0),r(t)}function n(t,o){VK.Widgets.loading(v,!1),s(o),e.onAdsReady&&e.onAdsReady.apply(e.onAdsReady,Array.prototype.slice.call(arguments)),a(t)}function r(t){if("vk__adsLight"in window)window.vk__adsLight&&vk__adsLight.userHandlers&&vk__adsLight.userHandlers.onInit&&vk__adsLight.userHandlers.onInit(!1);else{window.vk__adsLight=!1,t=parseInt(t);var o=VK.Api&&VK.Api.attachScript||VK.addScript,i=e.base_domain||VK._protocol+"//vk.com";o(i+"/js/al/aes_light.js?"+t)}}function s(t){if(t)for(var e in t){var o=t[e];"ads_ad_unit_width"===e||"ads_ad_unit_height"===e?e in w||(y[e]=parseInt(o)||"auto"===o&&w[e+"_auto"]||b[e]):e in y||(y[e]=o)}}function a(t){var e=d(y.ads_handler,t);if(0>=t&&e!==!0){try{console.log("VK: ad_unit_id = "+w.ads_ad_unit_id,", errorCode = ",t)}catch(o){}l(y.ads_handler_empty_html,y.ads_ad_unit_width,y.ads_ad_unit_height)}}function d(t){function e(t){return"[object Function]"===Object.prototype.toString.call(t)}function o(t){return"[object String]"===Object.prototype.toString.call(t)}var i=!1;try{if(!t)return!1;var n=!1;if(e(t))n=t;else if(o(t)){var r=t.split(".");n=window;for(var s=0,a=r.length;a>s&&(n=n[r[s]]);s++);if(!n){"function"===t.substr(0,8)&&(t="return "+t+";");var d=new Function(t)();e(d)?n=d:i=d}}if(n){var l=Array.prototype.slice.call(arguments,1);i=n.apply(n,l)}}catch(c){try{console.error(c)}catch(u){}}return i}function l(t,e,o){function i(){if(!o)try{var t=r.contentWindow.document.body.firstChild.getBoundingClientRect(),e=Math.ceil(t.bottom-t.top);e&&(r.style.height=e,v.style.height=e)}catch(i){}}if(t&&v){e=e?e+"px":"",o=o?o+"px":"";var n=\'<html><head></head><body style="padding: 0; margin: 0;"><div>\'+t+"</div></body></html>",r=document.createElement("iframe");r.onload=i,r.id=(h?h.id:"vkwidget-"+Math.round(1e6*Math.random()))+"_ads_html_handler",r.src="about:blank",r.width="100%",r.height="100%",r.scrolling="no",r.frameBorder="0",r.allowTransparency=!0,r.style.overflow="hidden",r.style.width=e,r.style.height=o,v.style.width=e,v.style.height=o,v.appendChild(r),r.contentWindow.vk_ads_html_handler=n,r.src=\'javascript:window["vk_ads_html_handler"]\'}}function c(t,e,o){for(var i=o||0,n=(t||[]).length;n>i;i++)if(t[i]==e)return i;return-1}function u(t,e){return-1!=c(e,t)}function p(t,e,o){v=t,h=e,f=o}e=e||{},o=o||{};var h,f,g={},m={},_={},v=document.getElementById(t),w={},y={},b={};for(var V in o){var K=u(V,["hash"])?V:"ads_"+V;w[K]=o[V]}if(v&&v.getBoundingClientRect){v.style.width="100%",v.style.height="100%";var x=v.getBoundingClientRect();v.style.width="",v.style.height="",w.ads_ad_unit_width_auto=Math.floor(x.right-x.left),w.ads_ad_unit_height_auto=Math.floor(x.bottom-x.top)}return b.ads_ad_unit_width=100,b.ads_ad_unit_height=100,y.ads_ad_unit_width=parseInt(w.ads_ad_unit_width)||"auto"===w.ads_ad_unit_width&&w.ads_ad_unit_width_auto||b.ads_ad_unit_width,y.ads_ad_unit_height=parseInt(w.ads_ad_unit_height)||"auto"===w.ads_ad_unit_height&&w.ads_ad_unit_height_auto||b.ads_ad_unit_height,w.ads_handler&&(y.ads_handler=w.ads_handler),w.ads_handler_empty_html&&(y.ads_handler_empty_html=w.ads_handler_empty_html),delete w.ads_handler,delete w.ads_handler_empty_html,g.act="ads_web",g.url=location.href,VK.extend(g,w),e.noDefaultParams=!0,e.width=y.ads_ad_unit_width,e.allowTransparency=!0,m.startHeight=y.ads_ad_unit_height,m.minWidth=y.ads_ad_unit_width,_.adsOnInitLoader=i,_.adsOnInit=n,VK.Widgets._constructor("ads_rotate.php",t,e,g,_,m,p)},VK.Widgets._constructor=function(t,e,o,i,n,r,s,a,d){var l=document.getElementById(e);if(a=a||++VK.Widgets.count,!l){if(d=d||0,d>10)throw Error("VK.Widgets: object #"+e+" not found.");return setTimeout(function(){VK.Widgets._constructor(t,e,o,i,n,r,s,a,d+1)},500),a\n}var c,u,p,h,f,g,m,_;o=o||{},r=r||{},n=n||{},c=o.base_domain||VK._protocol+"//vk.com",u="auto"==o.width?l.clientWidth||"100%":parseInt(o.width,10),o.height?(i.height=o.height,l.style.height=o.height+"px"):l.style.height=(r.startHeight||200)+"px",u=u?Math.max(r.minWidth||200,Math.min(1e4,u))+"px":"100%",i.url||(i.url=o.pageUrl||location.href.replace(/#.*$/,"")),p=c+"/"+t,h="",o.noDefaultParams||(h+="&app="+(VK._apiId||"0")+"&width="+u),h+="&_ver="+VK.version,VK._iframeAppWidget&&(i.iframe_app=1);for(_ in i){if("title"==_&&i[_].length>80&&(i[_]=i[_].substr(0,80)+"..."),"description"==_&&i[_].length>160&&(i[_]=i[_].substr(0,160)+"..."),"number"==typeof i[_])f=i[_];else try{f=encodeURIComponent(i[_])}catch(v){f=""}h+="&"+_+"="+f}return h+="&"+(+new Date).toString(16),p+="?"+h.substr(1),l.style.width=u,VK.Widgets.loading(l,!0),n.publish=function(){var t=Array.prototype.slice.call(arguments);t.push(a),VK.Observer.publish.apply(VK.Observer,t)},n.onInit=function(){VK.Widgets.loading(l,!1),n.onReady&&n.onReady(),o.onReady&&o.onReady()},n.resize=function(t){l.style.height=t+"px";var e=document.getElementById("vkwidget"+a);e&&(e.style.height=t+"px")},n.resizeWidget=function(t,e){t=parseInt(t),e=parseInt(e);var i=document.getElementById("vkwidget"+a);isFinite(t)&&(l.style.width=t+"px",i&&(i.style.width=t+"px")),isFinite(e)&&(l.style.height=e+"px",i&&(i.style.height=e+"px")),o.onResizeWidget&&o.onResizeWidget()},n.updateVersion=function(t){t>1&&VK.Api.attachScript("//vk.com/js/api/openapi_update.js?"+parseInt(t))},g=VK.Widgets.RPC[a]=new fastXDM.Server(n,function(t){return t?(t=t.toLowerCase(),t.match(/(\\.|\\/)vk\\.com($|\\/|\\?)/)):!0},{safe:!0}),m=VK.Widgets.RPC[a].append(l,{src:p,width:-1!=u.indexOf("%")?u:parseInt(u)||u,height:r.startHeight||"100%",scrolling:"no",id:"vkwidget"+a,allowTransparency:o.allowTransparency||!1,style:{overflow:"hidden"}}),s&&setTimeout(function(){s(l,m||l.firstChild,g)},10),a}),VK.Util||(VK.Util={getPageData:function(){if(!VK._pData){var t,e=document.getElementsByTagName("meta"),o={},i=["description","title","url","image","app_id"];for(var n in e)if(e[n].getAttribute&&e[n].getAttribute&&((t=e[n].getAttribute("name"))||(t=e[n].getAttribute("property"))))for(var r in i)(t==i[r]||t=="og:"+i[r]||t=="vk:"+i[r])&&(o[i[r]]=e[n].content);o.app_id&&!VK._apiId&&(VK._apiId=o.app_id),o.title=o.title||document.title||"",o.description=o.description||"",o.image=o.image||"",!o.url&&VK._iframeAppWidget&&VK._apiId&&(o.url="/app"+VK._apiId,VK._browserHash&&(o.url+=VK._browserHash));var s=location.href.replace(/#.*$/,"");o.url&&o.url.indexOf(s)||(o.url=s),VK._pData=o}return VK._pData},getStyle:function(t,e){var o,i=document.defaultView||window;if(i.getComputedStyle){e=e.replace(/([A-Z])/g,"-$1").toLowerCase();var n=i.getComputedStyle(t,null);n&&(o=n.getPropertyValue(e))}else if(t.currentStyle){var r=e.replace(/\\-(\\w)/g,function(t,e){return e.toUpperCase()});o=t.currentStyle[e]||t.currentStyle[r]}return o},getXY:function(t,e){if(t&&void 0!==t){var o=0,i=0;if(void 0!==t.getBoundingClientRect){var n=t.getBoundingClientRect();o=n.left,i=n.top,e=!0}else if(t.offsetParent)do o+=t.offsetLeft,i+=t.offsetTop,e&&(o-=t.scrollLeft,i-=t.scrollTop);while(t=t.offsetParent);return e&&(i+=window.pageYOffset||window.scrollNode&&scrollNode.scrollTop||document.documentElement.scrollTop,o+=window.pageXOffset||window.scrollNode&&scrollNode.scrollLeft||document.documentElement.scrollLeft),[o,i]}},Box:function(t,e,o){o=o||{};var i=document.body.style.overflow,n=document.createElement("DIV"),r=new fastXDM.Server(VK.extend(o,{onInit:function(){s.style.background="transparent",s.style.visibility="visible",document.body.style.overflow="hidden",document.body.removeChild(n)},hide:function(){s.style.display="none"},tempHide:function(){s.style.left="-10000px",s.style.top="-10000px",s.style.width="10px",s.style.height="10px",document.body.style.overflow=i},destroy:function(){try{s.src="about: blank;"}catch(t){}s.parentNode.removeChild(s),document.body.style.overflow=i},resize:function(){}},!0),!1,{safe:!0}),s=r.append(document.body,{src:t.replace(/&amp;/g,"&"),scrolling:"no",allowTransparency:!0,style:{position:"fixed",left:0,top:0,zIndex:1002,background:VK._protocol+"//vk.com/images/upload.gif center center no-repeat transparent",padding:"0",border:"0",width:"100%",height:"100%",overflow:"hidden",visibility:"hidden"}});return n.innerHTML=\'<div style="position: fixed;left: 50%;top: 50%;margin: 0px auto 0px -60px;z-index: 1002;width: 100px;"><div style="background: url(//vk.com/images/upload_inv_mono\'+(window.devicePixelRatio>=2?"_2x":"")+\'.gif) no-repeat 50% 50%;background-size: 64px 16px;height: 50px;position: absolute;width: 100%;z-index: 100;"></div><div style="background-color: #000;opacity: 0.7;filter: alpha(opacity=70);height: 50px;-webkit-border-radius: 5px;-khtml-border-radius: 5px;-moz-border-radius: 5px;border-radius: 5px;-webkit-box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.35);-moz-box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.35);box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.35);"></div></div>\',document.body.insertBefore(n,document.body.firstChild),{show:function(){s.style.display="block",document.body.style.overflow="hidden"},hide:function(){s.style.display="none",document.body.style.overflow=i},iframe:s,rpc:r}},addEvent:function(t,e){window.document.addEventListener?window.document.addEventListener(t,e,!1):window.document.attachEvent&&window.document.attachEvent("on"+t,e)},removeEvent:function(t,e){window.document.removeEventListener?window.document.removeEventListener(t,e,!1):window.document.detachEvent&&window.document.detachEvent("on"+t,e)},ss:function(t,e){VK.extend(t.style,e,!0)}}),window.vkAsyncInit&&setTimeout(vkAsyncInit,0),window.vkAsyncInitCallbacks&&vkAsyncInitCallbacks.length&&setTimeout(function(){for(var t;t=vkAsyncInitCallbacks.pop();)try{t()}catch(e){try{console.error(e)}catch(o){}}},0);try{window.stManager&&stManager.done("api/openapi.js")}catch(e){}',{address:"vk-openapi",metadata:{deps:[],format:"global"}});

/*js/plugins/social/vk/vk_sdk*/
System.define("js/plugins/social/vk/vk_sdk",'!function(t){function e(){var t="";for(i=0;i<5;i++)t+=Math.ceil(15*Math.random()).toString(16);return t}function o(t,e,i,n,r){t[e]?i.apply(n):(r=r||0,1e3>r&&setTimeout(function(){o(t,e,i,n,r+1)},0))}function n(e){setTimeout(function(){var i=document.createElement("script");i.type="text/javascript",i.src=e||t.fastXDM.helperUrl,o(document,"body",function(){document.getElementsByTagName("HEAD")[0].appendChild(i)})},0)}function r(t,e){switch(typeof t){case"string":return e?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/\'/g,"&#039;"):t.replace(/&#039;/g,"\'").replace(/&quot;/g,\'"\').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&");case"object":if("[object Array]"===Object.prototype.toString.apply(t)){newValue=[];for(var o=0;o<t.length;o++)newValue[o]=r(t[o],e)}else for(var i in t)newValue={},Object.hasOwnProperty.call(t,i)&&(newValue[i]=r(t[i],e));default:newValue=t}return newValue}function s(t,e){p.loaded?t.apply(e,[p]):u.push([e,t])}function a(){p.loaded=!0;for(var t=u.length;t--;)u[t][1].apply(u[t][0],[p])}function d(t,e){s(function(o){var i=o.json.parse(t);if(i[0]){i[1]||(i[1]=[]);for(var n=i[1].length;n--;)if(i[1][n]._func){var s=i[1][n]._func;i[1][n]=function(){var t=Array.prototype.slice.call(arguments);t.unshift("_func"+s),e.callMethod.apply(e,t)}}else e.options.safe&&(i[1][n]=r(i[1][n],!0));setTimeout(function(){if(!e.methods[i[0]])throw Error("fastXDM: Method "+i[0]+" is undefined");e.methods[i[0]].apply(e,i[1])},0)}})}function l(t,e){for(var o in e)t[o]&&"object"==typeof t[o]?l(t[o],e[o]):t[o]=e[o]}if(!t.fastXDM){var c={},u=[],p={};t.fastXDM={_id:0,helperUrl:("https:"===location.protocol?"https:":"http:")+"//vk.com/js/api/xdmHelper.js",Server:function(o,i,n){this.methods=o||{},this.id=t.fastXDM._id++,this.options=n||{},this.filter=i,this.key=e(),this.methods["%init%"]=this.methods.__fxdm_i=function(){t.fastXDM.run(this.id),this.methods.onInit&&this.methods.onInit()},this.frameName="fXD"+this.key,this.server=!0,c[this.key]=[d,this]},Client:function(e,o){if(this.methods=e||{},this.id=t.fastXDM._id++,this.options=o||{},t.fastXDM.run(this.id),0!==window.name.indexOf("fXD"))throw Error("Wrong window.name property.");this.key=window.name.substr(3),this.caller=window.parent,c[this.key]=[d,this],this.client=!0,t.fastXDM.on("helper",function(){t.fastXDM.onClientStart(this)},this),s(function(t){t.send(this,t.json.stringify(["%init%"]));var e=this.methods;setTimeout(function(){e.onInit&&e.onInit()},0)},this)},onMessage:function(t){if(!t.data)return!1;var e=t.data;if("string"!=typeof e&&!(e instanceof String))return!1;var o=e.substr(0,5);if(c[o]){var i=c[o][1];!i||i.filter&&!i.filter(t.origin)||c[o][0](t.data.substr(6),i)}},setJSON:function(t){p.json=t},getJSON:function(t){return t?void s(function(e){t(e.json)}):p.json},setEnv:function(t){var e;for(e in t)p[e]=t[e];a()},_q:{},on:function(t,e,o){this._q[t]||(this._q[t]=[]),-1==this._q[t]?e.apply(o):this._q[t].push([e,o])},run:function(t){var e=(this._q[t]||[]).length;if(this._q[t]&&e>0)for(var o=0;e>o;o++)this._q[t][o][0].apply(this._q[t][o][1]);this._q[t]=-1},waitFor:o},t.fastXDM.Server.prototype.start=function(e,o){if(e.contentWindow)this.caller=e.contentWindow,this.frame=e,t.fastXDM.on("helper",function(){t.fastXDM.onServerStart(this)},this);else{var i=this;o=o||0,50>o&&setTimeout(function(){i.start.apply(i,[e,o+1])},100)}},t.fastXDM.Server.prototype.destroy=function(){c.splice(c.indexOf(this.key),1)},t.fastXDM.Server.prototype.append=function(t,e){var o=document.createElement("DIV");o.innerHTML=\'<iframe name="\'+this.frameName+\'" ></iframe>\';var i=o.firstChild,n=this;return setTimeout(function(){i.frameBorder="0",e&&l(i,e),t.insertBefore(i,t.firstChild),n.start(i)},0),i},t.fastXDM.Client.prototype.callMethod=t.fastXDM.Server.prototype.callMethod=function(){for(var e=Array.prototype.slice.call(arguments),i=e.shift(),n=e.length;n--;)if("function"==typeof e[n]){this.funcsCount=(this.funcsCount||0)+1;var a=e[n],d="_func"+this.funcsCount;this.methods[d]=function(){a.apply(this,arguments),delete this.methods[d]},e[n]={_func:this.funcsCount}}else this.options.safe&&(e[n]=r(e[n],!1));o(this,"caller",function(){t.fastXDM.on(this.id,function(){s(function(t){t.send(this,t.json.stringify([i,e]))},this)},this)},this)},t.JSON&&"object"==typeof t.JSON&&t.JSON.parse&&t.JSON.stringify&&\'{"a":[1,2,3]}\'==t.JSON.stringify({a:[1,2,3]}).replace(/ /g,"")?p.json={parse:t.JSON.parse,stringify:t.JSON.stringify}:t.fastXDM._needJSON=!0,t.postMessage?(p.protocol="p",p.send=function(t,e){var o=t.frame?t.frame.contentWindow:t.caller;o.postMessage(t.key+":"+e,"*")},t.addEventListener?t.addEventListener("message",t.fastXDM.onMessage,!1):t.attachEvent("onmessage",t.fastXDM.onMessage),t.fastXDM._needJSON?(t.fastXDM._onlyJSON=!0,n()):a()):n()}}(window),window.VK||(window.VK={}),VK.MD5||(VK.MD5=function(t){var e=function(t,e){var o=(65535&t)+(65535&e),i=(t>>16)+(e>>16)+(o>>16);return i<<16|65535&o},o=function(t,e){return t<<e|t>>>32-e},i=function(t,i,n,r,s,a){return e(o(e(e(i,t),e(r,a)),s),n)},n=function(t,e,o,n,r,s,a){return i(e&o|~e&n,t,e,r,s,a)},r=function(t,e,o,n,r,s,a){return i(e&n|o&~n,t,e,r,s,a)},s=function(t,e,o,n,r,s,a){return i(e^o^n,t,e,r,s,a)},a=function(t,e,o,n,r,s,a){return i(o^(e|~n),t,e,r,s,a)},d=function(t,o){var i,d,l,c,u=1732584193,p=-271733879,h=-1732584194,f=271733878;t[o>>5]|=128<<o%32,t[(o+64>>>9<<4)+14]=o;for(var g=0,m=t.length;m>g;g+=16)i=u,d=p,l=h,c=f,u=n(u,p,h,f,t[g+0],7,-680876936),f=n(f,u,p,h,t[g+1],12,-389564586),h=n(h,f,u,p,t[g+2],17,606105819),p=n(p,h,f,u,t[g+3],22,-1044525330),u=n(u,p,h,f,t[g+4],7,-176418897),f=n(f,u,p,h,t[g+5],12,1200080426),h=n(h,f,u,p,t[g+6],17,-1473231341),p=n(p,h,f,u,t[g+7],22,-45705983),u=n(u,p,h,f,t[g+8],7,1770035416),f=n(f,u,p,h,t[g+9],12,-1958414417),h=n(h,f,u,p,t[g+10],17,-42063),p=n(p,h,f,u,t[g+11],22,-1990404162),u=n(u,p,h,f,t[g+12],7,1804603682),f=n(f,u,p,h,t[g+13],12,-40341101),h=n(h,f,u,p,t[g+14],17,-1502002290),p=n(p,h,f,u,t[g+15],22,1236535329),u=r(u,p,h,f,t[g+1],5,-165796510),f=r(f,u,p,h,t[g+6],9,-1069501632),h=r(h,f,u,p,t[g+11],14,643717713),p=r(p,h,f,u,t[g+0],20,-373897302),u=r(u,p,h,f,t[g+5],5,-701558691),f=r(f,u,p,h,t[g+10],9,38016083),h=r(h,f,u,p,t[g+15],14,-660478335),p=r(p,h,f,u,t[g+4],20,-405537848),u=r(u,p,h,f,t[g+9],5,568446438),f=r(f,u,p,h,t[g+14],9,-1019803690),h=r(h,f,u,p,t[g+3],14,-187363961),p=r(p,h,f,u,t[g+8],20,1163531501),u=r(u,p,h,f,t[g+13],5,-1444681467),f=r(f,u,p,h,t[g+2],9,-51403784),h=r(h,f,u,p,t[g+7],14,1735328473),p=r(p,h,f,u,t[g+12],20,-1926607734),u=s(u,p,h,f,t[g+5],4,-378558),f=s(f,u,p,h,t[g+8],11,-2022574463),h=s(h,f,u,p,t[g+11],16,1839030562),p=s(p,h,f,u,t[g+14],23,-35309556),u=s(u,p,h,f,t[g+1],4,-1530992060),f=s(f,u,p,h,t[g+4],11,1272893353),h=s(h,f,u,p,t[g+7],16,-155497632),p=s(p,h,f,u,t[g+10],23,-1094730640),u=s(u,p,h,f,t[g+13],4,681279174),f=s(f,u,p,h,t[g+0],11,-358537222),h=s(h,f,u,p,t[g+3],16,-722521979),p=s(p,h,f,u,t[g+6],23,76029189),u=s(u,p,h,f,t[g+9],4,-640364487),f=s(f,u,p,h,t[g+12],11,-421815835),h=s(h,f,u,p,t[g+15],16,530742520),p=s(p,h,f,u,t[g+2],23,-995338651),u=a(u,p,h,f,t[g+0],6,-198630844),f=a(f,u,p,h,t[g+7],10,1126891415),h=a(h,f,u,p,t[g+14],15,-1416354905),p=a(p,h,f,u,t[g+5],21,-57434055),u=a(u,p,h,f,t[g+12],6,1700485571),f=a(f,u,p,h,t[g+3],10,-1894986606),h=a(h,f,u,p,t[g+10],15,-1051523),p=a(p,h,f,u,t[g+1],21,-2054922799),u=a(u,p,h,f,t[g+8],6,1873313359),f=a(f,u,p,h,t[g+15],10,-30611744),h=a(h,f,u,p,t[g+6],15,-1560198380),p=a(p,h,f,u,t[g+13],21,1309151649),u=a(u,p,h,f,t[g+4],6,-145523070),f=a(f,u,p,h,t[g+11],10,-1120210379),h=a(h,f,u,p,t[g+2],15,718787259),p=a(p,h,f,u,t[g+9],21,-343485551),u=e(u,i),p=e(p,d),h=e(h,l),f=e(f,c);return[u,p,h,f]},l=function(t){for(var e,o,i="",n=-1,r=t.length;++n<r;)e=t.charCodeAt(n),o=r>n+1?t.charCodeAt(n+1):0,e>=55296&&56319>=e&&o>=56320&&57343>=o&&(e=65536+((1023&e)<<10)+(1023&o),n++),127>=e?i+=String.fromCharCode(e):2047>=e?i+=String.fromCharCode(192|e>>>6&31,128|63&e):65535>=e?i+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):2097151>=e&&(i+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return i},c=function(t){var e,o,i=Array(t.length>>2);for(e=0,o=i.length;o>e;e++)i[e]=0;for(e=0,o=8*t.length;o>e;e+=8)i[e>>5]|=(255&t.charCodeAt(e/8))<<e%32;return i},u=function(t){for(var e="",o=0,i=32*t.length;i>o;o+=8)e+=String.fromCharCode(t[o>>5]>>>o%32&255);return e},p=function(t){return u(d(c(t),8*t.length))},h=function(t){for(var e,o="0123456789abcdef",i="",n=0,r=t.length;r>n;n++)e=t.charCodeAt(n),i+=o.charAt(e>>>4&15)+o.charAt(15&e);return i};return h(p(l(t)))}),VK.extend=function(t,e,o){for(var i in e)(o||"undefined"==typeof t[i])&&(t[i]=e[i]);return t},"https:"!==VK._protocol&&(VK._protocol="https:"===location.protocol?"https:":"http:"),VK.xdConnectionCallbacks?(setTimeout(function(){for(var t;t=VK.xdConnectionCallbacks.pop();)t()},0),VK.Widgets&&!VK.Widgets._constructor&&(VK.Widgets=!1)):(VK.extend(VK,{version:1,_apiId:null,_session:null,_userStatus:"unknown",_domain:{main:"https://oauth.vk.com/",api:"https://api.vk.com/"},_path:{login:"authorize",proxy:"fxdm_oauth_proxy.html"},_rootId:"vk_api_transport",_nameTransportPath:"",xdReady:!1,access:{FRIENDS:2,PHOTOS:4,AUDIO:8,VIDEO:16,MATCHES:32,QUESTIONS:64,WIKI:128}}),VK.init=function(t){var e,o;if(VK._apiId=null,!t.apiId)throw Error("VK.init() called without an apiId");if(VK._apiId=t.apiId,t.onlyWidgets)return!0;t.nameTransportPath&&""!==t.nameTransportPath&&(VK._nameTransportPath=t.nameTransportPath),o=document.getElementById(VK._rootId),o||(o=document.createElement("div"),o.id=VK._rootId,e=document.getElementsByTagName("body")[0],e.insertBefore(o,e.childNodes[0])),o.style.position="absolute",o.style.top="-10000px";var i=VK.Cookie.load();i&&(VK.Auth._loadState="loaded",VK.Auth.setSession(i,i?"connected":"unknown"))},VK.Cookie||(VK.Cookie={_domain:null,load:function(){var t,e=document.cookie.match("\\\\bvk_app_"+VK._apiId+"=([^;]*)\\\\b");if(e){if(t=this.decode(e[1]),"oauth"!=t.secret)return!1;t.expire=parseInt(t.expire,10),VK.Cookie._domain="."+window.location.hostname}return t},setRaw:function(t,e,o,i){var n;n="vk_app_"+VK._apiId+"="+t;var r=i?(new Date).getTime()+1e3*i:1e3*e;n+=t&&0===e?"":"; expires="+new Date(r).toGMTString(),n+="; path=/",n+=o?"; domain=."+o:"",document.cookie=n,this._domain=o},set:function(t,e){t?this.setRaw(this.encode(t),t.expire,window.location.hostname,(e||{}).time):this.clear()},clear:function(){this.setRaw("",0,this._domain,0)},encode:function(t){var e,o=[];for(e in t)"user"!=e&&o.push(encodeURIComponent(e)+"="+encodeURIComponent(t[e]));return o.sort(),o.join("&")},decode:function(t){var e,o,i={},n=t.split("&");for(e=0;e<n.length;e++)o=n[e].split("=",2),o&&o[0]&&(i[decodeURIComponent(o[0])]=decodeURIComponent(o[1]));return i}}),VK.Api||(VK.Api={_headId:null,_callbacks:{},ie6_7:function(){return VK.Api.ieTested||(VK.Api.isIE6_7=navigator.userAgent.match(/MSIE [6|7]/i),VK.Api.ieTested=!0),VK.Api.isIE6_7},attachScript:function(t){VK.Api._headId||(VK.Api._headId=document.getElementsByTagName("head")[0]);var e=document.createElement("script");e.type="text/javascript",e.setAttribute("encoding","UTF-8"),e.src=t,VK.Api._headId.appendChild(e)},checkMethod:function(t,e,o,i){var n=t.toLowerCase();if("wall.post"==n||"activity.set"==n){var r="activity.set"==n?e.text:e.message;r||(r="");var s=VK._protocol+"//vk.com/al_apps.php?act=wall_post_box&widget=1&method="+n+"&aid="+parseInt(VK._apiId,10)+"&text="+encodeURIComponent(r);"wall.post"==n&&(s+="&owner_id="+parseInt(e.owner_id||0,10)+"&attachments="+(e.attachments||e.attachment||"")+"&publish_date="+(e.publish_date||""));var a="_"+Math.random().toString(16).substr(2);s+="&method_access="+a;var d=(VK.UI.popup({url:s,width:460,height:249}),setInterval(function(){VK.UI.active.closed&&(clearInterval(d),e.method_access=a,VK.Api.call(t,e,o,i))},500));return!1}return!0},call:function(t,e,o,i){var n,r,s=e||{};if("object"!=typeof s||"function"!=typeof o)return!1;if(e.method_access||e.method_force||VK.Api.checkMethod(t,e,o,i)){if(i||(i=0),"loaded"!=VK.Auth._loadState){var a=function(i){i&&i.session&&(VK.Observer.unsubscribe("auth.loginStatus",a),VK.Api.call(t,e,o))};return VK.Observer.subscribe("auth.loginStatus",a),void VK.Auth.getLoginStatus()}if(VK.Api.queryLength(s)<1500&&!VK.Api.ie6_7()){for(var d=!1,l=parseInt(1e7*Math.random(),10);VK.Api._callbacks[l];)l=parseInt(1e7*Math.random(),10);s.callback="VK.Api._callbacks["+l+"]"}else var d=!0;VK._session&&VK._session.sid&&(s.access_token=VK._session.sid),n=VK.Cookie.encode(s),r=function(n){if(!n.error||3!=n.error.error_code&&4!=n.error.error_code&&5!=n.error.error_code)o(n);else{if(i>3)return!1;var r=function(n){VK.Observer.unsubscribe("auth.sessionChange",r),delete e.access_token,n.session&&VK.Api.call(t,e,o,i+1)};VK.Observer.subscribe("auth.sessionChange",r),VK.Auth.getLoginStatus()}d||delete VK.Api._callbacks[l]},d?VK.xdReady?VK.XDM.remote.callMethod("apiCall",t,n,r):(VK.Observer.subscribe("xdm.init",function(){VK.XDM.remote.callMethod("apiCall",t,n,r)}),VK.XDM.init()):(VK.Api._callbacks[l]=r,VK.Api.attachScript(VK._domain.api+"method/"+t+"?"+n))}},queryLength:function(t){var e,o=100;for(e in t)o+=e.length+encodeURIComponent(t[e]).length+1;return o}},VK.api=function(t,e,o){VK.Api.call(t,e,o)}),VK.Auth||(VK.Auth={popup:null,lsCb:{},setSession:function(t,e,o,i){var n=!VK._session&&t,r=VK._session&&!t,s=VK._session&&t&&VK._session.mid!=t.mid,a=n||r||VK._session&&t&&VK._session.sid!=t.sid,d=e!=VK._userStatus,l={session:t,status:e,settings:o};return VK._session=t,VK._userStatus=e,VK.Cookie.set(t,i),(a||d||s)&&setTimeout(function(){d&&VK.Observer.publish("auth.statusChange",l),(r||s)&&VK.Observer.publish("auth.logout",l),(n||s)&&VK.Observer.publish("auth.login",l),a&&VK.Observer.publish("auth.sessionChange",l)},0),l},login:function(t,e){var o,i;if(!VK._apiId)return!1;o=window.location.protocol+"//"+window.location.hostname,i=VK._domain.main+VK._path.login+"?client_id="+VK._apiId+"&display=popup&redirect_uri=close.html&response_type=token",e&&parseInt(e,10)>0&&(i+="&scope="+e),VK.Observer.unsubscribe("auth.onLogin"),VK.Observer.subscribe("auth.onLogin",t),VK.UI.popup({width:665,height:370,url:i});var n=function(){VK.Auth.getLoginStatus(function(t){VK.Observer.publish("auth.onLogin",t),VK.Observer.unsubscribe("auth.onLogin")},!0)};VK.UI.popupOpened=!0;var r=function(){if(!VK.UI.popupOpened)return!1;try{if(!VK.UI.active.top||VK.UI.active.closed)return VK.UI.popupOpened=!1,n(),!0}catch(t){return VK.UI.popupOpened=!1,n(),!0}setTimeout(r,100)};setTimeout(r,100)},logout:function(t){VK.Auth.revokeGrants(t)},revokeGrants:function(t){var e=function(o){VK.Observer.unsubscribe("auth.statusChange",e),t&&t(o)};VK.Observer.subscribe("auth.statusChange",e),VK._session&&VK._session.sid&&VK.Api.attachScript("https://login.vk.com/?act=openapi&oauth=1&aid="+parseInt(VK._apiId,10)+"&location="+encodeURIComponent(window.location.hostname)+"&do_logout=1&token="+VK._session.sid),VK.Cookie.clear()},getSession:function(){return VK._session},getLoginStatus:function(t,e){if(VK._apiId){if(t){if(!e&&"loaded"==VK.Auth._loadState)return void t({status:VK._userStatus,session:VK._session});VK.Observer.subscribe("auth.loginStatus",t)}if(e||"loading"!=VK.Auth._loadState){VK.Auth._loadState="loading";for(var o=parseInt(1e7*Math.random(),10);VK.Auth.lsCb[o];)o=parseInt(1e7*Math.random(),10);VK.Auth.lsCb[o]=function(t){if(delete VK.Auth.lsCb[o],VK.Auth._loadState="loaded",t&&t.auth){var i={mid:t.user.id,sid:t.access_token,sig:t.sig,secret:t.secret,expire:t.expire};e&&(i.user=t.user);var n="connected"}else{var i=null,n=t.user?"logined":"unknown";VK.Cookie.clear()}VK.Auth.setSession(i,n,!1,t),VK.Observer.publish("auth.loginStatus",{session:i,status:n}),VK.Observer.unsubscribe("auth.loginStatus")},VK.Api.attachScript("https://login.vk.com/?act=openapi&oauth=1&aid="+parseInt(VK._apiId,10)+"&location="+encodeURIComponent(window.location.hostname)+"&rnd="+o)}}}})),VK.UI||(VK.UI={active:null,_buttons:[],popup:function(t){var e="undefined"!=typeof window.screenX?window.screenX:window.screenLeft,o="undefined"!=typeof window.screenY?window.screenY:window.screenTop,i="undefined"!=typeof window.outerWidth?window.outerWidth:document.body.clientWidth,n="undefined"!=typeof window.outerHeight?window.outerHeight:document.body.clientHeight-22,r=t.width,s=t.height,a=parseInt(e+(i-r)/2,10),d=parseInt(o+(n-s)/2.5,10),l="width="+r+",height="+s+",left="+a+",top="+d;this.active=window.open(t.url,"vk_openapi",l)},button:function(t){var e="";"string"==typeof t&&(t=document.getElementById(t)),this._buttons.push(t),index=this._buttons.length-1,e=\'<table cellspacing="0" cellpadding="0" id="openapi_UI_\'+index+\'" onmouseover="VK.UI._change(1, \'+index+\');" onmouseout="VK.UI._change(0, \'+index+\');" onmousedown="VK.UI._change(2, \'+index+\');" onmouseup="VK.UI._change(1, \'+index+\');" style="cursor: pointer; border: 0px; font-family: tahoma, arial, verdana, sans-serif, Lucida Sans; font-size: 10px;"><tr style="vertical-align: middle"><td><div style="border: 1px solid #3b6798;border-radius: 2px 0px 0px 2px;-moz-border-radius: 2px 0px 0px 2px;-webkit-border-radius: 2px 0px 0px 2px;"><div style="border: 1px solid #5c82ab; border-top-color: #7e9cbc; background-color: #6D8DB1; color: #fff; text-shadow: 0px 1px #45688E; height: 15px; padding: 2px 4px 0px 6px;line-height: 13px;">&#1042;&#1086;&#1081;&#1090;&#1080;</div></div></td><td><div style="background: url(\'+VK._protocol+\'//vk.com/images/btns.png) 0px -42px no-repeat; width: 21px; height: 21px"></div></td><td><div style="border: 1px solid #3b6798;border-radius: 0px 2px 2px 0px;-moz-border-radius: 0px 2px 2px 0px;-webkit-border-radius: 0px 2px 2px 0px;"><div style="border: 1px solid #5c82ab; border-top-color: #7e9cbc; background-color: #6D8DB1; color: #fff; text-shadow: 0px 1px #45688E; height: 15px; padding: 2px 6px 0px 4px;line-height: 13px;">&#1050;&#1086;&#1085;&#1090;&#1072;&#1082;&#1090;&#1077;</div></div></td></tr></table>\',t.innerHTML=e,t.style.width=t.childNodes[0].offsetWidth+"px"},_change:function(t,e){for(var o=document.getElementById("openapi_UI_"+e).rows[0],i=[o.cells[0].firstChild.firstChild,o.cells[2].firstChild.firstChild],n=0;2>n;++n){var r=i[n];0===t?(r.style.backgroundColor="#6D8DB1",r.style.borderTopColor="#7E9CBC",r.style.borderLeftColor=r.style.borderRightColor=r.style.borderBottomColor="#5C82AB"):1==t?(r.style.backgroundColor="#7693B6",r.style.borderTopColor="#88A4C4",r.style.borderLeftColor=r.style.borderRightColor=r.style.borderBottomColor="#6088B4"):2==t&&(r.style.backgroundColor="#6688AD",r.style.borderBottomColor="#7495B8",r.style.borderLeftColor=r.style.borderRightColor=r.style.borderTopColor="#51779F")}0===t||2==t?o.cells[2].firstChild.style.backgroundPosition="0px -42px":1==t&&(o.cells[2].firstChild.style.backgroundPosition="0px -63px")}}),VK.XDM||(VK.XDM={remote:null,init:function(){if(this.remote)return!1;var t=VK._domain.api+VK._path.proxy;this.remote=new fastXDM.Server({onInit:function(){VK.xdReady=!0,VK.Observer.publish("xdm.init")}}),this.remote.append(document.getElementById(VK._rootId),{src:t})},xdHandler:function(code){try{eval("VK."+code)}catch(e){}}}),VK.Observer||(VK.Observer={_subscribers:function(){return this._subscribersMap||(this._subscribersMap={}),this._subscribersMap},publish:function(t){var e,o,i=Array.prototype.slice.call(arguments),t=i.shift(),n=this._subscribers()[t];if(n)for(e=0,o=n.length;o>e;e++)null!=n[e]&&n[e].apply(this,i)},subscribe:function(t,e){var o=this._subscribers();return"function"!=typeof e?!1:void(o[t]?o[t].push(e):o[t]=[e])},unsubscribe:function(t,e){var o,i,n=this._subscribers()[t];if(!n)return!1;if("function"==typeof e)for(o=0,i=n.length;i>o;o++)n[o]==e&&(n[o]=null);else delete this._subscribers()[t]}}),VK.Widgets||(VK.Widgets={},VK.Widgets.count=0,VK.Widgets.RPC={},VK.Widgets.loading=function(t,e){t.style.background=e?\'url("\'+VK._protocol+\'//vk.com/images/upload.gif") center center no-repeat transparent\':"none"},VK.Widgets.Comments=function(t,e,o){var i=VK.Util.getPageData();if(!VK._apiId)throw Error("VK not initialized. Please use VK.init");e=e||{};var n,r,s={limit:e.limit||10,height:e.height||0,mini:void 0===e.mini?"auto":e.mini,norealtime:e.norealtime?1:0},a=function(){return r.callMethod("mouseUp"),!1},d=function(t){r.callMethod("mouseMove",{screenY:t.screenY})};if(e.browse)s.browse=1,s.replies=e.replies||0;else{var l=e.pageUrl||i.url;"/"==l.substr(0,1)&&(l=location.protocol+"//"+location.host+l),VK.extend(s,{page:o||0,status_publish:void 0===e.autoPublish?1:e.autoPublish,attach:void 0===e.attach?"*":e.attach?e.attach:"",url:l,title:e.pageTitle||i.title,description:e.pageDescription||i.description,image:e.pageImage||i.image})}return e.onChange&&(VK.Observer.subscribe("widgets.comments.new_comment",e.onChange),VK.Observer.subscribe("widgets.comments.delete_comment",e.onChange)),VK.Widgets._constructor("widget_comments.php",t,e,s,{showBox:function(t){var o=VK.Util.Box((e.base_domain||VK._protocol+"//vk.com")+"/"+t,[],{proxy:function(){r.callMethod.apply(r,arguments)}});o.show()},startDrag:function(){cursorBack=window.document.body.style.cursor,window.document.body.style.cursor="pointer",VK.Util.addEvent("mousemove",d),VK.Util.addEvent("mouseup",a)},stopDrag:function(){window.document.body.style.cursor=cursorBack,VK.Util.removeEvent("mousemove",d),VK.Util.removeEvent("mouseup",a)}},{startHeight:133,minWidth:300,width:"100%"},function(t,e,o){n=e,r=o})},VK.Widgets.CommentsBrowse=function(t,e){return e=e||{},e.browse=1,VK.Widgets.Comments(t,e)},VK.Widgets.Recommended=function(t,e){VK.Util.getPageData();if(!VK._apiId)throw Error("VK not initialized. Please use VK.init");e=e||{};var o={limit:e.limit||5,max:e.max||0,sort:e.sort||"friend_likes",verb:e.verb||0,period:e.period||"week",target:e.target||"parent"};return VK.Widgets._constructor("widget_recommended.php",t,e,o,{},{startHeight:90+30*o.limit,minWidth:150,width:"100%"})},VK.Widgets.Post=function(t,e,o,i,n){n=n||{};var r,s,a,d={owner_id:e,post_id:o,hash:i||"",width:n.width||500};return VK.Widgets._constructor("widget_post.php",t,n,d,{showBox:function(t){var e=VK.Util.Box((n.base_domain||VK._protocol+"//vk.com")+"/"+t,[],{proxy:function(){s.callMethod.apply(s,arguments)}});e.show()},startDrag:function(){a=window.document.body.style.cursor,window.document.body.style.cursor="pointer"},stopDrag:function(){window.document.body.style.cursor=a}},{startHeight:90,minWidth:250,width:"100%"},function(t,e,o){r=e,s=o})},VK.Widgets.Like=function(t,e,o){function i(t){if((y||t)&&u&&c&&u&&("none"==c.style.display||"yes"==c.getAttribute("vkhidden"))){var o=e.getScrollTop?e.getScrollTop():document.body.scrollTop||document.documentElement.scrollTop||0,i=VK.Util.getXY(a,e.fixed),n=w?0:i[1];o>i[1]-120&&"top"!=e.tooltipPos||"vertical"==f||"bottom"==e.tooltipPos?(c.style.top=n+_+2+"px",u.callMethod("show",!1)):(c.style.top=n-125+"px",u.callMethod("show",!0)),VK.Util.ss(c,{left:(w?0:i[0])-("vertical"==f||"mini"==f?36:2)+"px",display:"block",opacity:1,filter:"none"}),c.setAttribute("vkhidden","no"),y=!0}}function n(t){y&&!t||!u||(u.callMethod("hide"),l.callMethod("hide"),setTimeout(function(){c.style.display="none"},400))}function r(){n(!0),h=VK.Util.Box(d.src+"&act=a_stats_box&widget_width=620"),h.show()}var s=VK.Util.getPageData();if(!VK._apiId)throw Error("VK not initialized. Please use VK.init");e=VK.extend(e||{},{allowTransparency:!0}),("button"==e.type||"vertical"==e.type||"mini"==e.type)&&delete e.width;var a,d,l,c,u,p,h,f="full"==e.type||"button"==e.type||"vertical"==e.type||"mini"==e.type?e.type:"full",g="full"==f?Math.max(200,e.width||350):"button"==f?180:"mini"==f?100:41,m=parseInt(e.height,10)||22,_="vertical"==f?2*m+7:"full"==f?m+1:m,v={page:o||0,url:e.pageUrl||s.url,type:f,verb:1==e.verb?1:0,color:e.color||"",title:e.pageTitle||s.title,description:e.pageDescription||s.description,image:e.pageImage||s.image,text:(e.text||"").substr(0,140),h:m},w=e.ttHere||!1,y=!1;return VK.Widgets._constructor("widget_like.php",t,e,v,{initTooltip:function(t){u=new fastXDM.Server({onInit:t?function(){i(!0)}:function(){},proxy:function(){l.callMethod.apply(l,arguments)},showBox:function(t,o){var i=VK.Util.Box((e.base_domain||VK._protocol+"//vk.com/")+t,[o.width,o.height],{proxy:function(){u.callMethod.apply(u,arguments)}});i.show()},statsBox:r},!1,{safe:!0}),c=u.append(w?a:document.body,{src:d.src+"&act=a_like_tooltip",scrolling:"no",allowTransparency:!0,id:d.id+"_tt",style:{position:"absolute",padding:0,display:"block",opacity:.01,filter:"alpha(opacity=1)",border:"0",width:"238px",height:"124px",zIndex:5e3,overflow:"hidden"}}),c.setAttribute("vkhidden","yes"),a.onmouseover=c.onmouseover=function(){clearTimeout(p),y=!0},a.onmouseout=c.onmouseout=function(){clearTimeout(p),y=!1,p=setTimeout(function(){n()},200)}},statsBox:r,showTooltip:i,hideTooltip:n,showBox:function(t){var o=VK.Util.Box((e.base_domain||VK._protocol+"//vk.com/")+t,[],{proxy:function(){l.callMethod.apply(l,arguments)}});o.show()},proxy:function(){u&&u.callMethod.apply(u,arguments)}},{startHeight:_,minWidth:g},function(t,e,o){l=o,VK.Util.ss(a=t,{height:_+"px",width:g+"px",position:"relative",clear:"both"}),VK.Util.ss(d=e,{height:_+"px",width:g+"px",overflow:"hidden",zIndex:150})})},VK.Widgets.Poll=function(t,e,o){var i=VK.Util.getPageData();if(!o)throw Error("No poll id passed");e=e||{};var n={poll_id:o,url:e.pageUrl||i.url||location.href,title:e.pageTitle||i.title,description:e.pageDescription||i.description};return VK.Widgets._constructor("widget_poll.php",t,e,n,{},{startHeight:133,minWidth:300,width:"100%"})},VK.Widgets.PagePoll=function(t,e,o){var i=VK.Util.getPageData();e=e||{};var n={page:o||0,norealtime:e.norealtime?1:0,poll_id:e.pollId||"",url:e.pageUrl||i.url||location.href,title:e.pageTitle||i.title,description:e.pageDescription||i.description};return VK.Widgets._constructor("al_widget_poll.php",t,e,n,{},{startHeight:133,minWidth:300,width:"100%"})},VK.Widgets.Community=VK.Widgets.Group=function(t,e,o){function i(){return r.callMethod("mouseUp"),!1}function n(t){return r.callMethod("mouseMove",{screenY:t.screenY}),!1}o=parseInt(o,10);var r;if(!o)throw Error("No group_id passed");e.mode=parseInt(e.mode,10).toString();var s={gid:o,mode:e.mode?e.mode:"0"};e.width||(e.width=200),e.wall&&(s.wall=e.wall),s.color1=e.color1||"",s.color2=e.color2||"",s.color3=e.color3||"",e.no_head&&(s.no_head=1),e.height||(e.height=290),e.wide&&(s.wide=1,e.width<300&&(e.width=300));var a;return VK.Widgets._constructor("widget_community.php",t,e,s,{showBox:function(t){var o=VK.Util.Box((e.base_domain||VK._protocol+"//vk.com/")+t,[],{proxy:function(){rpc.callMethod.apply(rpc,arguments)}});o.show()},startDrag:function(){a=window.document.body.style.cursor,window.document.body.style.cursor="pointer",VK.Util.addEvent("mousemove",n),VK.Util.addEvent("mouseup",i)},stopDrag:function(){window.document.body.style.cursor=a,VK.Util.removeEvent("mousemove",n),VK.Util.removeEvent("mouseup",i)},auth:function(){VK.Auth.login(null,1)}},{minWidth:120,width:"200",height:"290",startHeight:200},function(t,e,o){r=o})},VK.Widgets.Auth=function(t,e){VK.Util.getPageData();if(!VK._apiId)throw Error("VK not initialized. Please use VK.init");return e.width||(e.width=200),type=e.type?1:0,VK.Widgets._constructor("widget_auth.php",t,e,{},{makeAuth:function(t){if(t.session&&(VK.Auth._loadState="loaded",VK.Auth.setSession(t.session,"connected"),VK.Observer.publish("auth.loginStatus",{session:t.session,status:"connected"}),VK.Observer.unsubscribe("auth.loginStatus")),e.onAuth)e.onAuth(t);else{if(e.authUrl)var o=e.authUrl;else var o=window.location.href;o+=-1==o.indexOf("?")?"?":"&";var i=[];for(var n in t)"session"!=n&&i.push(n+"="+decodeURIComponent(t[n]).replace(/&/g,"%26").replace(/\\?/,"%3F"));window.location.href=o+i.join("&")}}},{startHeight:80})},VK.Widgets.Subscribe=function(t,e,o){o=parseInt(o,10);var i;if(!o)throw Error("No owner_id passed");var n={oid:o};return e.mode&&(n.mode=e.mode),e.soft&&(n.soft=e.soft),VK.Widgets._constructor("widget_subscribe.php",t,e,n,{showBox:function(t){var o=VK.Util.Box((e.base_domain||VK._protocol+"//vk.com/")+t,[],{proxy:function(){rpc.callMethod.apply(rpc,arguments)}});o.show()},auth:function(){VK.Auth.login(null,1)}},{minWidth:220,startHeight:22,height:e.height||22},function(t,e,o){i=o})},VK.Widgets.Ads=function(t,e,o){function i(t){VK.Widgets.loading(v,!0),r(t)}function n(t,o){VK.Widgets.loading(v,!1),s(o),e.onAdsReady&&e.onAdsReady.apply(e.onAdsReady,Array.prototype.slice.call(arguments)),a(t)}function r(t){if("vk__adsLight"in window)window.vk__adsLight&&vk__adsLight.userHandlers&&vk__adsLight.userHandlers.onInit&&vk__adsLight.userHandlers.onInit(!1);else{window.vk__adsLight=!1,t=parseInt(t);var o=VK.Api&&VK.Api.attachScript||VK.addScript,i=e.base_domain||VK._protocol+"//vk.com";o(i+"/js/al/aes_light.js?"+t)}}function s(t){if(t)for(var e in t){var o=t[e];"ads_ad_unit_width"===e||"ads_ad_unit_height"===e?e in w||(y[e]=parseInt(o)||"auto"===o&&w[e+"_auto"]||b[e]):e in y||(y[e]=o)}}function a(t){var e=d(y.ads_handler,t);if(0>=t&&e!==!0){try{console.log("VK: ad_unit_id = "+w.ads_ad_unit_id,", errorCode = ",t)}catch(o){}l(y.ads_handler_empty_html,y.ads_ad_unit_width,y.ads_ad_unit_height)}}function d(t){function e(t){return"[object Function]"===Object.prototype.toString.call(t)}function o(t){return"[object String]"===Object.prototype.toString.call(t)}var i=!1;try{if(!t)return!1;var n=!1;if(e(t))n=t;else if(o(t)){var r=t.split(".");n=window;for(var s=0,a=r.length;a>s&&(n=n[r[s]],n);s++);if(!n){"function"===t.substr(0,8)&&(t="return "+t+";");var d=new Function(t)();e(d)?n=d:i=d}}if(n){var l=Array.prototype.slice.call(arguments,1);i=n.apply(n,l)}}catch(c){try{console.error(c)}catch(u){}}return i}function l(t,e,o){function i(){if(!o)try{var t=r.contentWindow.document.body.firstChild.getBoundingClientRect(),e=Math.ceil(t.bottom-t.top);e&&(r.style.height=e,v.style.height=e)}catch(i){}}if(t&&v){e=e?e+"px":"",o=o?o+"px":"";var n=\'<html><head></head><body style="padding: 0; margin: 0;"><div>\'+t+"</div></body></html>",r=document.createElement("iframe");r.onload=i,r.id=(h?h.id:"vkwidget-"+Math.round(1e6*Math.random()))+"_ads_html_handler",r.src="about:blank",r.width="100%",r.height="100%",r.scrolling="no",r.frameBorder="0",r.allowTransparency=!0,r.style.overflow="hidden",r.style.width=e,r.style.height=o,v.style.width=e,v.style.height=o,v.appendChild(r),r.contentWindow.vk_ads_html_handler=n,r.src=\'javascript:window["vk_ads_html_handler"]\'}}function c(t,e,o){for(var i=o||0,n=(t||[]).length;n>i;i++)if(t[i]==e)return i;return-1}function u(t,e){return-1!=c(e,t)}function p(t,e,o){v=t,h=e,f=o}e=e||{},o=o||{};var h,f,g={},m={},_={},v=document.getElementById(t),w={},y={},b={};for(var V in o){var K=u(V,["hash"])?V:"ads_"+V;w[K]=o[V]}if(v&&v.getBoundingClientRect){v.style.width="100%",v.style.height="100%";var x=v.getBoundingClientRect();v.style.width="",v.style.height="",w.ads_ad_unit_width_auto=Math.floor(x.right-x.left),w.ads_ad_unit_height_auto=Math.floor(x.bottom-x.top)}return b.ads_ad_unit_width=100,b.ads_ad_unit_height=100,y.ads_ad_unit_width=parseInt(w.ads_ad_unit_width)||"auto"===w.ads_ad_unit_width&&w.ads_ad_unit_width_auto||b.ads_ad_unit_width,y.ads_ad_unit_height=parseInt(w.ads_ad_unit_height)||"auto"===w.ads_ad_unit_height&&w.ads_ad_unit_height_auto||b.ads_ad_unit_height,w.ads_handler&&(y.ads_handler=w.ads_handler),w.ads_handler_empty_html&&(y.ads_handler_empty_html=w.ads_handler_empty_html),delete w.ads_handler,delete w.ads_handler_empty_html,g.act="ads_web",g.url=location.href,VK.extend(g,w),e.noDefaultParams=!0,e.width=y.ads_ad_unit_width,e.allowTransparency=!0,m.startHeight=y.ads_ad_unit_height,m.minWidth=y.ads_ad_unit_width,_.adsOnInitLoader=i,_.adsOnInit=n,VK.Widgets._constructor("ads_rotate.php",t,e,g,_,m,p)},VK.Widgets._constructor=function(t,e,o,i,n,r,s,a,d){var l=document.getElementById(e);if(a=a||++VK.Widgets.count,!l){if(d=d||0,d>10)throw Error("VK.Widgets: object #"+e+" not found.");return setTimeout(function(){VK.Widgets._constructor(t,e,o,i,n,r,s,a,d+1)},500),a\n}var c,u,p,h,f,g,m,_;o=o||{},r=r||{},n=n||{},c=o.base_domain||VK._protocol+"//vk.com",u="auto"==o.width?l.clientWidth||"100%":parseInt(o.width,10),o.height?(i.height=o.height,l.style.height=o.height+"px"):l.style.height=(r.startHeight||200)+"px",u=u?Math.max(r.minWidth||200,Math.min(1e4,u))+"px":"100%",i.url||(i.url=o.pageUrl||location.href.replace(/#.*$/,"")),p=c+"/"+t,h="",o.noDefaultParams||(h+="&app="+(VK._apiId||"0")+"&width="+u),h+="&_ver="+VK.version,VK._iframeAppWidget&&(i.iframe_app=1);for(_ in i){if("title"==_&&i[_].length>80&&(i[_]=i[_].substr(0,80)+"..."),"description"==_&&i[_].length>160&&(i[_]=i[_].substr(0,160)+"..."),"number"==typeof i[_])f=i[_];else try{f=encodeURIComponent(i[_])}catch(v){f=""}h+="&"+_+"="+f}return h+="&"+(+new Date).toString(16),p+="?"+h.substr(1),l.style.width=u,VK.Widgets.loading(l,!0),n.publish=function(){var t=Array.prototype.slice.call(arguments);t.push(a),VK.Observer.publish.apply(VK.Observer,t)},n.onInit=function(){VK.Widgets.loading(l,!1),n.onReady&&n.onReady(),o.onReady&&o.onReady()},n.resize=function(t){l.style.height=t+"px";var e=document.getElementById("vkwidget"+a);e&&(e.style.height=t+"px")},n.resizeWidget=function(t,e){t=parseInt(t),e=parseInt(e);var i=document.getElementById("vkwidget"+a);isFinite(t)&&(l.style.width=t+"px",i&&(i.style.width=t+"px")),isFinite(e)&&(l.style.height=e+"px",i&&(i.style.height=e+"px")),o.onResizeWidget&&o.onResizeWidget()},n.updateVersion=function(t){t>1&&VK.Api.attachScript("//vk.com/js/api/openapi_update.js?"+parseInt(t))},g=VK.Widgets.RPC[a]=new fastXDM.Server(n,function(t){return t?(t=t.toLowerCase(),t.match(/(\\.|\\/)vk\\.com($|\\/|\\?)/)):!0},{safe:!0}),m=VK.Widgets.RPC[a].append(l,{src:p,width:-1!=u.indexOf("%")?u:parseInt(u)||u,height:r.startHeight||"100%",scrolling:"no",id:"vkwidget"+a,allowTransparency:o.allowTransparency||!1,style:{overflow:"hidden"}}),s&&setTimeout(function(){s(l,m||l.firstChild,g)},10),a}),VK.Util||(VK.Util={getPageData:function(){if(!VK._pData){var t,e=document.getElementsByTagName("meta"),o={},i=["description","title","url","image","app_id"];for(var n in e)if(e[n].getAttribute&&e[n].getAttribute&&((t=e[n].getAttribute("name"))||(t=e[n].getAttribute("property"))))for(var r in i)(t==i[r]||t=="og:"+i[r]||t=="vk:"+i[r])&&(o[i[r]]=e[n].content);o.app_id&&!VK._apiId&&(VK._apiId=o.app_id),o.title=o.title||document.title||"",o.description=o.description||"",o.image=o.image||"",!o.url&&VK._iframeAppWidget&&VK._apiId&&(o.url="/app"+VK._apiId,VK._browserHash&&(o.url+=VK._browserHash));var s=location.href.replace(/#.*$/,"");o.url&&o.url.indexOf(s)||(o.url=s),VK._pData=o}return VK._pData},getStyle:function(t,e){var o,i=document.defaultView||window;if(i.getComputedStyle){e=e.replace(/([A-Z])/g,"-$1").toLowerCase();var n=i.getComputedStyle(t,null);n&&(o=n.getPropertyValue(e))}else if(t.currentStyle){var r=e.replace(/\\-(\\w)/g,function(t,e){return e.toUpperCase()});o=t.currentStyle[e]||t.currentStyle[r]}return o},getXY:function(t,e){if(t&&void 0!==t){var o=0,i=0;if(void 0!==t.getBoundingClientRect){var n=t.getBoundingClientRect();o=n.left,i=n.top,e=!0}else if(t.offsetParent)do o+=t.offsetLeft,i+=t.offsetTop,e&&(o-=t.scrollLeft,i-=t.scrollTop);while(t=t.offsetParent);return e&&(i+=window.pageYOffset||window.scrollNode&&scrollNode.scrollTop||document.documentElement.scrollTop,o+=window.pageXOffset||window.scrollNode&&scrollNode.scrollLeft||document.documentElement.scrollLeft),[o,i]}},Box:function(t,e,o){o=o||{};var i=document.body.style.overflow,n=document.createElement("DIV"),r=new fastXDM.Server(VK.extend(o,{onInit:function(){s.style.background="transparent",s.style.visibility="visible",document.body.style.overflow="hidden",document.body.removeChild(n)},hide:function(){s.style.display="none"},tempHide:function(){s.style.left="-10000px",s.style.top="-10000px",s.style.width="10px",s.style.height="10px",document.body.style.overflow=i},destroy:function(){try{s.src="about: blank;"}catch(t){}s.parentNode.removeChild(s),document.body.style.overflow=i},resize:function(){}},!0),!1,{safe:!0}),s=r.append(document.body,{src:t.replace(/&amp;/g,"&"),scrolling:"no",allowTransparency:!0,style:{position:"fixed",left:0,top:0,zIndex:1002,background:VK._protocol+"//vk.com/images/upload.gif center center no-repeat transparent",padding:"0",border:"0",width:"100%",height:"100%",overflow:"hidden",visibility:"hidden"}});return n.innerHTML=\'<div style="position: fixed;left: 50%;top: 50%;margin: 0px auto 0px -60px;z-index: 1002;width: 100px;"><div style="background: url(//vk.com/images/upload_inv_mono\'+(window.devicePixelRatio>=2?"_2x":"")+\'.gif) no-repeat 50% 50%;background-size: 64px 16px;height: 50px;position: absolute;width: 100%;z-index: 100;"></div><div style="background-color: #000;opacity: 0.7;filter: alpha(opacity=70);height: 50px;-webkit-border-radius: 5px;-khtml-border-radius: 5px;-moz-border-radius: 5px;border-radius: 5px;-webkit-box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.35);-moz-box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.35);box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.35);"></div></div>\',document.body.insertBefore(n,document.body.firstChild),{show:function(){s.style.display="block",document.body.style.overflow="hidden"},hide:function(){s.style.display="none",document.body.style.overflow=i},iframe:s,rpc:r}},addEvent:function(t,e){window.document.addEventListener?window.document.addEventListener(t,e,!1):window.document.attachEvent&&window.document.attachEvent("on"+t,e)},removeEvent:function(t,e){window.document.removeEventListener?window.document.removeEventListener(t,e,!1):window.document.detachEvent&&window.document.detachEvent("on"+t,e)},ss:function(t,e){VK.extend(t.style,e,!0)}}),window.vkAsyncInit&&setTimeout(vkAsyncInit,0),window.vkAsyncInitCallbacks&&vkAsyncInitCallbacks.length&&setTimeout(function(){for(var t;t=vkAsyncInitCallbacks.pop();)try{t()}catch(e){try{console.error(e)}catch(o){}}},0);try{window.stManager&&stManager.done("api/openapi.js")}catch(e){}',{address:"js/plugins/social/vk/vk_sdk",metadata:{deps:[],format:"global"}});

/*modules/profile/profile*/
define("modules/profile/profile",["can/","lodash","controller","core/appState","module/profile/profileModel","lib/popUp/popUp","lib/childPopUp/","js/plugins/jquery.inputmask/dist/jquery.inputmask.bundle","module/profile/select2Options","module/profile/select3Options","moment","module/profile/views/index.mustache!","module/profile/views/friends.mustache!","tooltipster","select2","vk-openapi","custom-scrollbar","js/plugins/select2/select2.css!","js/plugins/social/vk/vk_sdk","css/user/profile/select2Profile.css!","can/view/bindings/bindings"],function(t,e,i,o,s,n,a,r,l,u,d,c,p,h,f,v,m,g,_,w,b){"use strict";function k(){return["Янв","Фев","Март","Апр","Май","Июнь","Июль","Авг","Сен","Окт","Нояб","Дек"]}function P(t,e){for(var i=new Date(e,t,1),o=[];i.getMonth()===t;)o.push(i.getDate()),i.setDate(i.getDate()+1);return o}function y(t){var e=(new Date).getFullYear(),i=[];for(t=t||1980;e>=t;)i.push(t++);return i}t&&t.__esModule||(t={"default":t}),e&&e.__esModule||(e={"default":e}),i&&i.__esModule||(i={"default":i}),o&&o.__esModule||(o={"default":o}),s&&s.__esModule||(s={"default":s}),n&&n.__esModule||(n={"default":n}),a&&a.__esModule||(a={"default":a}),r&&r.__esModule||(r={"default":r}),l&&l.__esModule||(l={"default":l}),u&&u.__esModule||(u={"default":u}),d&&d.__esModule||(d={"default":d}),c&&c.__esModule||(c={"default":c}),p&&p.__esModule||(p={"default":p}),h&&h.__esModule||(h={"default":h}),f&&f.__esModule||(f={"default":f}),v&&v.__esModule||(v={"default":v}),m&&m.__esModule||(m={"default":m}),g&&g.__esModule||(g={"default":g}),_&&_.__esModule||(_={"default":_}),w&&w.__esModule||(w={"default":w}),b&&b.__esModule||(b={"default":b});var M=t["default"],S=e["default"],V=i["default"],C=o["default"],K=s["default"],T=n["default"],x=a["default"],U=(r["default"],l["default"]),A=(u["default"],d["default"],c["default"]),F=p["default"],I={vk:"Быть родителем интересно!\n\rОсобенно если знаешь, как правильно воспитывать, кормить, пеленать, развлекать и ухаживать за маленькой непоседой. У вас тоже есть детки? Тогда вам сюда! "},j=[{name:"novice",label:"Новичок",points:200},{name:"disciple",label:"Ученик",points:400},{name:"adept",label:"Знаток",points:600},{name:"expert",label:"Эксперт",points:800},{name:"pro",label:"Профи",points:1e3}];M.mustache.registerHelper("tooltip",function(t,e,i,o){var t=o.context.user.attr("errors");return function(o){t.delegate("**","set",function(s,n,a,r){if(r==e){if(null==n)return void $(o).tooltipster("destroy");var l;t.attr(e)&&(l=t.attr(e),$(o).tooltipster({content:l,position:i||"right",theme:"tooltipster-error"}),$(o).tooltipster("show"))}})}}),M.mustache.registerHelper("userLevelNum",function(t){var e;t="function"==typeof t?t():t;for(var i in j)t>j[i].points&&(e=Number(i)+1);return void 0==e&&(e=0),e+1}),M.mustache.registerHelper("userLevelText",function(t){var e;t="function"==typeof t?t():t;for(var i in j)t>j[i].points&&(e=j[i].label);return void 0==e&&(e=j[0].label),e}),M.mustache.registerHelper("isFilledStart",function(t,e){var i;e="function"==typeof e?e():e;for(var o in j)e>j[o].points&&(i=j[o]);return void 0==i&&(i=j[0]),i.points>=t.points?"filled":void 0}),M.mustache.registerHelper("isFilled",function(t,e){var i;e="function"==typeof e?e():e;for(var o in j)e>j[o].points&&(i=j[o]);return void 0==i?"":i.points>=t.points?"filled":void 0}),M.mustache.registerHelper("diff",function(t,e){var i,o,s;t="function"==typeof t?t():t,e="function"==typeof e?e():e;for(var n in j)e>j[n].points&&(i=j[n]);return void 0==i&&(i=j[0]),o=i.points/7,s=e-o*t,0>s?0:s/o*100}),M.mustache.registerHelper("leftNext",function(t){var e,i;t="function"==typeof t?t():t;for(var o in j)t>j[o].points&&(e=Number(o)+1);return void 0==e&&(e=0),i=j[e].points-t,"До "+(e+2)+"го осталось "+i+" баллов"}),M.mustache.registerHelper("isChekedAgree",function(t){return t()?"checked":""}),M.mustache.registerHelper("levelPrefix",function(t){var e;return t="function"==typeof t?t():t,e=S.filter(j,function(e,i,o){var s=e.points,n=o[i+1],a=o[i-1];return t>s&&!n&&a?!0:t>s&&!a&&n&&t<n.points?!0:s>t&&a&&a.points&&t>a.points?!0:void 0}).pop(),void 0==e&&(e=j[0]),e.name});var L=V.extend({defaults:{input:".editableInput",user:C.attr("user"),facebookPermissions:"",vkLoginPermissions:""}},{after_init:function(){return this.data=C.attr("user"),this.user=this.data.options.user,this.errs=new M.Map,this.dates=new M.Map({months:k(),days:P(0,1950),years:y(1950)}),this.countries=["Украина","Россия","Беларусь","Германия","Израиль","Канада","Чехия","Польша","Казахстан","Другая страна"],this.data.auth.isAuth?(this.options.model=new K(this.data.options.user.serialize()),this.bindTpl(),this.bindImages(),$(".tooltip.agushaTooltip").tooltipster({position:"right",theme:"tooltipster-agusha",trigger:"hover"}),$("#city").select2(U),$("#city").select2("val",this.user.attr("contacts.city")),$(".phoneInput").inputmask("+3 8(999) 999 - 99 - 99"),this.initCustomScrollbar(),this.initSetPasswordTooltipster(),this.initSpareEmailTooltipster(),void this.initSocial()):void M.route.attr({module:"login"})},initSocial:function(){"undefined"!=typeof FB&&FB.init({appId:812840382107432,cookie:!0,xfbml:!0,version:"v2.2"})},initSetPasswordTooltipster:function(){$(".newPasswordTooltip").tooltipster({position:"right",theme:"tooltipster-error",trigger:"hover"})},initSpareEmailTooltipster:function(){$(".spareEmail").tooltipster({position:"right",theme:"tooltipster-error",trigger:"hover"})},initCustomScrollbar:function(){var t=this;$(".customSelectList",t.element).mCustomScrollbar({theme:"dark-thick",axis:"y",height:300,scrollInertia:400,scrollButtons:{enable:!1,scrollAmount:200,scrollType:"stepless"},advanced:{updateOnContentResize:!0}})},createChildPopUp:function(t){var e=$('<span class="childPopupWrap"></span>');this.childPopupElement=$("body").append(e),this.childPopUp=new x(e,{child:t}),this.child=this.childPopUp.module.child,this.bindChild()},".social_buttons .vk click":function(){var t=this;VK.Auth.login(function(e){t.vkLoginResponse(e)},t.options.vkLoginPermissions)},vkLoginResponse:function(t){t.session?M.ajax({url:"/login/linkVk",type:"POST",data:{response:t}}).done(function(){$(".button.vk").addClass("active")}).fail(function(t){console.error(t)}):alert("not auth")},".social_buttons .fb click":function(){window.location.href="/registration/fb"},fbLoginResponse:function(t){"connected"===t.status?FB.api("/me",function(e){t.user=e}):"not_authorized"===t.status},".social_buttons .ok click":function(){window.location.href="/registration/ok"},".addChild click":function(){this.createChildPopUp(),this.childPopUp.show({})},".childPic click":function(t){var e=t.data("children");this.createChildPopUp(e),this.childPopUp.show({})},change:function(t,e){e.preventDefault(),this.saveModel()},".buttons .remove.button click":function(){this.user.removeImage()},".user_birth_date select change":function(t){var e=$(t).attr("class"),i=Number($(t,"option:selected").val()),o=$(".user_birth_date option:selected").val()||2e3,s=$(".user_birth_month option:selected").val()||0;"birth_month"==e&&this.dates.attr("days",P(i,o)),"birth_year"==e&&this.dates.attr("days",P(s,i))},".switcher click":function(t,e){var i=$(e.target).data("passid");$(e.target).toggleClass("active"),$("input[data-passid="+i+"]").prop("type",function(t,e){return"password"==e?"text":"password"})},saveModel:function(t){var e=this.data.options.user;this.options.model._data=e.attr(),this.options.model.save().done(function(){C.attr("moneybox",!0)}).fail(function(){t&&t(e)})},updateUser:function(){this.saveModel()},saveChild:function(){var t,e=this.data.options.user;return this.childPopUp.module.attr?(t=this.childPopUp.module.attr("child"),t.attr?t.attr("_id")?this.updateUser(t):(e.attr("children").push(t),void this.saveModel(function(){t.attr({isSaved:!1})})):!1):!1},bindChild:function(){this.childPopUp.child.delegate("isSaved","set",M.proxy(this.saveChild,this))},bindTpl:function(){var t,e=this;t=new M.Map({user:this.data.options.user,errs:this.errs,levels:j,levelKeys:[1,2,3,4,5,6,7],dates:this.dates,countries:this.countries,months:k()}),$("#profile").html(M.view(A,t,{genderChecked:function(t){var i,o=e.data.user();return(i=o.profile.gender)?1==i&&"female"==t?"checked":2==i&&"male"==t?"checked":"":""},getUserMonth:function(t){return k()[t()]}})),$("input.deletable").wrap('<span class="deleteicon" />').after($("<span/>").click(function(){$(this).prev("input").val("").focus()}))},bindImages:function(){var t=this;this.user.delegate("image","set",function(){t.saveModel()})},".profileInvite.vk click":function(){VK.Auth.login(S.bind(this.handleAuthVK,this),8198)},handleAuthVK:function(t){return t.session?this.checkAuthVK(t.session):void 0},checkAuthVK:function(t){M.ajax({url:"/profile/checkAuth",method:"GET",data:{expire:t.expire,mid:t.mid,sid:t.sid,sig:t.sig,secret:t.secret}}).done(S.bind(this.getFriendsVK,this))},getFriendsVK:function(t){t&&VK.Api.call("friends.get",{fields:"uid,first_name,last_name,photo",order:"hints"},S.bind(this.showFriendsVK,this))},showFriendsVK:function(t){var e=t.response;e instanceof Array&&e.length&&this.createFriendsPopup(e,"VKONTAKTE")},createFriendsPopup:function(t,e){var i=this,o=M.view(F,{friends:t,socialNetwork:e},{sendMessage:function(){return function(t){$(t).on("click",function(){var t=$(this);i.sendMessageVK(t.data("id"),t)})}},close:function(){return function(t){$(t).on("click",function(){$(this).closest(".pf-wrap").remove()})}}});$("body").append(o),$(".pf-items").mCustomScrollbar({theme:"dark-thin",axis:"y",height:300,scrollInertia:400,scrollButtons:{enable:!1,scrollAmount:200,scrollType:"stepless"},advanced:{updateOnContentResize:!0}})},sendMessageVK:function(t,e){var i=this;M.ajax({url:"/profile/invitedVK",method:"GET",data:{uid:t}}).done(function(o){return"string"==typeof o?C.attr("popUp").show({title:"Ошибка!",text:S.isString(o)?o:"Произошла неизвестная ошибка."}):o!==!0||confirm("Этому пользователю уже было выслано приглашение, выслать все равно?")?void VK.Api.call("photos.getWallUploadServer",{},S.bind(i.uploadImageToWallVK,i,t,e)):i.checkSocialButton(e)}).fail(function(t){C.attr("popUp").show({title:"Ошибка!",text:S.isString(t)?t:"Произошла неизвестная ошибка."})})},uploadImageToWallVK:function(t,e,i){M.ajax({url:"/profile/uploadVK",type:"POST",data:{uploadUrl:i.response.upload_url},success:S.bind(this.savePhotoToWallVK,this,t,e)})},savePhotoToWallVK:function(t,e,i){i=JSON.parse(i),VK.Api.call("photos.saveWallPhoto",{server:i.server,photo:i.photo,hash:i.hash},S.bind(this.sendFriendsMessageVK,this,t,e))},sendFriendsMessageVK:function(t,e,i){var o=i.response,s=this,n="";n+=window.location.origin+"/?referer="+C.attr("user").user().attr("_id")+"&utm_source=facebook&utm_medium=invite&utm_campaign=site_invite,",n+=o&&o[0]&&o[0].id||"",VK.Api.call("wall.post",{owner_id:t,message:I.vk,attachments:n},function(i){return i?(M.ajax({url:"/profile/invitedVK",method:"POST",data:{uid:t}}),s.checkSocialButton(e)):(C.attr("moneybox",!0),void C.attr("popUp").show({title:"Ошибка!",text:"Произошла ошибка при отправке сообщения, пожалуйста, попробуйте позже."}))})},checkSocialButton:function(t){t.addClass("sended").prop("disabled",!0).html("ОТПРАВЛЕНО").off("click")},".profileInvite.fb click":function(){FB.ui({method:"send",link:window.location.origin+"/?referer="+C.attr("user").user().attr("_id")+"&utm_source=facebook&utm_medium=invite&utm_campaign=site_invite"})},".newPasswordValidate keyup":function(t){this.newPasswordValidate(t)},newPasswordValidate:function(){var t=this,e=$(".newPassword1",t.element).val(),i=$(".newPassword2",t.element).val();e!=i?($(".newPasswordTooltip").tooltipster("content","Пароли не совпадают"),$(".newPasswordTooltip").tooltipster("show",function(){})):$(".newPasswordTooltip").tooltipster("hide",function(){})},".customSelect .content click":function(t,e){e.stopPropagation();var i=t.parents(".customSelect").find(".customSelectList");i.hasClass("active")?i.removeClass("active"):i.addClass("active")},".customSelectListItem click":function(t){var e=t.data("value"),i=t.html(),o=t.parents(".customSelect"),s=t.parents(".customInput"),n=o.find(".content .value"),a=o.find(".customSelectList"),r=o.data("target"),l=o.parent().find("select."+r);if(o.hasClass("customDay")?this.user.attr("birth_date.day",e):o.hasClass("customMonth")?this.user.attr("birth_date.month",e):o.hasClass("customYear")&&this.user.attr("birth_date.year",e),a.removeClass("active"),n.html(i),s.length>0){var u=o.parent().find("input."+r);u.val(e),u.trigger("change")}else l.find("option:selected").attr("selected",!1),l.find('option[value="'+e+'"]').attr("selected","selected"),this.saveModel()},".changePassword submit":function(t,e){e.preventDefault();var i=M.deparam(t.serialize());return 0==i.oldPassword.length||0==i.newPassword.length?(T.showPopup({title:"Ошибка!",content:"Пожалуйста, заполните все поля"}),!1):i.newPassword!=i.newPasswordCopy?(T.showPopup({title:"Ошибка!",content:"Пароли не совпадают"}),!1):void M.ajax({url:"/profile/changePassword",method:"POST",data:i}).done(function(){T.showPopup({title:"",content:"Ваш пароль изменен"})}).fail(function(){T.showPopup({title:"Ошибка!",content:"При изменении пароля произошла ошибка"})})},".saveProfileData click":function(){T.showPopup({title:"",content:"Ваши данные успешно сохранены"})},click:function(){var t=$(".customSelectList");t.hasClass("active")&&t.removeClass("active")},".spareEmail keyup":function(t){var e=t.val();if(e){var i;i="^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$",e.match(i)?t.tooltipster("hide",function(){}):(t.tooltipster("content","Введите корректный e-mail"),t.tooltipster("show",function(){}))}}});return{get default(){return L},__esModule:!0}});
