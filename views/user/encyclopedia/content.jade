include helpers
.filter
	.age_filter
		.topper
			.adorable_table
				.adorable_cell
					.top_label Энциклопедия
					.label.novito_nova Выберите возраст
		
		.ages_container
	
			- each a, key in ages
				- var normal = '/img/' + (a.icon && a.icon.normal ? 'uploads/' + a.icon.normal : 'no_photo.png')
				- var hover = '/img/' + (a.icon && a.icon.hover ? 'uploads/' + a.icon.hover : 'no_photo.png')
				- var classname = ''
				
				if params.age && params.age == a.value
					- classname = 'active'
				
				.age_block(data-value = a.value, class = classname)
					.adorable_table
						.adorable_cell
							.image
								img.normal(src = normal)
								img.hover(src = hover)
									
							.title #{a.title}

	.theme_filter
		.topper
			.adorable_table
				.adorable_cell
					.close
					.label.novito_nova Какая тема вам ближе?

		.center
			.adorable_table
				.adorable_cell
					.bookshelf
						- each t, key in themes
							mixin theme(t)
		
		.footer
			.adorable_table
				.adorable_cell
					button.filter_button Применить

if params.age || params.theme
	.center
		.content
			include ../helpers/breadcrumbs
			
			.topper_title
				if params.theme
					- each t, key in themes
						if t._id == params.theme
							| #{t.name}
				else
					- each a, key in ages
						if a.value == params.age
							| #{a.title}
			
			.items_filter
				select.author_select
					option(data-count = 0, value = 0) Все авторы
					option(data-count = 0, value ="Статья от редакции") От редакции
					option(data-count = 0, value ="Статья от специалиста") Мнение специалиста
					option(data-count = 0, value ="Тема недели") Тема недели
				
				select.order_select
					option(value = 'date') Сначала новые
					option(value = '-date') Сначала старые
				
				.subscribe
					.adorable_table
						.adorable_cell
							button
								img(src="/img/user/encyclopedia/pencil.png")
								span Подписаться на тему
			
			.items_container
				- each a, i in articles
					mixin article(a, i)
