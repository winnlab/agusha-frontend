/*modules/partners/partners*/
define("modules/partners/partners",["controller","select2","lodash"],function(t,e,a){"use strict";t&&t.__esModule||(t={"default":t}),e&&e.__esModule||(e={"default":e}),a&&a.__esModule||(a={"default":a});var r=t["default"],s=(e["default"],a["default"]),n=r.extend({defaults:{}},{select2:function(){var t=this.element.find(".sort_select");this.sort_select2=t.select2({width:"off",formatSelection:this.format,formatResult:this.format,minimumResultsForSearch:-1})},format:function(t){var e=($(t.element),'<div class="adorable_table"><div class="adorable_cell partners_select_text left">'+t.text+"</div></div>");return e},after_init:function(t){var e,a=t?t.partners:app.partners,r=can.Map.extend({define:{all_partners:{value:a},partners:{get:function(t){var e={all_partners:this.attr("all_partners"),current_page:this.attr("current_page"),per_page:this.attr("per_page"),sort_by_alphabet:this.attr("sort_by_alphabet")},a=(e.current_page-1)*e.per_page,r=s.sortByOrder(e.all_partners,"title",e.sort_by_alphabet),n=r.slice(a,e.per_page);return n}},sort_by_alphabet:{value:1},pages_count:{get:function(){var t={all_partners:this.attr("all_partners"),per_page:this.attr("per_page")};return Math.ceil(t.all_partners.length/t.per_page)}},current_page:{value:1},per_page:{value:30}}});this.data=new r;var n=$("#partner_mustache");e=n.length?n.html():jadeTemplate.get("user/partners/partner_mustache"),can.view.mustache("partner",e),$("#partners_container").html(can.view("partner",this.data)),this.select2()},".prev_page click":function(t){var e=this.data.attr("current_page");e>1&&this.data.attr("current_page",e-1)},".next_page click":function(t){var e=this.data.attr("current_page"),a=this.data.attr("pages_count");a>e&&this.data.attr("current_page",e+1)},".sort_select change":function(t,e){var a=+e.val;this.data.attr("sort_by_alphabet",a),this.sort_select2.select2("val",a)}});return{get default(){return n},__esModule:!0}});